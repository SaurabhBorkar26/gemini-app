var Qg=d=>{throw TypeError(d)};var Vu=(d,t,i)=>t.has(d)||Qg("Cannot "+i);var Yt=(d,t,i)=>(Vu(d,t,"read from private field"),i?i.call(d):t.get(d)),_i=(d,t,i)=>t.has(d)?Qg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,i),Ue=(d,t,i,s)=>(Vu(d,t,"write to private field"),s?s.call(d,i):t.set(d,i),i),Ei=(d,t,i)=>(Vu(d,t,"access private method"),i);var Wg=(d,t,i,s)=>({set _(r){Ue(d,t,r,i)},get _(){return Yt(d,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();var Xu={exports:{}},nr={};var Zg;function pv(){if(Zg)return nr;Zg=1;var d=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:d,type:s,key:c,ref:r!==void 0?r:null,props:o}}return nr.Fragment=t,nr.jsx=i,nr.jsxs=i,nr}var Jg;function gv(){return Jg||(Jg=1,Xu.exports=pv()),Xu.exports}var R=gv(),Yu={exports:{}},ft={};var tm;function mv(){if(tm)return ft;tm=1;var d=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function x(O,q,Q){this.props=O,this.context=q,this.refs=_,this.updater=Q||w}x.prototype.isReactComponent={},x.prototype.setState=function(O,q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,q,"setState")},x.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function T(){}T.prototype=x.prototype;function C(O,q,Q){this.props=O,this.context=q,this.refs=_,this.updater=Q||w}var D=C.prototype=new T;D.constructor=C,S(D,x.prototype),D.isPureReactComponent=!0;var k=Array.isArray;function B(){}var N={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function K(O,q,Q){var tt=Q.ref;return{$$typeof:d,type:O,key:q,ref:tt!==void 0?tt:null,props:Q}}function W(O,q){return K(O.type,q,O.props)}function Z(O){return typeof O=="object"&&O!==null&&O.$$typeof===d}function st(O){var q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Q){return q[Q]})}var At=/\/+/g;function vt(O,q){return typeof O=="object"&&O!==null&&O.key!=null?st(""+O.key):q.toString(36)}function St(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(B,B):(O.status="pending",O.then(function(q){O.status==="pending"&&(O.status="fulfilled",O.value=q)},function(q){O.status==="pending"&&(O.status="rejected",O.reason=q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function z(O,q,Q,tt,lt){var ht=typeof O;(ht==="undefined"||ht==="boolean")&&(O=null);var ct=!1;if(O===null)ct=!0;else switch(ht){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(O.$$typeof){case d:case t:ct=!0;break;case g:return ct=O._init,z(ct(O._payload),q,Q,tt,lt)}}if(ct)return lt=lt(O),ct=tt===""?"."+vt(O,0):tt,k(lt)?(Q="",ct!=null&&(Q=ct.replace(At,"$&/")+"/"),z(lt,q,Q,"",function(kn){return kn})):lt!=null&&(Z(lt)&&(lt=W(lt,Q+(lt.key==null||O&&O.key===lt.key?"":(""+lt.key).replace(At,"$&/")+"/")+ct)),q.push(lt)),1;ct=0;var ee=tt===""?".":tt+":";if(k(O))for(var jt=0;jt<O.length;jt++)tt=O[jt],ht=ee+vt(tt,jt),ct+=z(tt,q,Q,ht,lt);else if(jt=A(O),typeof jt=="function")for(O=jt.call(O),jt=0;!(tt=O.next()).done;)tt=tt.value,ht=ee+vt(tt,jt++),ct+=z(tt,q,Q,ht,lt);else if(ht==="object"){if(typeof O.then=="function")return z(St(O),q,Q,tt,lt);throw q=String(O),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ct}function X(O,q,Q){if(O==null)return O;var tt=[],lt=0;return z(O,tt,"","",function(ht){return q.call(Q,ht,lt++)}),tt}function J(O){if(O._status===-1){var q=O._result;q=q(),q.then(function(Q){(O._status===0||O._status===-1)&&(O._status=1,O._result=Q)},function(Q){(O._status===0||O._status===-1)&&(O._status=2,O._result=Q)}),O._status===-1&&(O._status=0,O._result=q)}if(O._status===1)return O._result.default;throw O._result}var dt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},wt={map:X,forEach:function(O,q,Q){X(O,function(){q.apply(this,arguments)},Q)},count:function(O){var q=0;return X(O,function(){q++}),q},toArray:function(O){return X(O,function(q){return q})||[]},only:function(O){if(!Z(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return ft.Activity=y,ft.Children=wt,ft.Component=x,ft.Fragment=i,ft.Profiler=r,ft.PureComponent=C,ft.StrictMode=s,ft.Suspense=h,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ft.__COMPILER_RUNTIME={__proto__:null,c:function(O){return N.H.useMemoCache(O)}},ft.cache=function(O){return function(){return O.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(O,q,Q){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var tt=S({},O.props),lt=O.key;if(q!=null)for(ht in q.key!==void 0&&(lt=""+q.key),q)!H.call(q,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&q.ref===void 0||(tt[ht]=q[ht]);var ht=arguments.length-2;if(ht===1)tt.children=Q;else if(1<ht){for(var ct=Array(ht),ee=0;ee<ht;ee++)ct[ee]=arguments[ee+2];tt.children=ct}return K(O.type,lt,tt)},ft.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},ft.createElement=function(O,q,Q){var tt,lt={},ht=null;if(q!=null)for(tt in q.key!==void 0&&(ht=""+q.key),q)H.call(q,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(lt[tt]=q[tt]);var ct=arguments.length-2;if(ct===1)lt.children=Q;else if(1<ct){for(var ee=Array(ct),jt=0;jt<ct;jt++)ee[jt]=arguments[jt+2];lt.children=ee}if(O&&O.defaultProps)for(tt in ct=O.defaultProps,ct)lt[tt]===void 0&&(lt[tt]=ct[tt]);return K(O,ht,lt)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(O){return{$$typeof:u,render:O}},ft.isValidElement=Z,ft.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:J}},ft.memo=function(O,q){return{$$typeof:f,type:O,compare:q===void 0?null:q}},ft.startTransition=function(O){var q=N.T,Q={};N.T=Q;try{var tt=O(),lt=N.S;lt!==null&&lt(Q,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(B,dt)}catch(ht){dt(ht)}finally{q!==null&&Q.types!==null&&(q.types=Q.types),N.T=q}},ft.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ft.use=function(O){return N.H.use(O)},ft.useActionState=function(O,q,Q){return N.H.useActionState(O,q,Q)},ft.useCallback=function(O,q){return N.H.useCallback(O,q)},ft.useContext=function(O){return N.H.useContext(O)},ft.useDebugValue=function(){},ft.useDeferredValue=function(O,q){return N.H.useDeferredValue(O,q)},ft.useEffect=function(O,q){return N.H.useEffect(O,q)},ft.useEffectEvent=function(O){return N.H.useEffectEvent(O)},ft.useId=function(){return N.H.useId()},ft.useImperativeHandle=function(O,q,Q){return N.H.useImperativeHandle(O,q,Q)},ft.useInsertionEffect=function(O,q){return N.H.useInsertionEffect(O,q)},ft.useLayoutEffect=function(O,q){return N.H.useLayoutEffect(O,q)},ft.useMemo=function(O,q){return N.H.useMemo(O,q)},ft.useOptimistic=function(O,q){return N.H.useOptimistic(O,q)},ft.useReducer=function(O,q,Q){return N.H.useReducer(O,q,Q)},ft.useRef=function(O){return N.H.useRef(O)},ft.useState=function(O){return N.H.useState(O)},ft.useSyncExternalStore=function(O,q,Q){return N.H.useSyncExternalStore(O,q,Q)},ft.useTransition=function(){return N.H.useTransition()},ft.version="19.2.1",ft}var em;function Ch(){return em||(em=1,Yu.exports=mv()),Yu.exports}var j=Ch(),$u={exports:{}},sr={},Ku={exports:{}},Qu={};var im;function yv(){return im||(im=1,(function(d){function t(z,X){var J=z.length;z.push(X);t:for(;0<J;){var dt=J-1>>>1,wt=z[dt];if(0<r(wt,X))z[dt]=X,z[J]=wt,J=dt;else break t}}function i(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var X=z[0],J=z.pop();if(J!==X){z[0]=J;t:for(var dt=0,wt=z.length,O=wt>>>1;dt<O;){var q=2*(dt+1)-1,Q=z[q],tt=q+1,lt=z[tt];if(0>r(Q,J))tt<wt&&0>r(lt,Q)?(z[dt]=lt,z[tt]=J,dt=tt):(z[dt]=Q,z[q]=J,dt=q);else if(tt<wt&&0>r(lt,J))z[dt]=lt,z[tt]=J,dt=tt;else break t}}return X}function r(z,X){var J=z.sortIndex-X.sortIndex;return J!==0?J:z.id-X.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();d.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,y=null,b=3,A=!1,w=!1,S=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var X=i(f);X!==null;){if(X.callback===null)s(f);else if(X.startTime<=z)s(f),X.sortIndex=X.expirationTime,t(h,X);else break;X=i(f)}}function k(z){if(S=!1,D(z),!w)if(i(h)!==null)w=!0,B||(B=!0,st());else{var X=i(f);X!==null&&St(k,X.startTime-z)}}var B=!1,N=-1,H=5,K=-1;function W(){return _?!0:!(d.unstable_now()-K<H)}function Z(){if(_=!1,B){var z=d.unstable_now();K=z;var X=!0;try{t:{w=!1,S&&(S=!1,T(N),N=-1),A=!0;var J=b;try{e:{for(D(z),y=i(h);y!==null&&!(y.expirationTime>z&&W());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,b=y.priorityLevel;var wt=dt(y.expirationTime<=z);if(z=d.unstable_now(),typeof wt=="function"){y.callback=wt,D(z),X=!0;break e}y===i(h)&&s(h),D(z)}else s(h);y=i(h)}if(y!==null)X=!0;else{var O=i(f);O!==null&&St(k,O.startTime-z),X=!1}}break t}finally{y=null,b=J,A=!1}X=void 0}}finally{X?st():B=!1}}}var st;if(typeof C=="function")st=function(){C(Z)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,vt=At.port2;At.port1.onmessage=Z,st=function(){vt.postMessage(null)}}else st=function(){x(Z,0)};function St(z,X){N=x(function(){z(d.unstable_now())},X)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(z){z.callback=null},d.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},d.unstable_getCurrentPriorityLevel=function(){return b},d.unstable_next=function(z){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var J=b;b=X;try{return z()}finally{b=J}},d.unstable_requestPaint=function(){_=!0},d.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=b;b=z;try{return X()}finally{b=J}},d.unstable_scheduleCallback=function(z,X,J){var dt=d.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?dt+J:dt):J=dt,z){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=J+wt,z={id:g++,callback:X,priorityLevel:z,startTime:J,expirationTime:wt,sortIndex:-1},J>dt?(z.sortIndex=J,t(f,z),i(h)===null&&z===i(f)&&(S?(T(N),N=-1):S=!0,St(k,J-dt))):(z.sortIndex=wt,t(h,z),w||A||(w=!0,B||(B=!0,st()))),z},d.unstable_shouldYield=W,d.unstable_wrapCallback=function(z){var X=b;return function(){var J=b;b=X;try{return z.apply(this,arguments)}finally{b=J}}}})(Qu)),Qu}var nm;function bv(){return nm||(nm=1,Ku.exports=yv()),Ku.exports}var Wu={exports:{}},Ce={};var sm;function vv(){if(sm)return Ce;sm=1;var d=Ch();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:f,implementation:g}}var c=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ce.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ce.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(h,f,null,g)},Ce.flushSync=function(h){var f=c.T,g=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=f,s.p=g,s.d.f()}},Ce.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},Ce.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},Ce.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&s.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ce.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},Ce.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);s.d.L(h,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ce.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},Ce.requestFormReset=function(h){s.d.r(h)},Ce.unstable_batchedUpdates=function(h,f){return h(f)},Ce.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},Ce.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ce.version="19.2.1",Ce}var am;function Av(){if(am)return Wu.exports;am=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),Wu.exports=vv(),Wu.exports}var rm;function Sv(){if(rm)return sr;rm=1;var d=bv(),t=Ch(),i=Av();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function h(e){if(o(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,l=n;;){var p=a.return;if(p===null)break;var m=p.alternate;if(m===null){if(l=p.return,l!==null){a=l;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===a)return h(p),e;if(m===l)return h(p),n;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=p,l=m;else{for(var v=!1,E=p.child;E;){if(E===a){v=!0,a=p,l=m;break}if(E===l){v=!0,l=p,a=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===a){v=!0,a=m,l=p;break}if(E===l){v=!0,l=m,a=p;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function st(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var At=Symbol.for("react.client.reference");function vt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===At?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case x:return"Profiler";case _:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case C:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case D:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return n=e.displayName||null,n!==null?n:vt(e.type)||"Memo";case H:n=e._payload,e=e._init;try{return vt(e(n))}catch{}}return null}var St=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},dt=[],wt=-1;function O(e){return{current:e}}function q(e){0>wt||(e.current=dt[wt],dt[wt]=null,wt--)}function Q(e,n){wt++,dt[wt]=e.current,e.current=n}var tt=O(null),lt=O(null),ht=O(null),ct=O(null);function ee(e,n){switch(Q(ht,n),Q(lt,e),Q(tt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?vg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=vg(n),e=Ag(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(tt),Q(tt,e)}function jt(){q(tt),q(lt),q(ht)}function kn(e){e.memoizedState!==null&&Q(ct,e);var n=tt.current,a=Ag(n,e.type);n!==a&&(Q(lt,e),Q(tt,a))}function nn(e){lt.current===e&&(q(tt),q(lt)),ct.current===e&&(q(ct),Ja._currentValue=J)}var Bn,ua;function Oi(e){if(Bn===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Bn=n&&n[1]||"",ua=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bn+e+ua}var Ml=!1;function Rl(e,n){if(!e||Ml)return"";Ml=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(G){var I=G}Reflect.construct(e,[],$)}else{try{$.call()}catch(G){I=G}e.call($.prototype)}}else{try{throw Error()}catch(G){I=G}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(G){if(G&&I&&typeof G.stack=="string")return[G.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var M=v.split(`
`),U=E.split(`
`);for(p=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(l===M.length||p===U.length)for(l=M.length-1,p=U.length-1;1<=l&&0<=p&&M[l]!==U[p];)p--;for(;1<=l&&0<=p;l--,p--)if(M[l]!==U[p]){if(l!==1||p!==1)do if(l--,p--,0>p||M[l]!==U[p]){var V=`
`+M[l].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=l&&0<=p);break}}}finally{Ml=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Oi(a):""}function Vy(e,n){switch(e.tag){case 26:case 27:case 5:return Oi(e.type);case 16:return Oi("Lazy");case 13:return e.child!==n&&n!==null?Oi("Suspense Fallback"):Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return Rl(e.type,!1);case 11:return Rl(e.type.render,!1);case 1:return Rl(e.type,!0);case 31:return Oi("Activity");default:return""}}function Kh(e){try{var n="",a=null;do n+=Vy(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Dl=Object.prototype.hasOwnProperty,Nl=d.unstable_scheduleCallback,Ol=d.unstable_cancelCallback,Xy=d.unstable_shouldYield,Yy=d.unstable_requestPaint,He=d.unstable_now,$y=d.unstable_getCurrentPriorityLevel,Qh=d.unstable_ImmediatePriority,Wh=d.unstable_UserBlockingPriority,Or=d.unstable_NormalPriority,Ky=d.unstable_LowPriority,Zh=d.unstable_IdlePriority,Qy=d.log,Wy=d.unstable_setDisableYieldValue,ha=null,Ge=null;function sn(e){if(typeof Qy=="function"&&Wy(e),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(ha,e)}catch{}}var qe=Math.clz32?Math.clz32:t0,Zy=Math.log,Jy=Math.LN2;function t0(e){return e>>>=0,e===0?32:31-(Zy(e)/Jy|0)|0}var Lr=256,kr=262144,Br=4194304;function Pn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Pr(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var p=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?p=Pn(l):(v&=E,v!==0?p=Pn(v):a||(a=E&~e,a!==0&&(p=Pn(a))))):(E=l&~m,E!==0?p=Pn(E):v!==0?p=Pn(v):a||(a=l&~e,a!==0&&(p=Pn(a)))),p===0?0:n!==0&&n!==p&&(n&m)===0&&(m=p&-p,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:p}function da(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function e0(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jh(){var e=Br;return Br<<=1,(Br&62914560)===0&&(Br=4194304),e}function Ll(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function fa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function i0(e,n,a,l,p,m){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,M=e.expirationTimes,U=e.hiddenUpdates;for(a=v&~a;0<a;){var V=31-qe(a),$=1<<V;E[V]=0,M[V]=-1;var I=U[V];if(I!==null)for(U[V]=null,V=0;V<I.length;V++){var G=I[V];G!==null&&(G.lane&=-536870913)}a&=~$}l!==0&&td(e,l,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~n))}function td(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-qe(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function ed(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-qe(a),p=1<<l;p&n|e[l]&n&&(e[l]|=n),a&=~p}}function id(e,n){var a=n&-n;return a=(a&42)!==0?1:kl(a),(a&(e.suspendedLanes|n))!==0?0:a}function kl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nd(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:Gg(e.type))}function sd(e,n){var a=X.p;try{return X.p=e,n()}finally{X.p=a}}var an=Math.random().toString(36).slice(2),ye="__reactFiber$"+an,Oe="__reactProps$"+an,cs="__reactContainer$"+an,Pl="__reactEvents$"+an,n0="__reactListeners$"+an,s0="__reactHandles$"+an,ad="__reactResources$"+an,pa="__reactMarker$"+an;function zl(e){delete e[ye],delete e[Oe],delete e[Pl],delete e[n0],delete e[s0]}function us(e){var n=e[ye];if(n)return n;for(var a=e.parentNode;a;){if(n=a[cs]||a[ye]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Tg(e);e!==null;){if(a=e[ye])return a;e=Tg(e)}return n}e=a,a=e.parentNode}return null}function hs(e){if(e=e[ye]||e[cs]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function ga(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function ds(e){var n=e[ad];return n||(n=e[ad]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function de(e){e[pa]=!0}var rd=new Set,od={};function zn(e,n){fs(e,n),fs(e+"Capture",n)}function fs(e,n){for(od[e]=n,e=0;e<n.length;e++)rd.add(n[e])}var a0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ld={},cd={};function r0(e){return Dl.call(cd,e)?!0:Dl.call(ld,e)?!1:a0.test(e)?cd[e]=!0:(ld[e]=!0,!1)}function zr(e,n,a){if(r0(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Fr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Li(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function ei(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ud(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function o0(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,m=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Fl(e){if(!e._valueTracker){var n=ud(e)?"checked":"value";e._valueTracker=o0(e,n,""+e[n])}}function hd(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=ud(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function Ur(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var l0=/[\n"\\]/g;function ii(e){return e.replace(l0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ul(e,n,a,l,p,m,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ei(n)):e.value!==""+ei(n)&&(e.value=""+ei(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?Il(e,v,ei(n)):a!=null?Il(e,v,ei(a)):l!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+ei(E):e.removeAttribute("name")}function dd(e,n,a,l,p,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Fl(e);return}a=a!=null?""+ei(a):"",n=n!=null?""+ei(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}l=l??p,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Fl(e)}function Il(e,n,a){n==="number"&&Ur(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ps(e,n,a,l){if(e=e.options,n){n={};for(var p=0;p<a.length;p++)n["$"+a[p]]=!0;for(a=0;a<e.length;a++)p=n.hasOwnProperty("$"+e[a].value),e[a].selected!==p&&(e[a].selected=p),p&&l&&(e[a].defaultSelected=!0)}else{for(a=""+ei(a),n=null,p=0;p<e.length;p++){if(e[p].value===a){e[p].selected=!0,l&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function fd(e,n,a){if(n!=null&&(n=""+ei(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ei(a):""}function pd(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(s(92));if(St(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=ei(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Fl(e)}function gs(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var c0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gd(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||c0.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function md(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var p in n)l=n[p],n.hasOwnProperty(p)&&a[p]!==l&&gd(e,p,l)}else for(var m in n)n.hasOwnProperty(m)&&gd(e,m,n[m])}function jl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),h0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ir(e){return h0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ki(){}var Hl=null;function Gl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ms=null,ys=null;function yd(e){var n=hs(e);if(n&&(e=n.stateNode)){var a=e[Oe]||null;t:switch(e=n.stateNode,n.type){case"input":if(Ul(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ii(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var p=l[Oe]||null;if(!p)throw Error(s(90));Ul(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&hd(l)}break t;case"textarea":fd(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&ps(e,!!a.multiple,n,!1)}}}var ql=!1;function bd(e,n,a){if(ql)return e(n,a);ql=!0;try{var l=e(n);return l}finally{if(ql=!1,(ms!==null||ys!==null)&&(Mo(),ms&&(n=ms,e=ys,ys=ms=null,yd(n),e)))for(n=0;n<e.length;n++)yd(e[n])}}function ma(e,n){var a=e.stateNode;if(a===null)return null;var l=a[Oe]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vl=!1;if(Bi)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){Vl=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{Vl=!1}var rn=null,Xl=null,jr=null;function vd(){if(jr)return jr;var e,n=Xl,a=n.length,l,p="value"in rn?rn.value:rn.textContent,m=p.length;for(e=0;e<a&&n[e]===p[e];e++);var v=a-e;for(l=1;l<=v&&n[a-l]===p[m-l];l++);return jr=p.slice(e,1<l?1-l:void 0)}function Hr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Gr(){return!0}function Ad(){return!1}function Le(e){function n(a,l,p,m,v){this._reactName=a,this._targetInst=p,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Gr:Ad,this.isPropagationStopped=Ad,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){},isPersistent:Gr}),n}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qr=Le(Fn),ba=y({},Fn,{view:0,detail:0}),d0=Le(ba),Yl,$l,va,Vr=y({},ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==va&&(va&&e.type==="mousemove"?(Yl=e.screenX-va.screenX,$l=e.screenY-va.screenY):$l=Yl=0,va=e),Yl)},movementY:function(e){return"movementY"in e?e.movementY:$l}}),Sd=Le(Vr),f0=y({},Vr,{dataTransfer:0}),p0=Le(f0),g0=y({},ba,{relatedTarget:0}),Kl=Le(g0),m0=y({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),y0=Le(m0),b0=y({},Fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),v0=Le(b0),A0=y({},Fn,{data:0}),wd=Le(A0),S0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=x0[e])?!!n[e]:!1}function Ql(){return _0}var E0=y({},ba,{key:function(e){if(e.key){var n=S0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Hr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?w0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(e){return e.type==="keypress"?Hr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),C0=Le(E0),T0=y({},Vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xd=Le(T0),M0=y({},ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),R0=Le(M0),D0=y({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),N0=Le(D0),O0=y({},Vr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),L0=Le(O0),k0=y({},Fn,{newState:0,oldState:0}),B0=Le(k0),P0=[9,13,27,32],Wl=Bi&&"CompositionEvent"in window,Aa=null;Bi&&"documentMode"in document&&(Aa=document.documentMode);var z0=Bi&&"TextEvent"in window&&!Aa,_d=Bi&&(!Wl||Aa&&8<Aa&&11>=Aa),Ed=" ",Cd=!1;function Td(e,n){switch(e){case"keyup":return P0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Md(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function F0(e,n){switch(e){case"compositionend":return Md(n);case"keypress":return n.which!==32?null:(Cd=!0,Ed);case"textInput":return e=n.data,e===Ed&&Cd?null:e;default:return null}}function U0(e,n){if(bs)return e==="compositionend"||!Wl&&Td(e,n)?(e=vd(),jr=Xl=rn=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _d&&n.locale!=="ko"?null:n.data;default:return null}}var I0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!I0[e.type]:n==="textarea"}function Dd(e,n,a,l){ms?ys?ys.push(l):ys=[l]:ms=l,n=Bo(n,"onChange"),0<n.length&&(a=new qr("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var Sa=null,wa=null;function j0(e){fg(e,0)}function Xr(e){var n=ga(e);if(hd(n))return e}function Nd(e,n){if(e==="change")return n}var Od=!1;if(Bi){var Zl;if(Bi){var Jl="oninput"in document;if(!Jl){var Ld=document.createElement("div");Ld.setAttribute("oninput","return;"),Jl=typeof Ld.oninput=="function"}Zl=Jl}else Zl=!1;Od=Zl&&(!document.documentMode||9<document.documentMode)}function kd(){Sa&&(Sa.detachEvent("onpropertychange",Bd),wa=Sa=null)}function Bd(e){if(e.propertyName==="value"&&Xr(wa)){var n=[];Dd(n,wa,e,Gl(e)),bd(j0,n)}}function H0(e,n,a){e==="focusin"?(kd(),Sa=n,wa=a,Sa.attachEvent("onpropertychange",Bd)):e==="focusout"&&kd()}function G0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xr(wa)}function q0(e,n){if(e==="click")return Xr(n)}function V0(e,n){if(e==="input"||e==="change")return Xr(n)}function X0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ve=typeof Object.is=="function"?Object.is:X0;function xa(e,n){if(Ve(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var p=a[l];if(!Dl.call(n,p)||!Ve(e[p],n[p]))return!1}return!0}function Pd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zd(e,n){var a=Pd(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Pd(a)}}function Fd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Fd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Ud(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ur(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Ur(e.document)}return n}function tc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Y0=Bi&&"documentMode"in document&&11>=document.documentMode,vs=null,ec=null,_a=null,ic=!1;function Id(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ic||vs==null||vs!==Ur(l)||(l=vs,"selectionStart"in l&&tc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),_a&&xa(_a,l)||(_a=l,l=Bo(ec,"onSelect"),0<l.length&&(n=new qr("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=vs)))}function Un(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var As={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionrun:Un("Transition","TransitionRun"),transitionstart:Un("Transition","TransitionStart"),transitioncancel:Un("Transition","TransitionCancel"),transitionend:Un("Transition","TransitionEnd")},nc={},jd={};Bi&&(jd=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function In(e){if(nc[e])return nc[e];if(!As[e])return e;var n=As[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in jd)return nc[e]=n[a];return e}var Hd=In("animationend"),Gd=In("animationiteration"),qd=In("animationstart"),$0=In("transitionrun"),K0=In("transitionstart"),Q0=In("transitioncancel"),Vd=In("transitionend"),Xd=new Map,sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sc.push("scrollEnd");function mi(e,n){Xd.set(e,n),zn(n,[e])}var Yr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ni=[],Ss=0,ac=0;function $r(){for(var e=Ss,n=ac=Ss=0;n<e;){var a=ni[n];ni[n++]=null;var l=ni[n];ni[n++]=null;var p=ni[n];ni[n++]=null;var m=ni[n];if(ni[n++]=null,l!==null&&p!==null){var v=l.pending;v===null?p.next=p:(p.next=v.next,v.next=p),l.pending=p}m!==0&&Yd(a,p,m)}}function Kr(e,n,a,l){ni[Ss++]=e,ni[Ss++]=n,ni[Ss++]=a,ni[Ss++]=l,ac|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function rc(e,n,a,l){return Kr(e,n,a,l),Qr(e)}function jn(e,n){return Kr(e,null,null,n),Qr(e)}function Yd(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var p=!1,m=e.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&n!==null&&(p=31-qe(a),e=m.hiddenUpdates,l=e[p],l===null?e[p]=[n]:l.push(n),n.lane=a|536870912),m):null}function Qr(e){if(50<Xa)throw Xa=0,gu=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ws={};function W0(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(e,n,a,l){return new W0(e,n,a,l)}function oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pi(e,n){var a=e.alternate;return a===null?(a=Xe(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function $d(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Wr(e,n,a,l,p,m){var v=0;if(l=e,typeof e=="function")oc(e)&&(v=1);else if(typeof e=="string")v=iv(e,a,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case K:return e=Xe(31,a,n,p),e.elementType=K,e.lanes=m,e;case S:return Hn(a.children,p,m,n);case _:v=8,p|=24;break;case x:return e=Xe(12,a,n,p|2),e.elementType=x,e.lanes=m,e;case k:return e=Xe(13,a,n,p),e.elementType=k,e.lanes=m,e;case B:return e=Xe(19,a,n,p),e.elementType=B,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break t;case T:v=9;break t;case D:v=11;break t;case N:v=14;break t;case H:v=16,l=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=Xe(v,a,n,p),n.elementType=e,n.type=l,n.lanes=m,n}function Hn(e,n,a,l){return e=Xe(7,e,l,n),e.lanes=a,e}function lc(e,n,a){return e=Xe(6,e,null,n),e.lanes=a,e}function Kd(e){var n=Xe(18,null,null,0);return n.stateNode=e,n}function cc(e,n,a){return n=Xe(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Qd=new WeakMap;function si(e,n){if(typeof e=="object"&&e!==null){var a=Qd.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Kh(n)},Qd.set(e,n),n)}return{value:e,source:n,stack:Kh(n)}}var xs=[],_s=0,Zr=null,Ea=0,ai=[],ri=0,on=null,Ai=1,Si="";function zi(e,n){xs[_s++]=Ea,xs[_s++]=Zr,Zr=e,Ea=n}function Wd(e,n,a){ai[ri++]=Ai,ai[ri++]=Si,ai[ri++]=on,on=e;var l=Ai;e=Si;var p=32-qe(l)-1;l&=~(1<<p),a+=1;var m=32-qe(n)+p;if(30<m){var v=p-p%5;m=(l&(1<<v)-1).toString(32),l>>=v,p-=v,Ai=1<<32-qe(n)+p|a<<p|l,Si=m+e}else Ai=1<<m|a<<p|l,Si=e}function uc(e){e.return!==null&&(zi(e,1),Wd(e,1,0))}function hc(e){for(;e===Zr;)Zr=xs[--_s],xs[_s]=null,Ea=xs[--_s],xs[_s]=null;for(;e===on;)on=ai[--ri],ai[ri]=null,Si=ai[--ri],ai[ri]=null,Ai=ai[--ri],ai[ri]=null}function Zd(e,n){ai[ri++]=Ai,ai[ri++]=Si,ai[ri++]=on,Ai=n.id,Si=n.overflow,on=e}var be=null,qt=null,Tt=!1,ln=null,oi=!1,dc=Error(s(519));function cn(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ca(si(n,e)),dc}function Jd(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[ye]=e,n[Oe]=l,a){case"dialog":_t("cancel",n),_t("close",n);break;case"iframe":case"object":case"embed":_t("load",n);break;case"video":case"audio":for(a=0;a<$a.length;a++)_t($a[a],n);break;case"source":_t("error",n);break;case"img":case"image":case"link":_t("error",n),_t("load",n);break;case"details":_t("toggle",n);break;case"input":_t("invalid",n),dd(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":_t("invalid",n);break;case"textarea":_t("invalid",n),pd(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||yg(n.textContent,a)?(l.popover!=null&&(_t("beforetoggle",n),_t("toggle",n)),l.onScroll!=null&&_t("scroll",n),l.onScrollEnd!=null&&_t("scrollend",n),l.onClick!=null&&(n.onclick=ki),n=!0):n=!1,n||cn(e,!0)}function tf(e){for(be=e.return;be;)switch(be.tag){case 5:case 31:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:be=be.return}}function Es(e){if(e!==be)return!1;if(!Tt)return tf(e),Tt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Du(e.type,e.memoizedProps)),a=!a),a&&qt&&cn(e),tf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qt=Cg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qt=Cg(e)}else n===27?(n=qt,xn(e.type)?(e=Bu,Bu=null,qt=e):qt=n):qt=be?ci(e.stateNode.nextSibling):null;return!0}function Gn(){qt=be=null,Tt=!1}function fc(){var e=ln;return e!==null&&(ze===null?ze=e:ze.push.apply(ze,e),ln=null),e}function Ca(e){ln===null?ln=[e]:ln.push(e)}var pc=O(null),qn=null,Fi=null;function un(e,n,a){Q(pc,n._currentValue),n._currentValue=a}function Ui(e){e._currentValue=pc.current,q(pc)}function gc(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function mc(e,n,a,l){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var v=p.child;m=m.firstContext;t:for(;m!==null;){var E=m;m=p;for(var M=0;M<n.length;M++)if(E.context===n[M]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),gc(m.return,a,e),l||(v=null);break t}m=E.next}}else if(p.tag===18){if(v=p.return,v===null)throw Error(s(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),gc(v,a,e),v=null}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===e){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}}function Cs(e,n,a,l){e=null;for(var p=n,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var v=p.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=p.type;Ve(p.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(p===ct.current){if(v=p.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Ja):e=[Ja])}p=p.return}e!==null&&mc(n,e,a,l),n.flags|=262144}function Jr(e){for(e=e.firstContext;e!==null;){if(!Ve(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vn(e){qn=e,Fi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ve(e){return ef(qn,e)}function to(e,n){return qn===null&&Vn(e),ef(e,n)}function ef(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Fi===null){if(e===null)throw Error(s(308));Fi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Fi=Fi.next=n;return a}var Z0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},J0=d.unstable_scheduleCallback,tb=d.unstable_NormalPriority,ae={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yc(){return{controller:new Z0,data:new Map,refCount:0}}function Ta(e){e.refCount--,e.refCount===0&&J0(tb,function(){e.controller.abort()})}var Ma=null,bc=0,Ts=0,Ms=null;function eb(e,n){if(Ma===null){var a=Ma=[];bc=0,Ts=Su(),Ms={status:"pending",value:void 0,then:function(l){a.push(l)}}}return bc++,n.then(nf,nf),n}function nf(){if(--bc===0&&Ma!==null){Ms!==null&&(Ms.status="fulfilled");var e=Ma;Ma=null,Ts=0,Ms=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function ib(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var p=0;p<a.length;p++)(0,a[p])(n)},function(p){for(l.status="rejected",l.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),l}var sf=z.S;z.S=function(e,n){jp=He(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&eb(e,n),sf!==null&&sf(e,n)};var Xn=O(null);function vc(){var e=Xn.current;return e!==null?e:Ht.pooledCache}function eo(e,n){n===null?Q(Xn,Xn.current):Q(Xn,n.pool)}function af(){var e=vc();return e===null?null:{parent:ae._currentValue,pool:e}}var Rs=Error(s(460)),Ac=Error(s(474)),io=Error(s(542)),no={then:function(){}};function rf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function of(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(ki,ki),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cf(e),e;default:if(typeof n.status=="string")n.then(ki,ki);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=l}},function(l){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cf(e),e}throw $n=n,Rs}}function Yn(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($n=a,Rs):a}}var $n=null;function lf(){if($n===null)throw Error(s(459));var e=$n;return $n=null,e}function cf(e){if(e===Rs||e===io)throw Error(s(483))}var Ds=null,Ra=0;function so(e){var n=Ra;return Ra+=1,Ds===null&&(Ds=[]),of(Ds,e,n)}function Da(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function ao(e,n){throw n.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function uf(e){function n(P,L){if(e){var F=P.deletions;F===null?(P.deletions=[L],P.flags|=16):F.push(L)}}function a(P,L){if(!e)return null;for(;L!==null;)n(P,L),L=L.sibling;return null}function l(P){for(var L=new Map;P!==null;)P.key!==null?L.set(P.key,P):L.set(P.index,P),P=P.sibling;return L}function p(P,L){return P=Pi(P,L),P.index=0,P.sibling=null,P}function m(P,L,F){return P.index=F,e?(F=P.alternate,F!==null?(F=F.index,F<L?(P.flags|=67108866,L):F):(P.flags|=67108866,L)):(P.flags|=1048576,L)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function E(P,L,F,Y){return L===null||L.tag!==6?(L=lc(F,P.mode,Y),L.return=P,L):(L=p(L,F),L.return=P,L)}function M(P,L,F,Y){var rt=F.type;return rt===S?V(P,L,F.props.children,Y,F.key):L!==null&&(L.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===H&&Yn(rt)===L.type)?(L=p(L,F.props),Da(L,F),L.return=P,L):(L=Wr(F.type,F.key,F.props,null,P.mode,Y),Da(L,F),L.return=P,L)}function U(P,L,F,Y){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=cc(F,P.mode,Y),L.return=P,L):(L=p(L,F.children||[]),L.return=P,L)}function V(P,L,F,Y,rt){return L===null||L.tag!==7?(L=Hn(F,P.mode,Y,rt),L.return=P,L):(L=p(L,F),L.return=P,L)}function $(P,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=lc(""+L,P.mode,F),L.return=P,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return F=Wr(L.type,L.key,L.props,null,P.mode,F),Da(F,L),F.return=P,F;case w:return L=cc(L,P.mode,F),L.return=P,L;case H:return L=Yn(L),$(P,L,F)}if(St(L)||st(L))return L=Hn(L,P.mode,F,null),L.return=P,L;if(typeof L.then=="function")return $(P,so(L),F);if(L.$$typeof===C)return $(P,to(P,L),F);ao(P,L)}return null}function I(P,L,F,Y){var rt=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return rt!==null?null:E(P,L,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===rt?M(P,L,F,Y):null;case w:return F.key===rt?U(P,L,F,Y):null;case H:return F=Yn(F),I(P,L,F,Y)}if(St(F)||st(F))return rt!==null?null:V(P,L,F,Y,null);if(typeof F.then=="function")return I(P,L,so(F),Y);if(F.$$typeof===C)return I(P,L,to(P,F),Y);ao(P,F)}return null}function G(P,L,F,Y,rt){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return P=P.get(F)||null,E(L,P,""+Y,rt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return P=P.get(Y.key===null?F:Y.key)||null,M(L,P,Y,rt);case w:return P=P.get(Y.key===null?F:Y.key)||null,U(L,P,Y,rt);case H:return Y=Yn(Y),G(P,L,F,Y,rt)}if(St(Y)||st(Y))return P=P.get(F)||null,V(L,P,Y,rt,null);if(typeof Y.then=="function")return G(P,L,F,so(Y),rt);if(Y.$$typeof===C)return G(P,L,F,to(L,Y),rt);ao(L,Y)}return null}function it(P,L,F,Y){for(var rt=null,Dt=null,at=L,bt=L=0,Ct=null;at!==null&&bt<F.length;bt++){at.index>bt?(Ct=at,at=null):Ct=at.sibling;var Nt=I(P,at,F[bt],Y);if(Nt===null){at===null&&(at=Ct);break}e&&at&&Nt.alternate===null&&n(P,at),L=m(Nt,L,bt),Dt===null?rt=Nt:Dt.sibling=Nt,Dt=Nt,at=Ct}if(bt===F.length)return a(P,at),Tt&&zi(P,bt),rt;if(at===null){for(;bt<F.length;bt++)at=$(P,F[bt],Y),at!==null&&(L=m(at,L,bt),Dt===null?rt=at:Dt.sibling=at,Dt=at);return Tt&&zi(P,bt),rt}for(at=l(at);bt<F.length;bt++)Ct=G(at,P,bt,F[bt],Y),Ct!==null&&(e&&Ct.alternate!==null&&at.delete(Ct.key===null?bt:Ct.key),L=m(Ct,L,bt),Dt===null?rt=Ct:Dt.sibling=Ct,Dt=Ct);return e&&at.forEach(function(Mn){return n(P,Mn)}),Tt&&zi(P,bt),rt}function ut(P,L,F,Y){if(F==null)throw Error(s(151));for(var rt=null,Dt=null,at=L,bt=L=0,Ct=null,Nt=F.next();at!==null&&!Nt.done;bt++,Nt=F.next()){at.index>bt?(Ct=at,at=null):Ct=at.sibling;var Mn=I(P,at,Nt.value,Y);if(Mn===null){at===null&&(at=Ct);break}e&&at&&Mn.alternate===null&&n(P,at),L=m(Mn,L,bt),Dt===null?rt=Mn:Dt.sibling=Mn,Dt=Mn,at=Ct}if(Nt.done)return a(P,at),Tt&&zi(P,bt),rt;if(at===null){for(;!Nt.done;bt++,Nt=F.next())Nt=$(P,Nt.value,Y),Nt!==null&&(L=m(Nt,L,bt),Dt===null?rt=Nt:Dt.sibling=Nt,Dt=Nt);return Tt&&zi(P,bt),rt}for(at=l(at);!Nt.done;bt++,Nt=F.next())Nt=G(at,P,bt,Nt.value,Y),Nt!==null&&(e&&Nt.alternate!==null&&at.delete(Nt.key===null?bt:Nt.key),L=m(Nt,L,bt),Dt===null?rt=Nt:Dt.sibling=Nt,Dt=Nt);return e&&at.forEach(function(fv){return n(P,fv)}),Tt&&zi(P,bt),rt}function Ut(P,L,F,Y){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var rt=F.key;L!==null;){if(L.key===rt){if(rt=F.type,rt===S){if(L.tag===7){a(P,L.sibling),Y=p(L,F.props.children),Y.return=P,P=Y;break t}}else if(L.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===H&&Yn(rt)===L.type){a(P,L.sibling),Y=p(L,F.props),Da(Y,F),Y.return=P,P=Y;break t}a(P,L);break}else n(P,L);L=L.sibling}F.type===S?(Y=Hn(F.props.children,P.mode,Y,F.key),Y.return=P,P=Y):(Y=Wr(F.type,F.key,F.props,null,P.mode,Y),Da(Y,F),Y.return=P,P=Y)}return v(P);case w:t:{for(rt=F.key;L!==null;){if(L.key===rt)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(P,L.sibling),Y=p(L,F.children||[]),Y.return=P,P=Y;break t}else{a(P,L);break}else n(P,L);L=L.sibling}Y=cc(F,P.mode,Y),Y.return=P,P=Y}return v(P);case H:return F=Yn(F),Ut(P,L,F,Y)}if(St(F))return it(P,L,F,Y);if(st(F)){if(rt=st(F),typeof rt!="function")throw Error(s(150));return F=rt.call(F),ut(P,L,F,Y)}if(typeof F.then=="function")return Ut(P,L,so(F),Y);if(F.$$typeof===C)return Ut(P,L,to(P,F),Y);ao(P,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(a(P,L.sibling),Y=p(L,F),Y.return=P,P=Y):(a(P,L),Y=lc(F,P.mode,Y),Y.return=P,P=Y),v(P)):a(P,L)}return function(P,L,F,Y){try{Ra=0;var rt=Ut(P,L,F,Y);return Ds=null,rt}catch(at){if(at===Rs||at===io)throw at;var Dt=Xe(29,at,null,P.mode);return Dt.lanes=Y,Dt.return=P,Dt}finally{}}}var Kn=uf(!0),hf=uf(!1),hn=!1;function Sc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function dn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function fn(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ot&2)!==0){var p=l.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),l.pending=n,n=Qr(e),Yd(e,null,a),n}return Kr(e,l,n,a),Qr(e)}function Na(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,ed(e,a)}}function xc(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var p=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?p=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?p=m=n:m=m.next=n}else p=m=n;a={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var _c=!1;function Oa(){if(_c){var e=Ms;if(e!==null)throw e}}function La(e,n,a,l){_c=!1;var p=e.updateQueue;hn=!1;var m=p.firstBaseUpdate,v=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var M=E,U=M.next;M.next=null,v===null?m=U:v.next=U,v=M;var V=e.alternate;V!==null&&(V=V.updateQueue,E=V.lastBaseUpdate,E!==v&&(E===null?V.firstBaseUpdate=U:E.next=U,V.lastBaseUpdate=M))}if(m!==null){var $=p.baseState;v=0,V=U=M=null,E=m;do{var I=E.lane&-536870913,G=I!==E.lane;if(G?(Et&I)===I:(l&I)===I){I!==0&&I===Ts&&(_c=!0),V!==null&&(V=V.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var it=e,ut=E;I=n;var Ut=a;switch(ut.tag){case 1:if(it=ut.payload,typeof it=="function"){$=it.call(Ut,$,I);break t}$=it;break t;case 3:it.flags=it.flags&-65537|128;case 0:if(it=ut.payload,I=typeof it=="function"?it.call(Ut,$,I):it,I==null)break t;$=y({},$,I);break t;case 2:hn=!0}}I=E.callback,I!==null&&(e.flags|=64,G&&(e.flags|=8192),G=p.callbacks,G===null?p.callbacks=[I]:G.push(I))}else G={lane:I,tag:E.tag,payload:E.payload,callback:E.callback,next:null},V===null?(U=V=G,M=$):V=V.next=G,v|=I;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;G=E,E=G.next,G.next=null,p.lastBaseUpdate=G,p.shared.pending=null}}while(!0);V===null&&(M=$),p.baseState=M,p.firstBaseUpdate=U,p.lastBaseUpdate=V,m===null&&(p.shared.lanes=0),bn|=v,e.lanes=v,e.memoizedState=$}}function df(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function ff(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)df(a[e],n)}var Ns=O(null),ro=O(0);function pf(e,n){e=$i,Q(ro,e),Q(Ns,n),$i=e|n.baseLanes}function Ec(){Q(ro,$i),Q(Ns,Ns.current)}function Cc(){$i=ro.current,q(Ns),q(ro)}var Ye=O(null),li=null;function pn(e){var n=e.alternate;Q(ie,ie.current&1),Q(Ye,e),li===null&&(n===null||Ns.current!==null||n.memoizedState!==null)&&(li=e)}function Tc(e){Q(ie,ie.current),Q(Ye,e),li===null&&(li=e)}function gf(e){e.tag===22?(Q(ie,ie.current),Q(Ye,e),li===null&&(li=e)):gn()}function gn(){Q(ie,ie.current),Q(Ye,Ye.current)}function $e(e){q(Ye),li===e&&(li=null),q(ie)}var ie=O(0);function oo(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Lu(a)||ku(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ii=0,yt=null,zt=null,re=null,lo=!1,Os=!1,Qn=!1,co=0,ka=0,Ls=null,nb=0;function Zt(){throw Error(s(321))}function Mc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Ve(e[a],n[a]))return!1;return!0}function Rc(e,n,a,l,p,m){return Ii=m,yt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,z.H=e===null||e.memoizedState===null?Zf:qc,Qn=!1,m=a(l,p),Qn=!1,Os&&(m=yf(n,a,l,p)),mf(e),m}function mf(e){z.H=za;var n=zt!==null&&zt.next!==null;if(Ii=0,re=zt=yt=null,lo=!1,ka=0,Ls=null,n)throw Error(s(300));e===null||oe||(e=e.dependencies,e!==null&&Jr(e)&&(oe=!0))}function yf(e,n,a,l){yt=e;var p=0;do{if(Os&&(Ls=null),ka=0,Os=!1,25<=p)throw Error(s(301));if(p+=1,re=zt=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}z.H=Jf,m=n(a,l)}while(Os);return m}function sb(){var e=z.H,n=e.useState()[0];return n=typeof n.then=="function"?Ba(n):n,e=e.useState()[0],(zt!==null?zt.memoizedState:null)!==e&&(yt.flags|=1024),n}function Dc(){var e=co!==0;return co=0,e}function Nc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Oc(e){if(lo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}lo=!1}Ii=0,re=zt=yt=null,Os=!1,ka=co=0,Ls=null}function Te(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?yt.memoizedState=re=e:re=re.next=e,re}function ne(){if(zt===null){var e=yt.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var n=re===null?yt.memoizedState:re.next;if(n!==null)re=n,zt=e;else{if(e===null)throw yt.alternate===null?Error(s(467)):Error(s(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},re===null?yt.memoizedState=re=e:re=re.next=e}return re}function uo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ba(e){var n=ka;return ka+=1,Ls===null&&(Ls=[]),e=of(Ls,e,n),n=yt,(re===null?n.memoizedState:re.next)===null&&(n=n.alternate,z.H=n===null||n.memoizedState===null?Zf:qc),e}function ho(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ba(e);if(e.$$typeof===C)return ve(e)}throw Error(s(438,String(e)))}function Lc(e){var n=null,a=yt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=yt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=uo(),yt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=W;return n.index++,a}function ji(e,n){return typeof n=="function"?n(e):n}function fo(e){var n=ne();return kc(n,zt,e)}function kc(e,n,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var p=e.baseQueue,m=l.pending;if(m!==null){if(p!==null){var v=p.next;p.next=m.next,m.next=v}n.baseQueue=p=m,l.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{n=p.next;var E=v=null,M=null,U=n,V=!1;do{var $=U.lane&-536870913;if($!==U.lane?(Et&$)===$:(Ii&$)===$){var I=U.revertLane;if(I===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),$===Ts&&(V=!0);else if((Ii&I)===I){U=U.next,I===Ts&&(V=!0);continue}else $={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(E=M=$,v=m):M=M.next=$,yt.lanes|=I,bn|=I;$=U.action,Qn&&a(m,$),m=U.hasEagerState?U.eagerState:a(m,$)}else I={lane:$,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(E=M=I,v=m):M=M.next=I,yt.lanes|=$,bn|=$;U=U.next}while(U!==null&&U!==n);if(M===null?v=m:M.next=E,!Ve(m,e.memoizedState)&&(oe=!0,V&&(a=Ms,a!==null)))throw a;e.memoizedState=m,e.baseState=v,e.baseQueue=M,l.lastRenderedState=m}return p===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Bc(e){var n=ne(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,p=a.pending,m=n.memoizedState;if(p!==null){a.pending=null;var v=p=p.next;do m=e(m,v.action),v=v.next;while(v!==p);Ve(m,n.memoizedState)||(oe=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function bf(e,n,a){var l=yt,p=ne(),m=Tt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!Ve((zt||p).memoizedState,a);if(v&&(p.memoizedState=a,oe=!0),p=p.queue,Fc(Sf.bind(null,l,p,e),[e]),p.getSnapshot!==n||v||re!==null&&re.memoizedState.tag&1){if(l.flags|=2048,ks(9,{destroy:void 0},Af.bind(null,l,p,a,n),null),Ht===null)throw Error(s(349));m||(Ii&127)!==0||vf(l,n,a)}return a}function vf(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=yt.updateQueue,n===null?(n=uo(),yt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Af(e,n,a,l){n.value=a,n.getSnapshot=l,wf(n)&&xf(e)}function Sf(e,n,a){return a(function(){wf(n)&&xf(e)})}function wf(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Ve(e,a)}catch{return!0}}function xf(e){var n=jn(e,2);n!==null&&Fe(n,e,2)}function Pc(e){var n=Te();if(typeof e=="function"){var a=e;if(e=a(),Qn){sn(!0);try{a()}finally{sn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:e},n}function _f(e,n,a,l){return e.baseState=a,kc(e,zt,typeof l=="function"?l:ji)}function ab(e,n,a,l,p){if(mo(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};z.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Ef(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Ef(e,n){var a=n.action,l=n.payload,p=e.state;if(n.isTransition){var m=z.T,v={};z.T=v;try{var E=a(p,l),M=z.S;M!==null&&M(v,E),Cf(e,n,E)}catch(U){zc(e,n,U)}finally{m!==null&&v.types!==null&&(m.types=v.types),z.T=m}}else try{m=a(p,l),Cf(e,n,m)}catch(U){zc(e,n,U)}}function Cf(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Tf(e,n,l)},function(l){return zc(e,n,l)}):Tf(e,n,a)}function Tf(e,n,a){n.status="fulfilled",n.value=a,Mf(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Ef(e,a)))}function zc(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Mf(n),n=n.next;while(n!==l)}e.action=null}function Mf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Rf(e,n){return n}function Df(e,n){if(Tt){var a=Ht.formState;if(a!==null){t:{var l=yt;if(Tt){if(qt){e:{for(var p=qt,m=oi;p.nodeType!==8;){if(!m){p=null;break e}if(p=ci(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){qt=ci(p.nextSibling),l=p.data==="F!";break t}}cn(l)}l=!1}l&&(n=a[0])}}return a=Te(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rf,lastRenderedState:n},a.queue=l,a=Kf.bind(null,yt,l),l.dispatch=a,l=Pc(!1),m=Gc.bind(null,yt,!1,l.queue),l=Te(),p={state:n,dispatch:null,action:e,pending:null},l.queue=p,a=ab.bind(null,yt,p,m,a),p.dispatch=a,l.memoizedState=e,[n,a,!1]}function Nf(e){var n=ne();return Of(n,zt,e)}function Of(e,n,a){if(n=kc(e,n,Rf)[0],e=fo(ji)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Ba(n)}catch(v){throw v===Rs?io:v}else l=n;n=ne();var p=n.queue,m=p.dispatch;return a!==n.memoizedState&&(yt.flags|=2048,ks(9,{destroy:void 0},rb.bind(null,p,a),null)),[l,m,e]}function rb(e,n){e.action=n}function Lf(e){var n=ne(),a=zt;if(a!==null)return Of(n,a,e);ne(),n=n.memoizedState,a=ne();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function ks(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=yt.updateQueue,n===null&&(n=uo(),yt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function kf(){return ne().memoizedState}function po(e,n,a,l){var p=Te();yt.flags|=e,p.memoizedState=ks(1|n,{destroy:void 0},a,l===void 0?null:l)}function go(e,n,a,l){var p=ne();l=l===void 0?null:l;var m=p.memoizedState.inst;zt!==null&&l!==null&&Mc(l,zt.memoizedState.deps)?p.memoizedState=ks(n,m,a,l):(yt.flags|=e,p.memoizedState=ks(1|n,m,a,l))}function Bf(e,n){po(8390656,8,e,n)}function Fc(e,n){go(2048,8,e,n)}function ob(e){yt.flags|=4;var n=yt.updateQueue;if(n===null)n=uo(),yt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Pf(e){var n=ne().memoizedState;return ob({ref:n,nextImpl:e}),function(){if((Ot&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function zf(e,n){return go(4,2,e,n)}function Ff(e,n){return go(4,4,e,n)}function Uf(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function If(e,n,a){a=a!=null?a.concat([e]):null,go(4,4,Uf.bind(null,n,e),a)}function Uc(){}function jf(e,n){var a=ne();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Mc(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function Hf(e,n){var a=ne();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Mc(n,l[1]))return l[0];if(l=e(),Qn){sn(!0);try{e()}finally{sn(!1)}}return a.memoizedState=[l,n],l}function Ic(e,n,a){return a===void 0||(Ii&1073741824)!==0&&(Et&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Gp(),yt.lanes|=e,bn|=e,a)}function Gf(e,n,a,l){return Ve(a,n)?a:Ns.current!==null?(e=Ic(e,a,l),Ve(e,n)||(oe=!0),e):(Ii&42)===0||(Ii&1073741824)!==0&&(Et&261930)===0?(oe=!0,e.memoizedState=a):(e=Gp(),yt.lanes|=e,bn|=e,n)}function qf(e,n,a,l,p){var m=X.p;X.p=m!==0&&8>m?m:8;var v=z.T,E={};z.T=E,Gc(e,!1,n,a);try{var M=p(),U=z.S;if(U!==null&&U(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var V=ib(M,l);Pa(e,n,V,We(e))}else Pa(e,n,l,We(e))}catch($){Pa(e,n,{then:function(){},status:"rejected",reason:$},We())}finally{X.p=m,v!==null&&E.types!==null&&(v.types=E.types),z.T=v}}function lb(){}function jc(e,n,a,l){if(e.tag!==5)throw Error(s(476));var p=Vf(e).queue;qf(e,p,n,J,a===null?lb:function(){return Xf(e),a(l)})}function Vf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:J},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Xf(e){var n=Vf(e);n.next===null&&(n=e.alternate.memoizedState),Pa(e,n.next.queue,{},We())}function Hc(){return ve(Ja)}function Yf(){return ne().memoizedState}function $f(){return ne().memoizedState}function cb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=We();e=dn(a);var l=fn(n,e,a);l!==null&&(Fe(l,n,a),Na(l,n,a)),n={cache:yc()},e.payload=n;return}n=n.return}}function ub(e,n,a){var l=We();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},mo(e)?Qf(n,a):(a=rc(e,n,a,l),a!==null&&(Fe(a,e,l),Wf(a,n,l)))}function Kf(e,n,a){var l=We();Pa(e,n,a,l)}function Pa(e,n,a,l){var p={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(mo(e))Qf(n,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,E=m(v,a);if(p.hasEagerState=!0,p.eagerState=E,Ve(E,v))return Kr(e,n,p,0),Ht===null&&$r(),!1}catch{}finally{}if(a=rc(e,n,p,l),a!==null)return Fe(a,e,l),Wf(a,n,l),!0}return!1}function Gc(e,n,a,l){if(l={lane:2,revertLane:Su(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},mo(e)){if(n)throw Error(s(479))}else n=rc(e,a,l,2),n!==null&&Fe(n,e,2)}function mo(e){var n=e.alternate;return e===yt||n!==null&&n===yt}function Qf(e,n){Os=lo=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Wf(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,ed(e,a)}}var za={readContext:ve,use:ho,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};za.useEffectEvent=Zt;var Zf={readContext:ve,use:ho,useCallback:function(e,n){return Te().memoizedState=[e,n===void 0?null:n],e},useContext:ve,useEffect:Bf,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,po(4194308,4,Uf.bind(null,n,e),a)},useLayoutEffect:function(e,n){return po(4194308,4,e,n)},useInsertionEffect:function(e,n){po(4,2,e,n)},useMemo:function(e,n){var a=Te();n=n===void 0?null:n;var l=e();if(Qn){sn(!0);try{e()}finally{sn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=Te();if(a!==void 0){var p=a(n);if(Qn){sn(!0);try{a(n)}finally{sn(!1)}}}else p=n;return l.memoizedState=l.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},l.queue=e,e=e.dispatch=ub.bind(null,yt,e),[l.memoizedState,e]},useRef:function(e){var n=Te();return e={current:e},n.memoizedState=e},useState:function(e){e=Pc(e);var n=e.queue,a=Kf.bind(null,yt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Uc,useDeferredValue:function(e,n){var a=Te();return Ic(a,e,n)},useTransition:function(){var e=Pc(!1);return e=qf.bind(null,yt,e.queue,!0,!1),Te().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=yt,p=Te();if(Tt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),Ht===null)throw Error(s(349));(Et&127)!==0||vf(l,n,a)}p.memoizedState=a;var m={value:a,getSnapshot:n};return p.queue=m,Bf(Sf.bind(null,l,m,e),[e]),l.flags|=2048,ks(9,{destroy:void 0},Af.bind(null,l,m,a,n),null),a},useId:function(){var e=Te(),n=Ht.identifierPrefix;if(Tt){var a=Si,l=Ai;a=(l&~(1<<32-qe(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=co++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=nb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Hc,useFormState:Df,useActionState:Df,useOptimistic:function(e){var n=Te();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Gc.bind(null,yt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Lc,useCacheRefresh:function(){return Te().memoizedState=cb.bind(null,yt)},useEffectEvent:function(e){var n=Te(),a={impl:e};return n.memoizedState=a,function(){if((Ot&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},qc={readContext:ve,use:ho,useCallback:jf,useContext:ve,useEffect:Fc,useImperativeHandle:If,useInsertionEffect:zf,useLayoutEffect:Ff,useMemo:Hf,useReducer:fo,useRef:kf,useState:function(){return fo(ji)},useDebugValue:Uc,useDeferredValue:function(e,n){var a=ne();return Gf(a,zt.memoizedState,e,n)},useTransition:function(){var e=fo(ji)[0],n=ne().memoizedState;return[typeof e=="boolean"?e:Ba(e),n]},useSyncExternalStore:bf,useId:Yf,useHostTransitionStatus:Hc,useFormState:Nf,useActionState:Nf,useOptimistic:function(e,n){var a=ne();return _f(a,zt,e,n)},useMemoCache:Lc,useCacheRefresh:$f};qc.useEffectEvent=Pf;var Jf={readContext:ve,use:ho,useCallback:jf,useContext:ve,useEffect:Fc,useImperativeHandle:If,useInsertionEffect:zf,useLayoutEffect:Ff,useMemo:Hf,useReducer:Bc,useRef:kf,useState:function(){return Bc(ji)},useDebugValue:Uc,useDeferredValue:function(e,n){var a=ne();return zt===null?Ic(a,e,n):Gf(a,zt.memoizedState,e,n)},useTransition:function(){var e=Bc(ji)[0],n=ne().memoizedState;return[typeof e=="boolean"?e:Ba(e),n]},useSyncExternalStore:bf,useId:Yf,useHostTransitionStatus:Hc,useFormState:Lf,useActionState:Lf,useOptimistic:function(e,n){var a=ne();return zt!==null?_f(a,zt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Lc,useCacheRefresh:$f};Jf.useEffectEvent=Pf;function Vc(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xc={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=We(),p=dn(l);p.payload=n,a!=null&&(p.callback=a),n=fn(e,p,l),n!==null&&(Fe(n,e,l),Na(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=We(),p=dn(l);p.tag=1,p.payload=n,a!=null&&(p.callback=a),n=fn(e,p,l),n!==null&&(Fe(n,e,l),Na(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=We(),l=dn(a);l.tag=2,n!=null&&(l.callback=n),n=fn(e,l,a),n!==null&&(Fe(n,e,a),Na(n,e,a))}};function tp(e,n,a,l,p,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,v):n.prototype&&n.prototype.isPureReactComponent?!xa(a,l)||!xa(p,m):!0}function ep(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Xc.enqueueReplaceState(n,n.state,null)}function Wn(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var p in e)a[p]===void 0&&(a[p]=e[p])}return a}function ip(e){Yr(e)}function np(e){console.error(e)}function sp(e){Yr(e)}function yo(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function ap(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Yc(e,n,a){return a=dn(a),a.tag=3,a.payload={element:null},a.callback=function(){yo(e,n)},a}function rp(e){return e=dn(e),e.tag=3,e}function op(e,n,a,l){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var m=l.value;e.payload=function(){return p(m)},e.callback=function(){ap(n,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){ap(n,a,l),typeof p!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function hb(e,n,a,l,p){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Cs(n,a,p,!0),a=Ye.current,a!==null){switch(a.tag){case 31:case 13:return li===null?Ro():a.alternate===null&&Jt===0&&(Jt=3),a.flags&=-257,a.flags|=65536,a.lanes=p,l===no?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),bu(e,l,p)),!1;case 22:return a.flags|=65536,l===no?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),bu(e,l,p)),!1}throw Error(s(435,a.tag))}return bu(e,l,p),Ro(),!1}if(Tt)return n=Ye.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,l!==dc&&(e=Error(s(422),{cause:l}),Ca(si(e,a)))):(l!==dc&&(n=Error(s(423),{cause:l}),Ca(si(n,a))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,l=si(l,a),p=Yc(e.stateNode,l,p),xc(e,p),Jt!==4&&(Jt=2)),!1;var m=Error(s(520),{cause:l});if(m=si(m,a),Va===null?Va=[m]:Va.push(m),Jt!==4&&(Jt=2),n===null)return!0;l=si(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=p&-p,a.lanes|=e,e=Yc(a.stateNode,l,e),xc(a,e),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(vn===null||!vn.has(m))))return a.flags|=65536,p&=-p,a.lanes|=p,p=rp(p),op(p,e,a,l),xc(a,p),!1}a=a.return}while(a!==null);return!1}var $c=Error(s(461)),oe=!1;function Ae(e,n,a,l){n.child=e===null?hf(n,null,a,l):Kn(n,e.child,a,l)}function lp(e,n,a,l,p){a=a.render;var m=n.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return Vn(n),l=Rc(e,n,a,v,m,p),E=Dc(),e!==null&&!oe?(Nc(e,n,p),Hi(e,n,p)):(Tt&&E&&uc(n),n.flags|=1,Ae(e,n,l,p),n.child)}function cp(e,n,a,l,p){if(e===null){var m=a.type;return typeof m=="function"&&!oc(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,up(e,n,m,l,p)):(e=Wr(a.type,null,l,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!iu(e,p)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:xa,a(v,l)&&e.ref===n.ref)return Hi(e,n,p)}return n.flags|=1,e=Pi(m,l),e.ref=n.ref,e.return=n,n.child=e}function up(e,n,a,l,p){if(e!==null){var m=e.memoizedProps;if(xa(m,l)&&e.ref===n.ref)if(oe=!1,n.pendingProps=l=m,iu(e,p))(e.flags&131072)!==0&&(oe=!0);else return n.lanes=e.lanes,Hi(e,n,p)}return Kc(e,n,a,l,p)}function hp(e,n,a,l){var p=l.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(l=n.child=e.child,p=0;l!==null;)p=p|l.lanes|l.childLanes,l=l.sibling;l=p&~m}else l=0,n.child=null;return dp(e,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&eo(n,m!==null?m.cachePool:null),m!==null?pf(n,m):Ec(),gf(n);else return l=n.lanes=536870912,dp(e,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(eo(n,m.cachePool),pf(n,m),gn(),n.memoizedState=null):(e!==null&&eo(n,null),Ec(),gn());return Ae(e,n,p,a),n.child}function Fa(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function dp(e,n,a,l,p){var m=vc();return m=m===null?null:{parent:ae._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},e!==null&&eo(n,null),Ec(),gf(n),e!==null&&Cs(e,n,l,!0),n.childLanes=p,null}function bo(e,n){return n=Ao({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function fp(e,n,a){return Kn(n,e.child,null,a),e=bo(n,n.pendingProps),e.flags|=2,$e(n),n.memoizedState=null,e}function db(e,n,a){var l=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Tt){if(l.mode==="hidden")return e=bo(n,l),n.lanes=536870912,Fa(null,e);if(Tc(n),(e=qt)?(e=Eg(e,oi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:on!==null?{id:Ai,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=Kd(e),a.return=n,n.child=a,be=n,qt=null)):e=null,e===null)throw cn(n);return n.lanes=536870912,null}return bo(n,l)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(Tc(n),p)if(n.flags&256)n.flags&=-257,n=fp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(oe||Cs(e,n,a,!1),p=(a&e.childLanes)!==0,oe||p){if(l=Ht,l!==null&&(v=id(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,jn(e,v),Fe(l,e,v),$c;Ro(),n=fp(e,n,a)}else e=m.treeContext,qt=ci(v.nextSibling),be=n,Tt=!0,ln=null,oi=!1,e!==null&&Zd(n,e),n=bo(n,l),n.flags|=4096;return n}return e=Pi(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function vo(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Kc(e,n,a,l,p){return Vn(n),a=Rc(e,n,a,l,void 0,p),l=Dc(),e!==null&&!oe?(Nc(e,n,p),Hi(e,n,p)):(Tt&&l&&uc(n),n.flags|=1,Ae(e,n,a,p),n.child)}function pp(e,n,a,l,p,m){return Vn(n),n.updateQueue=null,a=yf(n,l,a,p),mf(e),l=Dc(),e!==null&&!oe?(Nc(e,n,m),Hi(e,n,m)):(Tt&&l&&uc(n),n.flags|=1,Ae(e,n,a,m),n.child)}function gp(e,n,a,l,p){if(Vn(n),n.stateNode===null){var m=ws,v=a.contextType;typeof v=="object"&&v!==null&&(m=ve(v)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Xc,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},Sc(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?ve(v):ws,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Vc(n,a,v,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Xc.enqueueReplaceState(m,m.state,null),La(n,l,m,p),Oa(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){m=n.stateNode;var E=n.memoizedProps,M=Wn(a,E);m.props=M;var U=m.context,V=a.contextType;v=ws,typeof V=="object"&&V!==null&&(v=ve(V));var $=a.getDerivedStateFromProps;V=typeof $=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,V||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||U!==v)&&ep(n,m,l,v),hn=!1;var I=n.memoizedState;m.state=I,La(n,l,m,p),Oa(),U=n.memoizedState,E||I!==U||hn?(typeof $=="function"&&(Vc(n,a,$,l),U=n.memoizedState),(M=hn||tp(n,a,M,l,I,U,v))?(V||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=U),m.props=l,m.state=U,m.context=v,l=M):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,wc(e,n),v=n.memoizedProps,V=Wn(a,v),m.props=V,$=n.pendingProps,I=m.context,U=a.contextType,M=ws,typeof U=="object"&&U!==null&&(M=ve(U)),E=a.getDerivedStateFromProps,(U=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==$||I!==M)&&ep(n,m,l,M),hn=!1,I=n.memoizedState,m.state=I,La(n,l,m,p),Oa();var G=n.memoizedState;v!==$||I!==G||hn||e!==null&&e.dependencies!==null&&Jr(e.dependencies)?(typeof E=="function"&&(Vc(n,a,E,l),G=n.memoizedState),(V=hn||tp(n,a,V,l,I,G,M)||e!==null&&e.dependencies!==null&&Jr(e.dependencies))?(U||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,G,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,G,M)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=G),m.props=l,m.state=G,m.context=M,l=V):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),l=!1)}return m=l,vo(e,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&l?(n.child=Kn(n,e.child,null,p),n.child=Kn(n,null,a,p)):Ae(e,n,a,p),n.memoizedState=m.state,e=n.child):e=Hi(e,n,p),e}function mp(e,n,a,l){return Gn(),n.flags|=256,Ae(e,n,a,l),n.child}var Qc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wc(e){return{baseLanes:e,cachePool:af()}}function Zc(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Qe),e}function yp(e,n,a){var l=n.pendingProps,p=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(ie.current&2)!==0),v&&(p=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Tt){if(p?pn(n):gn(),(e=qt)?(e=Eg(e,oi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:on!==null?{id:Ai,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=Kd(e),a.return=n,n.child=a,be=n,qt=null)):e=null,e===null)throw cn(n);return ku(e)?n.lanes=32:n.lanes=536870912,null}var E=l.children;return l=l.fallback,p?(gn(),p=n.mode,E=Ao({mode:"hidden",children:E},p),l=Hn(l,p,a,null),E.return=n,l.return=n,E.sibling=l,n.child=E,l=n.child,l.memoizedState=Wc(a),l.childLanes=Zc(e,v,a),n.memoizedState=Qc,Fa(null,l)):(pn(n),Jc(n,E))}var M=e.memoizedState;if(M!==null&&(E=M.dehydrated,E!==null)){if(m)n.flags&256?(pn(n),n.flags&=-257,n=tu(e,n,a)):n.memoizedState!==null?(gn(),n.child=e.child,n.flags|=128,n=null):(gn(),E=l.fallback,p=n.mode,l=Ao({mode:"visible",children:l.children},p),E=Hn(E,p,a,null),E.flags|=2,l.return=n,E.return=n,l.sibling=E,n.child=l,Kn(n,e.child,null,a),l=n.child,l.memoizedState=Wc(a),l.childLanes=Zc(e,v,a),n.memoizedState=Qc,n=Fa(null,l));else if(pn(n),ku(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var U=v.dgst;v=U,l=Error(s(419)),l.stack="",l.digest=v,Ca({value:l,source:null,stack:null}),n=tu(e,n,a)}else if(oe||Cs(e,n,a,!1),v=(a&e.childLanes)!==0,oe||v){if(v=Ht,v!==null&&(l=id(v,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,jn(e,l),Fe(v,e,l),$c;Lu(E)||Ro(),n=tu(e,n,a)}else Lu(E)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,qt=ci(E.nextSibling),be=n,Tt=!0,ln=null,oi=!1,e!==null&&Zd(n,e),n=Jc(n,l.children),n.flags|=4096);return n}return p?(gn(),E=l.fallback,p=n.mode,M=e.child,U=M.sibling,l=Pi(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,U!==null?E=Pi(U,E):(E=Hn(E,p,a,null),E.flags|=2),E.return=n,l.return=n,l.sibling=E,n.child=l,Fa(null,l),l=n.child,E=e.child.memoizedState,E===null?E=Wc(a):(p=E.cachePool,p!==null?(M=ae._currentValue,p=p.parent!==M?{parent:M,pool:M}:p):p=af(),E={baseLanes:E.baseLanes|a,cachePool:p}),l.memoizedState=E,l.childLanes=Zc(e,v,a),n.memoizedState=Qc,Fa(e.child,l)):(pn(n),a=e.child,e=a.sibling,a=Pi(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Jc(e,n){return n=Ao({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ao(e,n){return e=Xe(22,e,null,n),e.lanes=0,e}function tu(e,n,a){return Kn(n,e.child,null,a),e=Jc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function bp(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),gc(e.return,n,a)}function eu(e,n,a,l,p,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:p,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=p,v.treeForkCount=m)}function vp(e,n,a){var l=n.pendingProps,p=l.revealOrder,m=l.tail;l=l.children;var v=ie.current,E=(v&2)!==0;if(E?(v=v&1|2,n.flags|=128):v&=1,Q(ie,v),Ae(e,n,l,a),l=Tt?Ea:0,!E&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bp(e,a,n);else if(e.tag===19)bp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(a=n.child,p=null;a!==null;)e=a.alternate,e!==null&&oo(e)===null&&(p=a),a=a.sibling;a=p,a===null?(p=n.child,n.child=null):(p=a.sibling,a.sibling=null),eu(n,!1,p,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&oo(e)===null){n.child=p;break}e=p.sibling,p.sibling=a,a=p,p=e}eu(n,!0,a,null,m,l);break;case"together":eu(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Hi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),bn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Cs(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Pi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Pi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function iu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Jr(e)))}function fb(e,n,a){switch(n.tag){case 3:ee(n,n.stateNode.containerInfo),un(n,ae,e.memoizedState.cache),Gn();break;case 27:case 5:kn(n);break;case 4:ee(n,n.stateNode.containerInfo);break;case 10:un(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Tc(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(pn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?yp(e,n,a):(pn(n),e=Hi(e,n,a),e!==null?e.sibling:null);pn(n);break;case 19:var p=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Cs(e,n,a,!1),l=(a&n.childLanes)!==0),p){if(l)return vp(e,n,a);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Q(ie,ie.current),l)break;return null;case 22:return n.lanes=0,hp(e,n,a,n.pendingProps);case 24:un(n,ae,e.memoizedState.cache)}return Hi(e,n,a)}function Ap(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)oe=!0;else{if(!iu(e,a)&&(n.flags&128)===0)return oe=!1,fb(e,n,a);oe=(e.flags&131072)!==0}else oe=!1,Tt&&(n.flags&1048576)!==0&&Wd(n,Ea,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(e=Yn(n.elementType),n.type=e,typeof e=="function")oc(e)?(l=Wn(e,l),n.tag=1,n=gp(null,n,e,l,a)):(n.tag=0,n=Kc(null,n,e,l,a));else{if(e!=null){var p=e.$$typeof;if(p===D){n.tag=11,n=lp(null,n,e,l,a);break t}else if(p===N){n.tag=14,n=cp(null,n,e,l,a);break t}}throw n=vt(e)||e,Error(s(306,n,""))}}return n;case 0:return Kc(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,p=Wn(l,n.pendingProps),gp(e,n,l,p,a);case 3:t:{if(ee(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var m=n.memoizedState;p=m.element,wc(e,n),La(n,l,null,a);var v=n.memoizedState;if(l=v.cache,un(n,ae,l),l!==m.cache&&mc(n,[ae],a,!0),Oa(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=mp(e,n,l,a);break t}else if(l!==p){p=si(Error(s(424)),n),Ca(p),n=mp(e,n,l,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qt=ci(e.firstChild),be=n,Tt=!0,ln=null,oi=!0,a=hf(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gn(),l===p){n=Hi(e,n,a);break t}Ae(e,n,l,a)}n=n.child}return n;case 26:return vo(e,n),e===null?(a=Ng(n.type,null,n.pendingProps,null))?n.memoizedState=a:Tt||(a=n.type,e=n.pendingProps,l=Po(ht.current).createElement(a),l[ye]=n,l[Oe]=e,Se(l,a,e),de(l),n.stateNode=l):n.memoizedState=Ng(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return kn(n),e===null&&Tt&&(l=n.stateNode=Mg(n.type,n.pendingProps,ht.current),be=n,oi=!0,p=qt,xn(n.type)?(Bu=p,qt=ci(l.firstChild)):qt=p),Ae(e,n,n.pendingProps.children,a),vo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Tt&&((p=l=qt)&&(l=Gb(l,n.type,n.pendingProps,oi),l!==null?(n.stateNode=l,be=n,qt=ci(l.firstChild),oi=!1,p=!0):p=!1),p||cn(n)),kn(n),p=n.type,m=n.pendingProps,v=e!==null?e.memoizedProps:null,l=m.children,Du(p,m)?l=null:v!==null&&Du(p,v)&&(n.flags|=32),n.memoizedState!==null&&(p=Rc(e,n,sb,null,null,a),Ja._currentValue=p),vo(e,n),Ae(e,n,l,a),n.child;case 6:return e===null&&Tt&&((e=a=qt)&&(a=qb(a,n.pendingProps,oi),a!==null?(n.stateNode=a,be=n,qt=null,e=!0):e=!1),e||cn(n)),null;case 13:return yp(e,n,a);case 4:return ee(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Kn(n,null,l,a):Ae(e,n,l,a),n.child;case 11:return lp(e,n,n.type,n.pendingProps,a);case 7:return Ae(e,n,n.pendingProps,a),n.child;case 8:return Ae(e,n,n.pendingProps.children,a),n.child;case 12:return Ae(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,un(n,n.type,l.value),Ae(e,n,l.children,a),n.child;case 9:return p=n.type._context,l=n.pendingProps.children,Vn(n),p=ve(p),l=l(p),n.flags|=1,Ae(e,n,l,a),n.child;case 14:return cp(e,n,n.type,n.pendingProps,a);case 15:return up(e,n,n.type,n.pendingProps,a);case 19:return vp(e,n,a);case 31:return db(e,n,a);case 22:return hp(e,n,a,n.pendingProps);case 24:return Vn(n),l=ve(ae),e===null?(p=vc(),p===null&&(p=Ht,m=yc(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=a),p=m),n.memoizedState={parent:l,cache:p},Sc(n),un(n,ae,p)):((e.lanes&a)!==0&&(wc(e,n),La(n,null,null,a),Oa()),p=e.memoizedState,m=n.memoizedState,p.parent!==l?(p={parent:l,cache:l},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),un(n,ae,l)):(l=m.cache,un(n,ae,l),l!==p.cache&&mc(n,[ae],a,!0))),Ae(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Gi(e){e.flags|=4}function nu(e,n,a,l,p){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(Yp())e.flags|=8192;else throw $n=no,Ac}else e.flags&=-16777217}function Sp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Pg(n))if(Yp())e.flags|=8192;else throw $n=no,Ac}function So(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Jh():536870912,e.lanes|=n,Fs|=n)}function Ua(e,n){if(!Tt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Vt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var p=e.child;p!==null;)a|=p.lanes|p.childLanes,l|=p.subtreeFlags&65011712,l|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)a|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function pb(e,n,a){var l=n.pendingProps;switch(hc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(n),null;case 1:return Vt(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Ui(ae),jt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Es(n)?Gi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,fc())),Vt(n),null;case 26:var p=n.type,m=n.memoizedState;return e===null?(Gi(n),m!==null?(Vt(n),Sp(n,m)):(Vt(n),nu(n,p,null,l,a))):m?m!==e.memoizedState?(Gi(n),Vt(n),Sp(n,m)):(Vt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Gi(n),Vt(n),nu(n,p,e,l,a)),null;case 27:if(nn(n),a=ht.current,p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Gi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Vt(n),null}e=tt.current,Es(n)?Jd(n):(e=Mg(p,l,a),n.stateNode=e,Gi(n))}return Vt(n),null;case 5:if(nn(n),p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Gi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Vt(n),null}if(m=tt.current,Es(n))Jd(n);else{var v=Po(ht.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(p,{is:l.is}):v.createElement(p)}}m[ye]=n,m[Oe]=l;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;t:switch(Se(m,p,l),p){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Gi(n)}}return Vt(n),nu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Gi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=ht.current,Es(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,p=be,p!==null)switch(p.tag){case 27:case 5:l=p.memoizedProps}e[ye]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||yg(e.nodeValue,a)),e||cn(n,!0)}else e=Po(e).createTextNode(l),e[ye]=n,n.stateNode=e}return Vt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=Es(n),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[ye]=n}else Gn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Vt(n),e=!1}else a=fc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?($e(n),n):($e(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Vt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Es(n),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ye]=n}else Gn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Vt(n),p=!1}else p=fc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?($e(n),n):($e(n),null)}return $e(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,p=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(p=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==p&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),So(n,n.updateQueue),Vt(n),null);case 4:return jt(),e===null&&Eu(n.stateNode.containerInfo),Vt(n),null;case 10:return Ui(n.type),Vt(n),null;case 19:if(q(ie),l=n.memoizedState,l===null)return Vt(n),null;if(p=(n.flags&128)!==0,m=l.rendering,m===null)if(p)Ua(l,!1);else{if(Jt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=oo(e),m!==null){for(n.flags|=128,Ua(l,!1),e=m.updateQueue,n.updateQueue=e,So(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)$d(a,e),a=a.sibling;return Q(ie,ie.current&1|2),Tt&&zi(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&He()>Co&&(n.flags|=128,p=!0,Ua(l,!1),n.lanes=4194304)}else{if(!p)if(e=oo(m),e!==null){if(n.flags|=128,p=!0,e=e.updateQueue,n.updateQueue=e,So(n,e),Ua(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Tt)return Vt(n),null}else 2*He()-l.renderingStartTime>Co&&a!==536870912&&(n.flags|=128,p=!0,Ua(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(e=l.last,e!==null?e.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=He(),e.sibling=null,a=ie.current,Q(ie,p?a&1|2:a&1),Tt&&zi(n,l.treeForkCount),e):(Vt(n),null);case 22:case 23:return $e(n),Cc(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Vt(n),n.subtreeFlags&6&&(n.flags|=8192)):Vt(n),a=n.updateQueue,a!==null&&So(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&q(Xn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Ui(ae),Vt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function gb(e,n){switch(hc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ui(ae),jt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return nn(n),null;case 31:if(n.memoizedState!==null){if($e(n),n.alternate===null)throw Error(s(340));Gn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if($e(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Gn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return q(ie),null;case 4:return jt(),null;case 10:return Ui(n.type),null;case 22:case 23:return $e(n),Cc(),e!==null&&q(Xn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Ui(ae),null;case 25:return null;default:return null}}function wp(e,n){switch(hc(n),n.tag){case 3:Ui(ae),jt();break;case 26:case 27:case 5:nn(n);break;case 4:jt();break;case 31:n.memoizedState!==null&&$e(n);break;case 13:$e(n);break;case 19:q(ie);break;case 10:Ui(n.type);break;case 22:case 23:$e(n),Cc(),e!==null&&q(Xn);break;case 24:Ui(ae)}}function Ia(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var p=l.next;a=p;do{if((a.tag&e)===e){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==p)}}catch(E){Pt(n,n.return,E)}}function mn(e,n,a){try{var l=n.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var m=p.next;l=m;do{if((l.tag&e)===e){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,p=n;var M=a,U=E;try{U()}catch(V){Pt(p,M,V)}}}l=l.next}while(l!==m)}}catch(V){Pt(n,n.return,V)}}function xp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{ff(n,a)}catch(l){Pt(e,e.return,l)}}}function _p(e,n,a){a.props=Wn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Pt(e,n,l)}}function ja(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(p){Pt(e,n,p)}}function wi(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(p){Pt(e,n,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){Pt(e,n,p)}else a.current=null}function Ep(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(p){Pt(e,e.return,p)}}function su(e,n,a){try{var l=e.stateNode;zb(l,e.type,a,n),l[Oe]=n}catch(p){Pt(e,e.return,p)}}function Cp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xn(e.type)||e.tag===4}function au(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Cp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ru(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ki));else if(l!==4&&(l===27&&xn(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ru(e,n,a),e=e.sibling;e!==null;)ru(e,n,a),e=e.sibling}function wo(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&xn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(wo(e,n,a),e=e.sibling;e!==null;)wo(e,n,a),e=e.sibling}function Tp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Se(n,l,a),n[ye]=e,n[Oe]=a}catch(m){Pt(e,e.return,m)}}var qi=!1,le=!1,ou=!1,Mp=typeof WeakSet=="function"?WeakSet:Set,fe=null;function mb(e,n){if(e=e.containerInfo,Mu=Go,e=Ud(e),tc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var p=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var v=0,E=-1,M=-1,U=0,V=0,$=e,I=null;e:for(;;){for(var G;$!==a||p!==0&&$.nodeType!==3||(E=v+p),$!==m||l!==0&&$.nodeType!==3||(M=v+l),$.nodeType===3&&(v+=$.nodeValue.length),(G=$.firstChild)!==null;)I=$,$=G;for(;;){if($===e)break e;if(I===a&&++U===p&&(E=v),I===m&&++V===l&&(M=v),(G=$.nextSibling)!==null)break;$=I,I=$.parentNode}$=G}a=E===-1||M===-1?null:{start:E,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ru={focusedElem:e,selectionRange:a},Go=!1,fe=n;fe!==null;)if(n=fe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,fe=e;else for(;fe!==null;){switch(n=fe,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)p=e[a],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=n,p=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var it=Wn(a.type,p);e=l.getSnapshotBeforeUpdate(it,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(ut){Pt(a,a.return,ut)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Ou(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ou(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,fe=e;break}fe=n.return}}function Rp(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Xi(e,a),l&4&&Ia(5,a);break;case 1:if(Xi(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Pt(a,a.return,v)}else{var p=Wn(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(p,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Pt(a,a.return,v)}}l&64&&xp(a),l&512&&ja(a,a.return);break;case 3:if(Xi(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{ff(e,n)}catch(v){Pt(a,a.return,v)}}break;case 27:n===null&&l&4&&Tp(a);case 26:case 5:Xi(e,a),n===null&&l&4&&Ep(a),l&512&&ja(a,a.return);break;case 12:Xi(e,a);break;case 31:Xi(e,a),l&4&&Op(e,a);break;case 13:Xi(e,a),l&4&&Lp(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Eb.bind(null,a),Vb(e,a))));break;case 22:if(l=a.memoizedState!==null||qi,!l){n=n!==null&&n.memoizedState!==null||le,p=qi;var m=le;qi=l,(le=n)&&!m?Yi(e,a,(a.subtreeFlags&8772)!==0):Xi(e,a),qi=p,le=m}break;case 30:break;default:Xi(e,a)}}function Dp(e){var n=e.alternate;n!==null&&(e.alternate=null,Dp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&zl(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xt=null,ke=!1;function Vi(e,n,a){for(a=a.child;a!==null;)Np(e,n,a),a=a.sibling}function Np(e,n,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(ha,a)}catch{}switch(a.tag){case 26:le||wi(a,n),Vi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:le||wi(a,n);var l=Xt,p=ke;xn(a.type)&&(Xt=a.stateNode,ke=!1),Vi(e,n,a),Qa(a.stateNode),Xt=l,ke=p;break;case 5:le||wi(a,n);case 6:if(l=Xt,p=ke,Xt=null,Vi(e,n,a),Xt=l,ke=p,Xt!==null)if(ke)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(a.stateNode)}catch(m){Pt(a,n,m)}else try{Xt.removeChild(a.stateNode)}catch(m){Pt(a,n,m)}break;case 18:Xt!==null&&(ke?(e=Xt,xg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Xs(e)):xg(Xt,a.stateNode));break;case 4:l=Xt,p=ke,Xt=a.stateNode.containerInfo,ke=!0,Vi(e,n,a),Xt=l,ke=p;break;case 0:case 11:case 14:case 15:mn(2,a,n),le||mn(4,a,n),Vi(e,n,a);break;case 1:le||(wi(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&_p(a,n,l)),Vi(e,n,a);break;case 21:Vi(e,n,a);break;case 22:le=(l=le)||a.memoizedState!==null,Vi(e,n,a),le=l;break;default:Vi(e,n,a)}}function Op(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Xs(e)}catch(a){Pt(n,n.return,a)}}}function Lp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xs(e)}catch(a){Pt(n,n.return,a)}}function yb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Mp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Mp),n;default:throw Error(s(435,e.tag))}}function xo(e,n){var a=yb(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var p=Cb.bind(null,e,l);l.then(p,p)}})}function Be(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var p=a[l],m=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(xn(E.type)){Xt=E.stateNode,ke=!1;break t}break;case 5:Xt=E.stateNode,ke=!1;break t;case 3:case 4:Xt=E.stateNode.containerInfo,ke=!0;break t}E=E.return}if(Xt===null)throw Error(s(160));Np(m,v,p),Xt=null,ke=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)kp(n,e),n=n.sibling}var yi=null;function kp(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Be(n,e),Pe(e),l&4&&(mn(3,e,e.return),Ia(3,e),mn(5,e,e.return));break;case 1:Be(n,e),Pe(e),l&512&&(le||a===null||wi(a,a.return)),l&64&&qi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var p=yi;if(Be(n,e),Pe(e),l&512&&(le||a===null||wi(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,p=p.ownerDocument||p;e:switch(l){case"title":m=p.getElementsByTagName("title")[0],(!m||m[pa]||m[ye]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(l),p.head.insertBefore(m,p.querySelector("head > title"))),Se(m,l,a),m[ye]=e,de(m),l=m;break t;case"link":var v=kg("link","href",p).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}m=p.createElement(l),Se(m,l,a),p.head.appendChild(m);break;case"meta":if(v=kg("meta","content",p).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}m=p.createElement(l),Se(m,l,a),p.head.appendChild(m);break;default:throw Error(s(468,l))}m[ye]=e,de(m),l=m}e.stateNode=l}else Bg(p,e.type,e.stateNode);else e.stateNode=Lg(p,l,e.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Bg(p,e.type,e.stateNode):Lg(p,l,e.memoizedProps)):l===null&&e.stateNode!==null&&su(e,e.memoizedProps,a.memoizedProps)}break;case 27:Be(n,e),Pe(e),l&512&&(le||a===null||wi(a,a.return)),a!==null&&l&4&&su(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Be(n,e),Pe(e),l&512&&(le||a===null||wi(a,a.return)),e.flags&32){p=e.stateNode;try{gs(p,"")}catch(it){Pt(e,e.return,it)}}l&4&&e.stateNode!=null&&(p=e.memoizedProps,su(e,p,a!==null?a.memoizedProps:p)),l&1024&&(ou=!0);break;case 6:if(Be(n,e),Pe(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(it){Pt(e,e.return,it)}}break;case 3:if(Uo=null,p=yi,yi=zo(n.containerInfo),Be(n,e),yi=p,Pe(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Xs(n.containerInfo)}catch(it){Pt(e,e.return,it)}ou&&(ou=!1,Bp(e));break;case 4:l=yi,yi=zo(e.stateNode.containerInfo),Be(n,e),Pe(e),yi=l;break;case 12:Be(n,e),Pe(e);break;case 31:Be(n,e),Pe(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,xo(e,l)));break;case 13:Be(n,e),Pe(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Eo=He()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,xo(e,l)));break;case 22:p=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,U=qi,V=le;if(qi=U||p,le=V||M,Be(n,e),le=V,qi=U,Pe(e),l&8192)t:for(n=e.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(a===null||M||qi||le||Zn(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){M=a=n;try{if(m=M.stateNode,p)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=M.stateNode;var $=M.memoizedProps.style,I=$!=null&&$.hasOwnProperty("display")?$.display:null;E.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(it){Pt(M,M.return,it)}}}else if(n.tag===6){if(a===null){M=n;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch(it){Pt(M,M.return,it)}}}else if(n.tag===18){if(a===null){M=n;try{var G=M.stateNode;p?_g(G,!0):_g(M.stateNode,!1)}catch(it){Pt(M,M.return,it)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,xo(e,a))));break;case 19:Be(n,e),Pe(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,xo(e,l)));break;case 30:break;case 21:break;default:Be(n,e),Pe(e)}}function Pe(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(Cp(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,m=au(e);wo(e,m,p);break;case 5:var v=a.stateNode;a.flags&32&&(gs(v,""),a.flags&=-33);var E=au(e);wo(e,E,v);break;case 3:case 4:var M=a.stateNode.containerInfo,U=au(e);ru(e,U,M);break;default:throw Error(s(161))}}catch(V){Pt(e,e.return,V)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Bp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Bp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Xi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Rp(e,n.alternate,n),n=n.sibling}function Zn(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:mn(4,n,n.return),Zn(n);break;case 1:wi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&_p(n,n.return,a),Zn(n);break;case 27:Qa(n.stateNode);case 26:case 5:wi(n,n.return),Zn(n);break;case 22:n.memoizedState===null&&Zn(n);break;case 30:Zn(n);break;default:Zn(n)}e=e.sibling}}function Yi(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,p=e,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:Yi(p,m,a),Ia(4,m);break;case 1:if(Yi(p,m,a),l=m,p=l.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){Pt(l,l.return,U)}if(l=m,p=l.updateQueue,p!==null){var E=l.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)df(M[p],E)}catch(U){Pt(l,l.return,U)}}a&&v&64&&xp(m),ja(m,m.return);break;case 27:Tp(m);case 26:case 5:Yi(p,m,a),a&&l===null&&v&4&&Ep(m),ja(m,m.return);break;case 12:Yi(p,m,a);break;case 31:Yi(p,m,a),a&&v&4&&Op(p,m);break;case 13:Yi(p,m,a),a&&v&4&&Lp(p,m);break;case 22:m.memoizedState===null&&Yi(p,m,a),ja(m,m.return);break;case 30:break;default:Yi(p,m,a)}n=n.sibling}}function lu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ta(a))}function cu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ta(e))}function bi(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Pp(e,n,a,l),n=n.sibling}function Pp(e,n,a,l){var p=n.flags;switch(n.tag){case 0:case 11:case 15:bi(e,n,a,l),p&2048&&Ia(9,n);break;case 1:bi(e,n,a,l);break;case 3:bi(e,n,a,l),p&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ta(e)));break;case 12:if(p&2048){bi(e,n,a,l),e=n.stateNode;try{var m=n.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Pt(n,n.return,M)}}else bi(e,n,a,l);break;case 31:bi(e,n,a,l);break;case 13:bi(e,n,a,l);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?bi(e,n,a,l):Ha(e,n):m._visibility&2?bi(e,n,a,l):(m._visibility|=2,Bs(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),p&2048&&lu(v,n);break;case 24:bi(e,n,a,l),p&2048&&cu(n.alternate,n);break;default:bi(e,n,a,l)}}function Bs(e,n,a,l,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,v=n,E=a,M=l,U=v.flags;switch(v.tag){case 0:case 11:case 15:Bs(m,v,E,M,p),Ia(8,v);break;case 23:break;case 22:var V=v.stateNode;v.memoizedState!==null?V._visibility&2?Bs(m,v,E,M,p):Ha(m,v):(V._visibility|=2,Bs(m,v,E,M,p)),p&&U&2048&&lu(v.alternate,v);break;case 24:Bs(m,v,E,M,p),p&&U&2048&&cu(v.alternate,v);break;default:Bs(m,v,E,M,p)}n=n.sibling}}function Ha(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,p=l.flags;switch(l.tag){case 22:Ha(a,l),p&2048&&lu(l.alternate,l);break;case 24:Ha(a,l),p&2048&&cu(l.alternate,l);break;default:Ha(a,l)}n=n.sibling}}var Ga=8192;function Ps(e,n,a){if(e.subtreeFlags&Ga)for(e=e.child;e!==null;)zp(e,n,a),e=e.sibling}function zp(e,n,a){switch(e.tag){case 26:Ps(e,n,a),e.flags&Ga&&e.memoizedState!==null&&nv(a,yi,e.memoizedState,e.memoizedProps);break;case 5:Ps(e,n,a);break;case 3:case 4:var l=yi;yi=zo(e.stateNode.containerInfo),Ps(e,n,a),yi=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Ga,Ga=16777216,Ps(e,n,a),Ga=l):Ps(e,n,a));break;default:Ps(e,n,a)}}function Fp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function qa(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];fe=l,Ip(l,e)}Fp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Up(e),e=e.sibling}function Up(e){switch(e.tag){case 0:case 11:case 15:qa(e),e.flags&2048&&mn(9,e,e.return);break;case 3:qa(e);break;case 12:qa(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,_o(e)):qa(e);break;default:qa(e)}}function _o(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];fe=l,Ip(l,e)}Fp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:mn(8,n,n.return),_o(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,_o(n));break;default:_o(n)}e=e.sibling}}function Ip(e,n){for(;fe!==null;){var a=fe;switch(a.tag){case 0:case 11:case 15:mn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ta(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,fe=l;else t:for(a=e;fe!==null;){l=fe;var p=l.sibling,m=l.return;if(Dp(l),l===a){fe=null;break t}if(p!==null){p.return=m,fe=p;break t}fe=m}}}var bb={getCacheForType:function(e){var n=ve(ae),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return ve(ae).controller.signal}},vb=typeof WeakMap=="function"?WeakMap:Map,Ot=0,Ht=null,xt=null,Et=0,Bt=0,Ke=null,yn=!1,zs=!1,uu=!1,$i=0,Jt=0,bn=0,Jn=0,hu=0,Qe=0,Fs=0,Va=null,ze=null,du=!1,Eo=0,jp=0,Co=1/0,To=null,vn=null,he=0,An=null,Us=null,Ki=0,fu=0,pu=null,Hp=null,Xa=0,gu=null;function We(){return(Ot&2)!==0&&Et!==0?Et&-Et:z.T!==null?Su():nd()}function Gp(){if(Qe===0)if((Et&536870912)===0||Tt){var e=kr;kr<<=1,(kr&3932160)===0&&(kr=262144),Qe=e}else Qe=536870912;return e=Ye.current,e!==null&&(e.flags|=32),Qe}function Fe(e,n,a){(e===Ht&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)&&(Is(e,0),Sn(e,Et,Qe,!1)),fa(e,a),((Ot&2)===0||e!==Ht)&&(e===Ht&&((Ot&2)===0&&(Jn|=a),Jt===4&&Sn(e,Et,Qe,!1)),xi(e))}function qp(e,n,a){if((Ot&6)!==0)throw Error(s(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||da(e,n),p=l?wb(e,n):yu(e,n,!0),m=l;do{if(p===0){zs&&!l&&Sn(e,n,0,!1);break}else{if(a=e.current.alternate,m&&!Ab(a)){p=yu(e,n,!1),m=!1;continue}if(p===2){if(m=n,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;p=Va;var M=E.current.memoizedState.isDehydrated;if(M&&(Is(E,v).flags|=256),v=yu(E,v,!1),v!==2){if(uu&&!M){E.errorRecoveryDisabledLanes|=m,Jn|=m,p=4;break t}m=ze,ze=p,m!==null&&(ze===null?ze=m:ze.push.apply(ze,m))}p=v}if(m=!1,p!==2)continue}}if(p===1){Is(e,0),Sn(e,n,0,!0);break}t:{switch(l=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Sn(l,n,Qe,!yn);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(p=Eo+300-He(),10<p)){if(Sn(l,n,Qe,!yn),Pr(l,0,!0)!==0)break t;Ki=n,l.timeoutHandle=Sg(Vp.bind(null,l,a,ze,To,du,n,Qe,Jn,Fs,yn,m,"Throttled",-0,0),p);break t}Vp(l,a,ze,To,du,n,Qe,Jn,Fs,yn,m,null,-0,0)}}break}while(!0);xi(e)}function Vp(e,n,a,l,p,m,v,E,M,U,V,$,I,G){if(e.timeoutHandle=-1,$=n.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ki},zp(n,m,$);var it=(m&62914560)===m?Eo-He():(m&4194048)===m?jp-He():0;if(it=sv($,it),it!==null){Ki=m,e.cancelPendingCommit=it(Jp.bind(null,e,n,m,a,l,p,v,E,M,V,$,null,I,G)),Sn(e,m,v,!U);return}}Jp(e,n,m,a,l,p,v,E,M)}function Ab(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var p=a[l],m=p.getSnapshot;p=p.value;try{if(!Ve(m(),p))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Sn(e,n,a,l){n&=~hu,n&=~Jn,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var p=n;0<p;){var m=31-qe(p),v=1<<m;l[m]=-1,p&=~v}a!==0&&td(e,a,n)}function Mo(){return(Ot&6)===0?(Ya(0),!1):!0}function mu(){if(xt!==null){if(Bt===0)var e=xt.return;else e=xt,Fi=qn=null,Oc(e),Ds=null,Ra=0,e=xt;for(;e!==null;)wp(e.alternate,e),e=e.return;xt=null}}function Is(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Ib(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ki=0,mu(),Ht=e,xt=a=Pi(e.current,null),Et=n,Bt=0,Ke=null,yn=!1,zs=da(e,n),uu=!1,Fs=Qe=hu=Jn=bn=Jt=0,ze=Va=null,du=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var p=31-qe(l),m=1<<p;n|=e[p],l&=~m}return $i=n,$r(),a}function Xp(e,n){yt=null,z.H=za,n===Rs||n===io?(n=lf(),Bt=3):n===Ac?(n=lf(),Bt=4):Bt=n===$c?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ke=n,xt===null&&(Jt=1,yo(e,si(n,e.current)))}function Yp(){var e=Ye.current;return e===null?!0:(Et&4194048)===Et?li===null:(Et&62914560)===Et||(Et&536870912)!==0?e===li:!1}function $p(){var e=z.H;return z.H=za,e===null?za:e}function Kp(){var e=z.A;return z.A=bb,e}function Ro(){Jt=4,yn||(Et&4194048)!==Et&&Ye.current!==null||(zs=!0),(bn&134217727)===0&&(Jn&134217727)===0||Ht===null||Sn(Ht,Et,Qe,!1)}function yu(e,n,a){var l=Ot;Ot|=2;var p=$p(),m=Kp();(Ht!==e||Et!==n)&&(To=null,Is(e,n)),n=!1;var v=Jt;t:do try{if(Bt!==0&&xt!==null){var E=xt,M=Ke;switch(Bt){case 8:mu(),v=6;break t;case 3:case 2:case 9:case 6:Ye.current===null&&(n=!0);var U=Bt;if(Bt=0,Ke=null,js(e,E,M,U),a&&zs){v=0;break t}break;default:U=Bt,Bt=0,Ke=null,js(e,E,M,U)}}Sb(),v=Jt;break}catch(V){Xp(e,V)}while(!0);return n&&e.shellSuspendCounter++,Fi=qn=null,Ot=l,z.H=p,z.A=m,xt===null&&(Ht=null,Et=0,$r()),v}function Sb(){for(;xt!==null;)Qp(xt)}function wb(e,n){var a=Ot;Ot|=2;var l=$p(),p=Kp();Ht!==e||Et!==n?(To=null,Co=He()+500,Is(e,n)):zs=da(e,n);t:do try{if(Bt!==0&&xt!==null){n=xt;var m=Ke;e:switch(Bt){case 1:Bt=0,Ke=null,js(e,n,m,1);break;case 2:case 9:if(rf(m)){Bt=0,Ke=null,Wp(n);break}n=function(){Bt!==2&&Bt!==9||Ht!==e||(Bt=7),xi(e)},m.then(n,n);break t;case 3:Bt=7;break t;case 4:Bt=5;break t;case 7:rf(m)?(Bt=0,Ke=null,Wp(n)):(Bt=0,Ke=null,js(e,n,m,7));break;case 5:var v=null;switch(xt.tag){case 26:v=xt.memoizedState;case 5:case 27:var E=xt;if(v?Pg(v):E.stateNode.complete){Bt=0,Ke=null;var M=E.sibling;if(M!==null)xt=M;else{var U=E.return;U!==null?(xt=U,Do(U)):xt=null}break e}}Bt=0,Ke=null,js(e,n,m,5);break;case 6:Bt=0,Ke=null,js(e,n,m,6);break;case 8:mu(),Jt=6;break t;default:throw Error(s(462))}}xb();break}catch(V){Xp(e,V)}while(!0);return Fi=qn=null,z.H=l,z.A=p,Ot=a,xt!==null?0:(Ht=null,Et=0,$r(),Jt)}function xb(){for(;xt!==null&&!Xy();)Qp(xt)}function Qp(e){var n=Ap(e.alternate,e,$i);e.memoizedProps=e.pendingProps,n===null?Do(e):xt=n}function Wp(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=pp(a,n,n.pendingProps,n.type,void 0,Et);break;case 11:n=pp(a,n,n.pendingProps,n.type.render,n.ref,Et);break;case 5:Oc(n);default:wp(a,n),n=xt=$d(n,$i),n=Ap(a,n,$i)}e.memoizedProps=e.pendingProps,n===null?Do(e):xt=n}function js(e,n,a,l){Fi=qn=null,Oc(n),Ds=null,Ra=0;var p=n.return;try{if(hb(e,p,n,a,Et)){Jt=1,yo(e,si(a,e.current)),xt=null;return}}catch(m){if(p!==null)throw xt=p,m;Jt=1,yo(e,si(a,e.current)),xt=null;return}n.flags&32768?(Tt||l===1?e=!0:zs||(Et&536870912)!==0?e=!1:(yn=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ye.current,l!==null&&l.tag===13&&(l.flags|=16384))),Zp(n,e)):Do(n)}function Do(e){var n=e;do{if((n.flags&32768)!==0){Zp(n,yn);return}e=n.return;var a=pb(n.alternate,n,$i);if(a!==null){xt=a;return}if(n=n.sibling,n!==null){xt=n;return}xt=n=e}while(n!==null);Jt===0&&(Jt=5)}function Zp(e,n){do{var a=gb(e.alternate,e);if(a!==null){a.flags&=32767,xt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){xt=e;return}xt=e=a}while(e!==null);Jt=6,xt=null}function Jp(e,n,a,l,p,m,v,E,M){e.cancelPendingCommit=null;do No();while(he!==0);if((Ot&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=ac,i0(e,a,m,v,E,M),e===Ht&&(xt=Ht=null,Et=0),Us=n,An=e,Ki=a,fu=m,pu=p,Hp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Tb(Or,function(){return sg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=z.T,z.T=null,p=X.p,X.p=2,v=Ot,Ot|=4;try{mb(e,n,a)}finally{Ot=v,X.p=p,z.T=l}}he=1,tg(),eg(),ig()}}function tg(){if(he===1){he=0;var e=An,n=Us,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var l=X.p;X.p=2;var p=Ot;Ot|=4;try{kp(n,e);var m=Ru,v=Ud(e.containerInfo),E=m.focusedElem,M=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&Fd(E.ownerDocument.documentElement,E)){if(M!==null&&tc(E)){var U=M.start,V=M.end;if(V===void 0&&(V=U),"selectionStart"in E)E.selectionStart=U,E.selectionEnd=Math.min(V,E.value.length);else{var $=E.ownerDocument||document,I=$&&$.defaultView||window;if(I.getSelection){var G=I.getSelection(),it=E.textContent.length,ut=Math.min(M.start,it),Ut=M.end===void 0?ut:Math.min(M.end,it);!G.extend&&ut>Ut&&(v=Ut,Ut=ut,ut=v);var P=zd(E,ut),L=zd(E,Ut);if(P&&L&&(G.rangeCount!==1||G.anchorNode!==P.node||G.anchorOffset!==P.offset||G.focusNode!==L.node||G.focusOffset!==L.offset)){var F=$.createRange();F.setStart(P.node,P.offset),G.removeAllRanges(),ut>Ut?(G.addRange(F),G.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),G.addRange(F))}}}}for($=[],G=E;G=G.parentNode;)G.nodeType===1&&$.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<$.length;E++){var Y=$[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Go=!!Mu,Ru=Mu=null}finally{Ot=p,X.p=l,z.T=a}}e.current=n,he=2}}function eg(){if(he===2){he=0;var e=An,n=Us,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var l=X.p;X.p=2;var p=Ot;Ot|=4;try{Rp(e,n.alternate,n)}finally{Ot=p,X.p=l,z.T=a}}he=3}}function ig(){if(he===4||he===3){he=0,Yy();var e=An,n=Us,a=Ki,l=Hp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?he=5:(he=0,Us=An=null,ng(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(vn=null),Bl(a),n=n.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(ha,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=z.T,p=X.p,X.p=2,z.T=null;try{for(var m=e.onRecoverableError,v=0;v<l.length;v++){var E=l[v];m(E.value,{componentStack:E.stack})}}finally{z.T=n,X.p=p}}(Ki&3)!==0&&No(),xi(e),p=e.pendingLanes,(a&261930)!==0&&(p&42)!==0?e===gu?Xa++:(Xa=0,gu=e):Xa=0,Ya(0)}}function ng(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ta(n)))}function No(){return tg(),eg(),ig(),sg()}function sg(){if(he!==5)return!1;var e=An,n=fu;fu=0;var a=Bl(Ki),l=z.T,p=X.p;try{X.p=32>a?32:a,z.T=null,a=pu,pu=null;var m=An,v=Ki;if(he=0,Us=An=null,Ki=0,(Ot&6)!==0)throw Error(s(331));var E=Ot;if(Ot|=4,Up(m.current),Pp(m,m.current,v,a),Ot=E,Ya(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(ha,m)}catch{}return!0}finally{X.p=p,z.T=l,ng(e,n)}}function ag(e,n,a){n=si(a,n),n=Yc(e.stateNode,n,2),e=fn(e,n,2),e!==null&&(fa(e,2),xi(e))}function Pt(e,n,a){if(e.tag===3)ag(e,e,a);else for(;n!==null;){if(n.tag===3){ag(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vn===null||!vn.has(l))){e=si(a,e),a=rp(2),l=fn(n,a,2),l!==null&&(op(a,l,n,e),fa(l,2),xi(l));break}}n=n.return}}function bu(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new vb;var p=new Set;l.set(n,p)}else p=l.get(n),p===void 0&&(p=new Set,l.set(n,p));p.has(a)||(uu=!0,p.add(a),e=_b.bind(null,e,n,a),n.then(e,e))}function _b(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ht===e&&(Et&a)===a&&(Jt===4||Jt===3&&(Et&62914560)===Et&&300>He()-Eo?(Ot&2)===0&&Is(e,0):hu|=a,Fs===Et&&(Fs=0)),xi(e)}function rg(e,n){n===0&&(n=Jh()),e=jn(e,n),e!==null&&(fa(e,n),xi(e))}function Eb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),rg(e,a)}function Cb(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,p=e.memoizedState;p!==null&&(a=p.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),rg(e,a)}function Tb(e,n){return Nl(e,n)}var Oo=null,Hs=null,vu=!1,Lo=!1,Au=!1,wn=0;function xi(e){e!==Hs&&e.next===null&&(Hs===null?Oo=Hs=e:Hs=Hs.next=e),Lo=!0,vu||(vu=!0,Rb())}function Ya(e,n){if(!Au&&Lo){Au=!0;do for(var a=!1,l=Oo;l!==null;){if(e!==0){var p=l.pendingLanes;if(p===0)var m=0;else{var v=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-qe(42|e)+1)-1,m&=p&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,ug(l,m))}else m=Et,m=Pr(l,l===Ht?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||da(l,m)||(a=!0,ug(l,m));l=l.next}while(a);Au=!1}}function Mb(){og()}function og(){Lo=vu=!1;var e=0;wn!==0&&Ub()&&(e=wn);for(var n=He(),a=null,l=Oo;l!==null;){var p=l.next,m=lg(l,n);m===0?(l.next=null,a===null?Oo=p:a.next=p,p===null&&(Hs=a)):(a=l,(e!==0||(m&3)!==0)&&(Lo=!0)),l=p}he!==0&&he!==5||Ya(e),wn!==0&&(wn=0)}function lg(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-qe(m),E=1<<v,M=p[v];M===-1?((E&a)===0||(E&l)!==0)&&(p[v]=e0(E,n)):M<=n&&(e.expiredLanes|=E),m&=~E}if(n=Ht,a=Et,a=Pr(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ol(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||da(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&Ol(l),Bl(a)){case 2:case 8:a=Wh;break;case 32:a=Or;break;case 268435456:a=Zh;break;default:a=Or}return l=cg.bind(null,e),a=Nl(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&Ol(l),e.callbackPriority=2,e.callbackNode=null,2}function cg(e,n){if(he!==0&&he!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(No()&&e.callbackNode!==a)return null;var l=Et;return l=Pr(e,e===Ht?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(qp(e,l,n),lg(e,He()),e.callbackNode!=null&&e.callbackNode===a?cg.bind(null,e):null)}function ug(e,n){if(No())return null;qp(e,n,!0)}function Rb(){jb(function(){(Ot&6)!==0?Nl(Qh,Mb):og()})}function Su(){if(wn===0){var e=Ts;e===0&&(e=Lr,Lr<<=1,(Lr&261888)===0&&(Lr=256)),wn=e}return wn}function hg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ir(""+e)}function dg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function Db(e,n,a,l,p){if(n==="submit"&&a&&a.stateNode===p){var m=hg((p[Oe]||null).action),v=l.submitter;v&&(n=(n=v[Oe]||null)?hg(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var E=new qr("action","action",null,l,p);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(wn!==0){var M=v?dg(p,v):new FormData(p);jc(a,{pending:!0,data:M,method:p.method,action:m},null,M)}}else typeof m=="function"&&(E.preventDefault(),M=v?dg(p,v):new FormData(p),jc(a,{pending:!0,data:M,method:p.method,action:m},m,M))},currentTarget:p}]})}}for(var wu=0;wu<sc.length;wu++){var xu=sc[wu],Nb=xu.toLowerCase(),Ob=xu[0].toUpperCase()+xu.slice(1);mi(Nb,"on"+Ob)}mi(Hd,"onAnimationEnd"),mi(Gd,"onAnimationIteration"),mi(qd,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi($0,"onTransitionRun"),mi(K0,"onTransitionStart"),mi(Q0,"onTransitionCancel"),mi(Vd,"onTransitionEnd"),fs("onMouseEnter",["mouseout","mouseover"]),fs("onMouseLeave",["mouseout","mouseover"]),fs("onPointerEnter",["pointerout","pointerover"]),fs("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($a));function fg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],p=l.event;l=l.listeners;t:{var m=void 0;if(n)for(var v=l.length-1;0<=v;v--){var E=l[v],M=E.instance,U=E.currentTarget;if(E=E.listener,M!==m&&p.isPropagationStopped())break t;m=E,p.currentTarget=U;try{m(p)}catch(V){Yr(V)}p.currentTarget=null,m=M}else for(v=0;v<l.length;v++){if(E=l[v],M=E.instance,U=E.currentTarget,E=E.listener,M!==m&&p.isPropagationStopped())break t;m=E,p.currentTarget=U;try{m(p)}catch(V){Yr(V)}p.currentTarget=null,m=M}}}}function _t(e,n){var a=n[Pl];a===void 0&&(a=n[Pl]=new Set);var l=e+"__bubble";a.has(l)||(pg(n,e,2,!1),a.add(l))}function _u(e,n,a){var l=0;n&&(l|=4),pg(a,e,l,n)}var ko="_reactListening"+Math.random().toString(36).slice(2);function Eu(e){if(!e[ko]){e[ko]=!0,rd.forEach(function(a){a!=="selectionchange"&&(Lb.has(a)||_u(a,!1,e),_u(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ko]||(n[ko]=!0,_u("selectionchange",!1,n))}}function pg(e,n,a,l){switch(Gg(n)){case 2:var p=ov;break;case 8:p=lv;break;default:p=Iu}a=p.bind(null,n,a,e),p=void 0,!Vl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),l?p!==void 0?e.addEventListener(n,a,{capture:!0,passive:p}):e.addEventListener(n,a,!0):p!==void 0?e.addEventListener(n,a,{passive:p}):e.addEventListener(n,a,!1)}function Cu(e,n,a,l,p){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===p)break;if(v===4)for(v=l.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===p)return;v=v.return}for(;E!==null;){if(v=us(E),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){l=m=v;continue t}E=E.parentNode}}l=l.return}bd(function(){var U=m,V=Gl(a),$=[];t:{var I=Xd.get(e);if(I!==void 0){var G=qr,it=e;switch(e){case"keypress":if(Hr(a)===0)break t;case"keydown":case"keyup":G=C0;break;case"focusin":it="focus",G=Kl;break;case"focusout":it="blur",G=Kl;break;case"beforeblur":case"afterblur":G=Kl;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=p0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=R0;break;case Hd:case Gd:case qd:G=y0;break;case Vd:G=N0;break;case"scroll":case"scrollend":G=d0;break;case"wheel":G=L0;break;case"copy":case"cut":case"paste":G=v0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=xd;break;case"toggle":case"beforetoggle":G=B0}var ut=(n&4)!==0,Ut=!ut&&(e==="scroll"||e==="scrollend"),P=ut?I!==null?I+"Capture":null:I;ut=[];for(var L=U,F;L!==null;){var Y=L;if(F=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||F===null||P===null||(Y=ma(L,P),Y!=null&&ut.push(Ka(L,Y,F))),Ut)break;L=L.return}0<ut.length&&(I=new G(I,it,null,a,V),$.push({event:I,listeners:ut}))}}if((n&7)===0){t:{if(I=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",I&&a!==Hl&&(it=a.relatedTarget||a.fromElement)&&(us(it)||it[cs]))break t;if((G||I)&&(I=V.window===V?V:(I=V.ownerDocument)?I.defaultView||I.parentWindow:window,G?(it=a.relatedTarget||a.toElement,G=U,it=it?us(it):null,it!==null&&(Ut=o(it),ut=it.tag,it!==Ut||ut!==5&&ut!==27&&ut!==6)&&(it=null)):(G=null,it=U),G!==it)){if(ut=Sd,Y="onMouseLeave",P="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(ut=xd,Y="onPointerLeave",P="onPointerEnter",L="pointer"),Ut=G==null?I:ga(G),F=it==null?I:ga(it),I=new ut(Y,L+"leave",G,a,V),I.target=Ut,I.relatedTarget=F,Y=null,us(V)===U&&(ut=new ut(P,L+"enter",it,a,V),ut.target=F,ut.relatedTarget=Ut,Y=ut),Ut=Y,G&&it)e:{for(ut=kb,P=G,L=it,F=0,Y=P;Y;Y=ut(Y))F++;Y=0;for(var rt=L;rt;rt=ut(rt))Y++;for(;0<F-Y;)P=ut(P),F--;for(;0<Y-F;)L=ut(L),Y--;for(;F--;){if(P===L||L!==null&&P===L.alternate){ut=P;break e}P=ut(P),L=ut(L)}ut=null}else ut=null;G!==null&&gg($,I,G,ut,!1),it!==null&&Ut!==null&&gg($,Ut,it,ut,!0)}}t:{if(I=U?ga(U):window,G=I.nodeName&&I.nodeName.toLowerCase(),G==="select"||G==="input"&&I.type==="file")var Dt=Nd;else if(Rd(I))if(Od)Dt=V0;else{Dt=G0;var at=H0}else G=I.nodeName,!G||G.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?U&&jl(U.elementType)&&(Dt=Nd):Dt=q0;if(Dt&&(Dt=Dt(e,U))){Dd($,Dt,a,V);break t}at&&at(e,I,U),e==="focusout"&&U&&I.type==="number"&&U.memoizedProps.value!=null&&Il(I,"number",I.value)}switch(at=U?ga(U):window,e){case"focusin":(Rd(at)||at.contentEditable==="true")&&(vs=at,ec=U,_a=null);break;case"focusout":_a=ec=vs=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,Id($,a,V);break;case"selectionchange":if(Y0)break;case"keydown":case"keyup":Id($,a,V)}var bt;if(Wl)t:{switch(e){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else bs?Td(e,a)&&(Ct="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ct="onCompositionStart");Ct&&(_d&&a.locale!=="ko"&&(bs||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&bs&&(bt=vd()):(rn=V,Xl="value"in rn?rn.value:rn.textContent,bs=!0)),at=Bo(U,Ct),0<at.length&&(Ct=new wd(Ct,e,null,a,V),$.push({event:Ct,listeners:at}),bt?Ct.data=bt:(bt=Md(a),bt!==null&&(Ct.data=bt)))),(bt=z0?F0(e,a):U0(e,a))&&(Ct=Bo(U,"onBeforeInput"),0<Ct.length&&(at=new wd("onBeforeInput","beforeinput",null,a,V),$.push({event:at,listeners:Ct}),at.data=bt)),Db($,e,U,a,V)}fg($,n)})}function Ka(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Bo(e,n){for(var a=n+"Capture",l=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=ma(e,a),p!=null&&l.unshift(Ka(e,p,m)),p=ma(e,n),p!=null&&l.push(Ka(e,p,m))),e.tag===3)return l;e=e.return}return[]}function kb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gg(e,n,a,l,p){for(var m=n._reactName,v=[];a!==null&&a!==l;){var E=a,M=E.alternate,U=E.stateNode;if(E=E.tag,M!==null&&M===l)break;E!==5&&E!==26&&E!==27||U===null||(M=U,p?(U=ma(a,m),U!=null&&v.unshift(Ka(a,U,M))):p||(U=ma(a,m),U!=null&&v.push(Ka(a,U,M)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var Bb=/\r\n?/g,Pb=/\u0000|\uFFFD/g;function mg(e){return(typeof e=="string"?e:""+e).replace(Bb,`
`).replace(Pb,"")}function yg(e,n){return n=mg(n),mg(e)===n}function Ft(e,n,a,l,p,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||gs(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&gs(e,""+l);break;case"className":Fr(e,"class",l);break;case"tabIndex":Fr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Fr(e,a,l);break;case"style":md(e,l,m);break;case"data":if(n!=="object"){Fr(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ir(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&Ft(e,n,"name",p.name,p,null),Ft(e,n,"formEncType",p.formEncType,p,null),Ft(e,n,"formMethod",p.formMethod,p,null),Ft(e,n,"formTarget",p.formTarget,p,null)):(Ft(e,n,"encType",p.encType,p,null),Ft(e,n,"method",p.method,p,null),Ft(e,n,"target",p.target,p,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ir(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=ki);break;case"onScroll":l!=null&&_t("scroll",e);break;case"onScrollEnd":l!=null&&_t("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Ir(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":_t("beforetoggle",e),_t("toggle",e),zr(e,"popover",l);break;case"xlinkActuate":Li(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Li(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Li(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Li(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Li(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Li(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Li(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Li(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Li(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":zr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=u0.get(a)||a,zr(e,a,l))}}function Tu(e,n,a,l,p,m){switch(a){case"style":md(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?gs(e,l):(typeof l=="number"||typeof l=="bigint")&&gs(e,""+l);break;case"onScroll":l!=null&&_t("scroll",e);break;case"onScrollEnd":l!=null&&_t("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!od.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),n=a.slice(2,p?a.length-7:void 0),m=e[Oe]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(n,m,p),typeof l=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,p);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):zr(e,a,l)}}}function Se(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",e),_t("load",e);var l=!1,p=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ft(e,n,m,v,a,null)}}p&&Ft(e,n,"srcSet",a.srcSet,a,null),l&&Ft(e,n,"src",a.src,a,null);return;case"input":_t("invalid",e);var E=m=v=p=null,M=null,U=null;for(l in a)if(a.hasOwnProperty(l)){var V=a[l];if(V!=null)switch(l){case"name":p=V;break;case"type":v=V;break;case"checked":M=V;break;case"defaultChecked":U=V;break;case"value":m=V;break;case"defaultValue":E=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,n));break;default:Ft(e,n,l,V,a,null)}}dd(e,m,E,M,U,v,p,!1);return;case"select":_t("invalid",e),l=v=m=null;for(p in a)if(a.hasOwnProperty(p)&&(E=a[p],E!=null))switch(p){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:Ft(e,n,p,E,a,null)}n=m,a=v,e.multiple=!!l,n!=null?ps(e,!!l,n,!1):a!=null&&ps(e,!!l,a,!0);return;case"textarea":_t("invalid",e),m=p=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":p=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Ft(e,n,v,E,a,null)}pd(e,l,p,m);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ft(e,n,M,l,a,null)}return;case"dialog":_t("beforetoggle",e),_t("toggle",e),_t("cancel",e),_t("close",e);break;case"iframe":case"object":_t("load",e);break;case"video":case"audio":for(l=0;l<$a.length;l++)_t($a[l],e);break;case"image":_t("error",e),_t("load",e);break;case"details":_t("toggle",e);break;case"embed":case"source":case"link":_t("error",e),_t("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ft(e,n,U,l,a,null)}return;default:if(jl(n)){for(V in a)a.hasOwnProperty(V)&&(l=a[V],l!==void 0&&Tu(e,n,V,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Ft(e,n,E,l,a,null))}function zb(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,v=null,E=null,M=null,U=null,V=null;for(G in a){var $=a[G];if(a.hasOwnProperty(G)&&$!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":M=$;default:l.hasOwnProperty(G)||Ft(e,n,G,null,l,$)}}for(var I in l){var G=l[I];if($=a[I],l.hasOwnProperty(I)&&(G!=null||$!=null))switch(I){case"type":m=G;break;case"name":p=G;break;case"checked":U=G;break;case"defaultChecked":V=G;break;case"value":v=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:G!==$&&Ft(e,n,I,G,l,$)}}Ul(e,v,E,M,U,V,m,p);return;case"select":G=v=E=I=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":G=M;default:l.hasOwnProperty(m)||Ft(e,n,m,null,l,M)}for(p in l)if(m=l[p],M=a[p],l.hasOwnProperty(p)&&(m!=null||M!=null))switch(p){case"value":I=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==M&&Ft(e,n,p,m,l,M)}n=E,a=v,l=G,I!=null?ps(e,!!a,I,!1):!!l!=!!a&&(n!=null?ps(e,!!a,n,!0):ps(e,!!a,a?[]:"",!1));return;case"textarea":G=I=null;for(E in a)if(p=a[E],a.hasOwnProperty(E)&&p!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ft(e,n,E,null,l,p)}for(v in l)if(p=l[v],m=a[v],l.hasOwnProperty(v)&&(p!=null||m!=null))switch(v){case"value":I=p;break;case"defaultValue":G=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&Ft(e,n,v,p,l,m)}fd(e,I,G);return;case"option":for(var it in a)if(I=a[it],a.hasOwnProperty(it)&&I!=null&&!l.hasOwnProperty(it))switch(it){case"selected":e.selected=!1;break;default:Ft(e,n,it,null,l,I)}for(M in l)if(I=l[M],G=a[M],l.hasOwnProperty(M)&&I!==G&&(I!=null||G!=null))switch(M){case"selected":e.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Ft(e,n,M,I,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in a)I=a[ut],a.hasOwnProperty(ut)&&I!=null&&!l.hasOwnProperty(ut)&&Ft(e,n,ut,null,l,I);for(U in l)if(I=l[U],G=a[U],l.hasOwnProperty(U)&&I!==G&&(I!=null||G!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,n));break;default:Ft(e,n,U,I,l,G)}return;default:if(jl(n)){for(var Ut in a)I=a[Ut],a.hasOwnProperty(Ut)&&I!==void 0&&!l.hasOwnProperty(Ut)&&Tu(e,n,Ut,void 0,l,I);for(V in l)I=l[V],G=a[V],!l.hasOwnProperty(V)||I===G||I===void 0&&G===void 0||Tu(e,n,V,I,l,G);return}}for(var P in a)I=a[P],a.hasOwnProperty(P)&&I!=null&&!l.hasOwnProperty(P)&&Ft(e,n,P,null,l,I);for($ in l)I=l[$],G=a[$],!l.hasOwnProperty($)||I===G||I==null&&G==null||Ft(e,n,$,I,l,G)}function bg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var p=a[l],m=p.transferSize,v=p.initiatorType,E=p.duration;if(m&&E&&bg(v)){for(v=0,E=p.responseEnd,l+=1;l<a.length;l++){var M=a[l],U=M.startTime;if(U>E)break;var V=M.transferSize,$=M.initiatorType;V&&bg($)&&(M=M.responseEnd,v+=V*(M<E?1:(E-U)/(M-U)))}if(--l,n+=8*(m+v)/(p.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Mu=null,Ru=null;function Po(e){return e.nodeType===9?e:e.ownerDocument}function vg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ag(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Du(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Nu=null;function Ub(){var e=window.event;return e&&e.type==="popstate"?e===Nu?!1:(Nu=e,!0):(Nu=null,!1)}var Sg=typeof setTimeout=="function"?setTimeout:void 0,Ib=typeof clearTimeout=="function"?clearTimeout:void 0,wg=typeof Promise=="function"?Promise:void 0,jb=typeof queueMicrotask=="function"?queueMicrotask:typeof wg<"u"?function(e){return wg.resolve(null).then(e).catch(Hb)}:Sg;function Hb(e){setTimeout(function(){throw e})}function xn(e){return e==="head"}function xg(e,n){var a=n,l=0;do{var p=a.nextSibling;if(e.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(p),Xs(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Qa(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Qa(a);for(var m=a.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[pa]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&Qa(e.ownerDocument.body);a=p}while(a);Xs(n)}function _g(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Ou(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ou(a),zl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Gb(e,n,a,l){for(;e.nodeType===1;){var p=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[pa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=ci(e.nextSibling),e===null)break}return null}function qb(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ci(e.nextSibling),e===null))return null;return e}function Eg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ci(e.nextSibling),e===null))return null;return e}function Lu(e){return e.data==="$?"||e.data==="$~"}function ku(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Vb(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ci(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Bu=null;function Cg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return ci(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function Tg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function Mg(e,n,a){switch(n=Po(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Qa(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);zl(e)}var ui=new Map,Rg=new Set;function zo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Qi=X.d;X.d={f:Xb,r:Yb,D:$b,C:Kb,L:Qb,m:Wb,X:Jb,S:Zb,M:tv};function Xb(){var e=Qi.f(),n=Mo();return e||n}function Yb(e){var n=hs(e);n!==null&&n.tag===5&&n.type==="form"?Xf(n):Qi.r(e)}var Gs=typeof document>"u"?null:document;function Dg(e,n,a){var l=Gs;if(l&&typeof n=="string"&&n){var p=ii(n);p='link[rel="'+e+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),Rg.has(p)||(Rg.add(p),e={rel:e,crossOrigin:a,href:n},l.querySelector(p)===null&&(n=l.createElement("link"),Se(n,"link",e),de(n),l.head.appendChild(n)))}}function $b(e){Qi.D(e),Dg("dns-prefetch",e,null)}function Kb(e,n){Qi.C(e,n),Dg("preconnect",e,n)}function Qb(e,n,a){Qi.L(e,n,a);var l=Gs;if(l&&e&&n){var p='link[rel="preload"][as="'+ii(n)+'"]';n==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+ii(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+ii(a.imageSizes)+'"]')):p+='[href="'+ii(e)+'"]';var m=p;switch(n){case"style":m=qs(e);break;case"script":m=Vs(e)}ui.has(m)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),ui.set(m,e),l.querySelector(p)!==null||n==="style"&&l.querySelector(Wa(m))||n==="script"&&l.querySelector(Za(m))||(n=l.createElement("link"),Se(n,"link",e),de(n),l.head.appendChild(n)))}}function Wb(e,n){Qi.m(e,n);var a=Gs;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+ii(l)+'"][href="'+ii(e)+'"]',m=p;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Vs(e)}if(!ui.has(m)&&(e=y({rel:"modulepreload",href:e},n),ui.set(m,e),a.querySelector(p)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Za(m)))return}l=a.createElement("link"),Se(l,"link",e),de(l),a.head.appendChild(l)}}}function Zb(e,n,a){Qi.S(e,n,a);var l=Gs;if(l&&e){var p=ds(l).hoistableStyles,m=qs(e);n=n||"default";var v=p.get(m);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(Wa(m)))E.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=ui.get(m))&&Pu(e,a);var M=v=l.createElement("link");de(M),Se(M,"link",e),M._p=new Promise(function(U,V){M.onload=U,M.onerror=V}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Fo(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:E},p.set(m,v)}}}function Jb(e,n){Qi.X(e,n);var a=Gs;if(a&&e){var l=ds(a).hoistableScripts,p=Vs(e),m=l.get(p);m||(m=a.querySelector(Za(p)),m||(e=y({src:e,async:!0},n),(n=ui.get(p))&&zu(e,n),m=a.createElement("script"),de(m),Se(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function tv(e,n){Qi.M(e,n);var a=Gs;if(a&&e){var l=ds(a).hoistableScripts,p=Vs(e),m=l.get(p);m||(m=a.querySelector(Za(p)),m||(e=y({src:e,async:!0,type:"module"},n),(n=ui.get(p))&&zu(e,n),m=a.createElement("script"),de(m),Se(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function Ng(e,n,a,l){var p=(p=ht.current)?zo(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=qs(a.href),a=ds(p).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=qs(a.href);var m=ds(p).hoistableStyles,v=m.get(e);if(v||(p=p.ownerDocument||p,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=p.querySelector(Wa(e)))&&!m._p&&(v.instance=m,v.state.loading=5),ui.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ui.set(e,a),m||ev(p,e,a,v.state))),n&&l===null)throw Error(s(528,""));return v}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Vs(a),a=ds(p).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function qs(e){return'href="'+ii(e)+'"'}function Wa(e){return'link[rel="stylesheet"]['+e+"]"}function Og(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function ev(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Se(n,"link",a),de(n),e.head.appendChild(n))}function Vs(e){return'[src="'+ii(e)+'"]'}function Za(e){return"script[async]"+e}function Lg(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+ii(a.href)+'"]');if(l)return n.instance=l,de(l),l;var p=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),de(l),Se(l,"style",p),Fo(l,a.precedence,e),n.instance=l;case"stylesheet":p=qs(a.href);var m=e.querySelector(Wa(p));if(m)return n.state.loading|=4,n.instance=m,de(m),m;l=Og(a),(p=ui.get(p))&&Pu(l,p),m=(e.ownerDocument||e).createElement("link"),de(m);var v=m;return v._p=new Promise(function(E,M){v.onload=E,v.onerror=M}),Se(m,"link",l),n.state.loading|=4,Fo(m,a.precedence,e),n.instance=m;case"script":return m=Vs(a.src),(p=e.querySelector(Za(m)))?(n.instance=p,de(p),p):(l=a,(p=ui.get(m))&&(l=y({},a),zu(l,p)),e=e.ownerDocument||e,p=e.createElement("script"),de(p),Se(p,"link",l),e.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Fo(l,a.precedence,e));return n.instance}function Fo(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=l.length?l[l.length-1]:null,m=p,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===n)m=E;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Pu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function zu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Uo=null;function kg(e,n,a){if(Uo===null){var l=new Map,p=Uo=new Map;p.set(a,l)}else p=Uo,l=p.get(a),l||(l=new Map,p.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),p=0;p<a.length;p++){var m=a[p];if(!(m[pa]||m[ye]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=e+v;var E=l.get(v);E?E.push(m):l.set(v,[m])}}return l}function Bg(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function iv(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Pg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function nv(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=qs(l.href),m=n.querySelector(Wa(p));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Io.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=m,de(m);return}m=n.ownerDocument||n,l=Og(l),(p=ui.get(p))&&Pu(l,p),m=m.createElement("link"),de(m);var v=m;v._p=new Promise(function(E,M){v.onload=E,v.onerror=M}),Se(m,"link",l),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Io.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Fu=0;function sv(e,n){return e.stylesheets&&e.count===0&&Ho(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Ho(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&Fu===0&&(Fu=62500*Fb());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ho(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Fu?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(p)}}:null}function Io(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ho(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var jo=null;function Ho(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,jo=new Map,n.forEach(av,e),jo=null,Io.call(e))}function av(e,n){if(!(n.state.loading&4)){var a=jo.get(e);if(a)var l=a.get(null);else{a=new Map,jo.set(e,a);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var v=p[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}p=n.instance,v=p.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,p),a.set(v,p),this.count++,l=Io.bind(this),p.addEventListener("load",l),p.addEventListener("error",l),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),n.state.loading|=4}}var Ja={$$typeof:C,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function rv(e,n,a,l,p,m,v,E,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ll(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.hiddenUpdates=Ll(null),this.identifierPrefix=l,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function zg(e,n,a,l,p,m,v,E,M,U,V,$){return e=new rv(e,n,a,v,M,U,V,$,E),n=1,m===!0&&(n|=24),m=Xe(3,null,null,n),e.current=m,m.stateNode=e,n=yc(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},Sc(m),e}function Fg(e){return e?(e=ws,e):ws}function Ug(e,n,a,l,p,m){p=Fg(p),l.context===null?l.context=p:l.pendingContext=p,l=dn(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=fn(e,l,n),a!==null&&(Fe(a,e,n),Na(a,e,n))}function Ig(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Uu(e,n){Ig(e,n),(e=e.alternate)&&Ig(e,n)}function jg(e){if(e.tag===13||e.tag===31){var n=jn(e,67108864);n!==null&&Fe(n,e,67108864),Uu(e,67108864)}}function Hg(e){if(e.tag===13||e.tag===31){var n=We();n=kl(n);var a=jn(e,n);a!==null&&Fe(a,e,n),Uu(e,n)}}var Go=!0;function ov(e,n,a,l){var p=z.T;z.T=null;var m=X.p;try{X.p=2,Iu(e,n,a,l)}finally{X.p=m,z.T=p}}function lv(e,n,a,l){var p=z.T;z.T=null;var m=X.p;try{X.p=8,Iu(e,n,a,l)}finally{X.p=m,z.T=p}}function Iu(e,n,a,l){if(Go){var p=ju(l);if(p===null)Cu(e,n,l,qo,a),qg(e,l);else if(uv(p,e,n,a,l))l.stopPropagation();else if(qg(e,l),n&4&&-1<cv.indexOf(e)){for(;p!==null;){var m=hs(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Pn(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var M=1<<31-qe(v);E.entanglements[1]|=M,v&=~M}xi(m),(Ot&6)===0&&(Co=He()+500,Ya(0))}}break;case 31:case 13:E=jn(m,2),E!==null&&Fe(E,m,2),Mo(),Uu(m,2)}if(m=ju(l),m===null&&Cu(e,n,l,qo,a),m===p)break;p=m}p!==null&&l.stopPropagation()}else Cu(e,n,l,null,a)}}function ju(e){return e=Gl(e),Hu(e)}var qo=null;function Hu(e){if(qo=null,e=us(e),e!==null){var n=o(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=c(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return qo=e,null}function Gg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($y()){case Qh:return 2;case Wh:return 8;case Or:case Ky:return 32;case Zh:return 268435456;default:return 32}default:return 32}}var Gu=!1,_n=null,En=null,Cn=null,tr=new Map,er=new Map,Tn=[],cv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qg(e,n){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":tr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(n.pointerId)}}function ir(e,n,a,l,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[p]},n!==null&&(n=hs(n),n!==null&&jg(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function uv(e,n,a,l,p){switch(n){case"focusin":return _n=ir(_n,e,n,a,l,p),!0;case"dragenter":return En=ir(En,e,n,a,l,p),!0;case"mouseover":return Cn=ir(Cn,e,n,a,l,p),!0;case"pointerover":var m=p.pointerId;return tr.set(m,ir(tr.get(m)||null,e,n,a,l,p)),!0;case"gotpointercapture":return m=p.pointerId,er.set(m,ir(er.get(m)||null,e,n,a,l,p)),!0}return!1}function Vg(e){var n=us(e.target);if(n!==null){var a=o(n);if(a!==null){if(n=a.tag,n===13){if(n=c(a),n!==null){e.blockedOn=n,sd(e.priority,function(){Hg(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,sd(e.priority,function(){Hg(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=ju(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Hl=l,a.target.dispatchEvent(l),Hl=null}else return n=hs(a),n!==null&&jg(n),e.blockedOn=a,!1;n.shift()}return!0}function Xg(e,n,a){Vo(e)&&a.delete(n)}function hv(){Gu=!1,_n!==null&&Vo(_n)&&(_n=null),En!==null&&Vo(En)&&(En=null),Cn!==null&&Vo(Cn)&&(Cn=null),tr.forEach(Xg),er.forEach(Xg)}function Xo(e,n){e.blockedOn===n&&(e.blockedOn=null,Gu||(Gu=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,hv)))}var Yo=null;function Yg(e){Yo!==e&&(Yo=e,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){Yo===e&&(Yo=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],p=e[n+2];if(typeof l!="function"){if(Hu(l||a)===null)continue;break}var m=hs(a);m!==null&&(e.splice(n,3),n-=3,jc(m,{pending:!0,data:p,method:a.method,action:l},l,p))}}))}function Xs(e){function n(M){return Xo(M,e)}_n!==null&&Xo(_n,e),En!==null&&Xo(En,e),Cn!==null&&Xo(Cn,e),tr.forEach(n),er.forEach(n);for(var a=0;a<Tn.length;a++){var l=Tn[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Tn.length&&(a=Tn[0],a.blockedOn===null);)Vg(a),a.blockedOn===null&&Tn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var p=a[l],m=a[l+1],v=p[Oe]||null;if(typeof m=="function")v||Yg(a);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(p=m,v=m[Oe]||null)E=v.formAction;else if(Hu(p)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),Yg(a)}}}function $g(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return p=v})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function qu(e){this._internalRoot=e}$o.prototype.render=qu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,l=We();Ug(a,l,e,n,null,null)},$o.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ug(e.current,2,null,e,null,null),Mo(),n[cs]=null}};function $o(e){this._internalRoot=e}$o.prototype.unstable_scheduleHydration=function(e){if(e){var n=nd();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Tn.length&&n!==0&&n<Tn[a].priority;a++);Tn.splice(a,0,e),a===0&&Vg(e)}};var Kg=t.version;if(Kg!=="19.2.1")throw Error(s(527,Kg,"19.2.1"));X.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var dv={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{ha=Ko.inject(dv),Ge=Ko}catch{}}return sr.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,l="",p=ip,m=np,v=sp;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=zg(e,1,!1,null,null,a,l,null,p,m,v,$g),e[cs]=n.current,Eu(e),new qu(n)},sr.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var l=!1,p="",m=ip,v=np,E=sp,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),n=zg(e,1,!0,n,a??null,l,p,M,m,v,E,$g),n.context=Fg(null),a=n.current,l=We(),l=kl(l),p=dn(l),p.callback=null,fn(a,p,l),a=l,n.current.lanes=a,fa(n,a),xi(n),e[cs]=n.current,Eu(e),new $o(n)},sr.version="19.2.1",sr}var om;function wv(){if(om)return $u.exports;om=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),$u.exports=Sv(),$u.exports}var xv=wv();const _v=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ev=d=>d.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,s)=>s?s.toUpperCase():i.toLowerCase()),lm=d=>{const t=Ev(d);return t.charAt(0).toUpperCase()+t.slice(1)},Hm=(...d)=>d.filter((t,i,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===i).join(" ").trim(),Cv=d=>{for(const t in d)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Tv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Mv=j.forwardRef(({color:d="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:c,...u},h)=>j.createElement("svg",{ref:h,...Tv,width:t,height:t,stroke:d,strokeWidth:s?Number(i)*24/Number(t):i,className:Hm("lucide",r),...!o&&!Cv(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>j.createElement(f,g)),...Array.isArray(o)?o:[o]]));const me=(d,t)=>{const i=j.forwardRef(({className:s,...r},o)=>j.createElement(Mv,{ref:o,iconNode:t,className:Hm(`lucide-${_v(lm(d))}`,`lucide-${d}`,s),...r}));return i.displayName=lm(d),i};const Rv=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Gm=me("award",Rv);const Dv=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],qm=me("book-open",Dv);const Nv=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Vm=me("brain",Nv);const Ov=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Xm=me("calculator",Ov);const Lv=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],kv=me("chart-no-axes-column",Lv);const Bv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ym=me("chevron-right",Bv);const Pv=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zv=me("chevron-left",Pv);const Fv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Uv=me("circle-alert",Fv);const Iv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zs=me("circle-check-big",Iv);const jv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ch=me("circle-x",jv);const Hv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$m=me("clock",Hv);const Gv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],qv=me("globe",Gv);const Vv=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Km=me("house",Vv);const Xv=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Yv=me("log-in",Xv);const $v=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Kv=me("log-out",$v);const Qv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Wv=me("refresh-cw",Qv);const Zv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Jv=me("rotate-ccw",Zv);const tA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],eA=me("user-plus",tA);var cm="popstate";function iA(d={}){function t(r,o){let{pathname:c="/",search:u="",hash:h=""}=rs(r.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),uh("",{pathname:c,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(r,o){let c=r.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:mr(o))}function s(r,o){ti(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return sA(t,i,s,d)}function Kt(d,t){if(d===!1||d===null||typeof d>"u")throw new Error(t)}function ti(d,t){if(!d){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nA(){return Math.random().toString(36).substring(2,10)}function um(d,t){return{usr:d.state,key:d.key,idx:t}}function uh(d,t,i=null,s){return{pathname:typeof d=="string"?d:d.pathname,search:"",hash:"",...typeof t=="string"?rs(t):t,state:i,key:t&&t.key||s||nA()}}function mr({pathname:d="/",search:t="",hash:i=""}){return t&&t!=="?"&&(d+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(d+=i.charAt(0)==="#"?i:"#"+i),d}function rs(d){let t={};if(d){let i=d.indexOf("#");i>=0&&(t.hash=d.substring(i),d=d.substring(0,i));let s=d.indexOf("?");s>=0&&(t.search=d.substring(s),d=d.substring(0,s)),d&&(t.pathname=d)}return t}function sA(d,t,i,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,c=r.history,u="POP",h=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let _=g(),x=_==null?null:_-f;f=_,h&&h({action:u,location:S.location,delta:x})}function b(_,x){u="PUSH";let T=uh(S.location,_,x);i&&i(T,_),f=g()+1;let C=um(T,f),D=S.createHref(T);try{c.pushState(C,"",D)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(D)}o&&h&&h({action:u,location:S.location,delta:1})}function A(_,x){u="REPLACE";let T=uh(S.location,_,x);i&&i(T,_),f=g();let C=um(T,f),D=S.createHref(T);c.replaceState(C,"",D),o&&h&&h({action:u,location:S.location,delta:0})}function w(_){return aA(_)}let S={get action(){return u},get location(){return d(r,c)},listen(_){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(cm,y),h=_,()=>{r.removeEventListener(cm,y),h=null}},createHref(_){return t(r,_)},createURL:w,encodeLocation(_){let x=w(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:b,replace:A,go(_){return c.go(_)}};return S}function aA(d,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(i,"No window.location.(origin|href) available to create URL");let s=typeof d=="string"?d:mr(d);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Qm(d,t,i="/"){return rA(d,t,i,!1)}function rA(d,t,i,s){let r=typeof t=="string"?rs(t):t,o=en(r.pathname||"/",i);if(o==null)return null;let c=Wm(d);oA(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=bA(o);u=mA(c[h],f,s)}return u}function Wm(d,t=[],i=[],s="",r=!1){let o=(c,u,h=r,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&h)return;Kt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=tn([s,g.relativePath]),b=i.concat(g);c.children&&c.children.length>0&&(Kt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Wm(c.children,t,b,y,h)),!(c.path==null&&!c.index)&&t.push({path:y,score:pA(y,c.index),routesMeta:b})};return d.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let h of Zm(c.path))o(c,u,!0,h)}),t}function Zm(d){let t=d.split("/");if(t.length===0)return[];let[i,...s]=t,r=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let c=Zm(s.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...c),u.map(h=>d.startsWith("/")&&h===""?"/":h)}function oA(d){d.sort((t,i)=>t.score!==i.score?i.score-t.score:gA(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var lA=/^:[\w-]+$/,cA=3,uA=2,hA=1,dA=10,fA=-2,hm=d=>d==="*";function pA(d,t){let i=d.split("/"),s=i.length;return i.some(hm)&&(s+=fA),t&&(s+=uA),i.filter(r=>!hm(r)).reduce((r,o)=>r+(lA.test(o)?cA:o===""?hA:dA),s)}function gA(d,t){return d.length===t.length&&d.slice(0,-1).every((s,r)=>s===t[r])?d[d.length-1]-t[t.length-1]:0}function mA(d,t,i=!1){let{routesMeta:s}=d,r={},o="/",c=[];for(let u=0;u<s.length;++u){let h=s[u],f=u===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=dl({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),b=h.route;if(!y&&f&&i&&!s[s.length-1].route.index&&(y=dl({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(r,y.params),c.push({params:r,pathname:tn([o,y.pathname]),pathnameBase:xA(tn([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=tn([o,y.pathnameBase]))}return c}function dl(d,t){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[i,s]=yA(d.path,d.caseSensitive,d.end),r=t.match(i);if(!r)return null;let o=r[0],c=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:y},b)=>{if(g==="*"){let w=u[b]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const A=u[b];return y&&!A?f[g]=void 0:f[g]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:d}}function yA(d,t=!1,i=!0){ti(d==="*"||!d.endsWith("*")||d.endsWith("/*"),`Route path "${d}" will be treated as if it were "${d.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${d.replace(/\*$/,"/*")}".`);let s=[],r="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return d.endsWith("*")?(s.push({paramName:"*"}),r+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":d!==""&&d!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function bA(d){try{return d.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ti(!1,`The URL path "${d}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),d}}function en(d,t){if(t==="/")return d;if(!d.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=d.charAt(i);return s&&s!=="/"?null:d.slice(i)||"/"}var vA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AA=d=>vA.test(d);function SA(d,t="/"){let{pathname:i,search:s="",hash:r=""}=typeof d=="string"?rs(d):d,o;if(i)if(AA(i))o=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),ti(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?o=dm(i.substring(1),"/"):o=dm(i,t)}else o=t;return{pathname:o,search:_A(s),hash:EA(r)}}function dm(d,t){let i=t.replace(/\/+$/,"").split("/");return d.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function Zu(d,t,i,s){return`Cannot include a '${d}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wA(d){return d.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Th(d){let t=wA(d);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function Mh(d,t,i,s=!1){let r;typeof d=="string"?r=rs(d):(r={...d},Kt(!r.pathname||!r.pathname.includes("?"),Zu("?","pathname","search",r)),Kt(!r.pathname||!r.pathname.includes("#"),Zu("#","pathname","hash",r)),Kt(!r.search||!r.search.includes("#"),Zu("#","search","hash",r)));let o=d===""||r.pathname==="",c=o?"/":r.pathname,u;if(c==null)u=i;else{let y=t.length-1;if(!s&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;r.pathname=b.join("/")}u=y>=0?t[y]:"/"}let h=SA(r,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var tn=d=>d.join("/").replace(/\/\/+/g,"/"),xA=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),_A=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,EA=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function CA(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}function TA(d){return d.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Jm=["POST","PUT","PATCH","DELETE"];new Set(Jm);var MA=["GET",...Jm];new Set(MA);var la=j.createContext(null);la.displayName="DataRouter";var yl=j.createContext(null);yl.displayName="DataRouterState";j.createContext(!1);var ty=j.createContext({isTransitioning:!1});ty.displayName="ViewTransition";var RA=j.createContext(new Map);RA.displayName="Fetchers";var DA=j.createContext(null);DA.displayName="Await";var gi=j.createContext(null);gi.displayName="Navigation";var wr=j.createContext(null);wr.displayName="Location";var Ni=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ni.displayName="Route";var Rh=j.createContext(null);Rh.displayName="RouteError";function NA(d,{relative:t}={}){Kt(ca(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=j.useContext(gi),{hash:r,pathname:o,search:c}=_r(d,{relative:t}),u=o;return i!=="/"&&(u=o==="/"?i:tn([i,o])),s.createHref({pathname:u,search:c,hash:r})}function ca(){return j.useContext(wr)!=null}function Ln(){return Kt(ca(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(wr).location}var ey="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iy(d){j.useContext(gi).static||j.useLayoutEffect(d)}function xr(){let{isDataRoute:d}=j.useContext(Ni);return d?qA():OA()}function OA(){Kt(ca(),"useNavigate() may be used only in the context of a <Router> component.");let d=j.useContext(la),{basename:t,navigator:i}=j.useContext(gi),{matches:s}=j.useContext(Ni),{pathname:r}=Ln(),o=JSON.stringify(Th(s)),c=j.useRef(!1);return iy(()=>{c.current=!0}),j.useCallback((h,f={})=>{if(ti(c.current,ey),!c.current)return;if(typeof h=="number"){i.go(h);return}let g=Mh(h,JSON.parse(o),r,f.relative==="path");d==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:tn([t,g.pathname])),(f.replace?i.replace:i.push)(g,f.state,f)},[t,i,o,r,d])}j.createContext(null);function _r(d,{relative:t}={}){let{matches:i}=j.useContext(Ni),{pathname:s}=Ln(),r=JSON.stringify(Th(i));return j.useMemo(()=>Mh(d,JSON.parse(r),s,t==="path"),[d,r,s,t])}function LA(d,t){return ny(d,t)}function ny(d,t,i,s,r){Kt(ca(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(gi),{matches:c}=j.useContext(Ni),u=c[c.length-1],h=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let T=y&&y.path||"";sy(f,!y||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=Ln(),A;if(t){let T=typeof t=="string"?rs(t):t;Kt(g==="/"||T.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),A=T}else A=b;let w=A.pathname||"/",S=w;if(g!=="/"){let T=g.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=Qm(d,{pathname:S});ti(y||_!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),ti(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=FA(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:tn([g,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:tn([g,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),c,i,s,r);return t&&x?j.createElement(wr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},x):x}function kA(){let d=GA(),t=CA(d)?`${d.status} ${d.statusText}`:d instanceof Error?d.message:JSON.stringify(d),i=d instanceof Error?d.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",d),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),i?j.createElement("pre",{style:r},i):null,c)}var BA=j.createElement(kA,null),PA=class extends j.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,t){return t.location!==d.location||t.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:t.error,location:t.location,revalidation:d.revalidation||t.revalidation}}componentDidCatch(d,t){this.props.onError?this.props.onError(d,t):console.error("React Router caught the following error during render",d)}render(){return this.state.error!==void 0?j.createElement(Ni.Provider,{value:this.props.routeContext},j.createElement(Rh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zA({routeContext:d,match:t,children:i}){let s=j.useContext(la);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Ni.Provider,{value:d},i)}function FA(d,t=[],i=null,s=null,r=null){if(d==null){if(!i)return null;if(i.errors)d=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)d=i.matches;else return null}let o=d,c=i?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Kt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,h=-1;if(i)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=g),y.route.id){let{loaderData:b,errors:A}=i,w=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||w){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=i&&s?(g,y)=>{s(g,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:TA(i.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,b)=>{let A,w=!1,S=null,_=null;i&&(A=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||BA,u&&(h<0&&b===0?(sy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,_=null):h===b&&(w=!0,_=y.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,b+1)),T=()=>{let C;return A?C=S:w?C=_:y.route.Component?C=j.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=g,j.createElement(zA,{match:y,routeContext:{outlet:g,matches:x,isDataRoute:i!=null},children:C})};return i&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?j.createElement(PA,{location:i.location,revalidation:i.revalidation,component:S,error:A,children:T(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:f}):T()},null)}function Dh(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UA(d){let t=j.useContext(la);return Kt(t,Dh(d)),t}function IA(d){let t=j.useContext(yl);return Kt(t,Dh(d)),t}function jA(d){let t=j.useContext(Ni);return Kt(t,Dh(d)),t}function Nh(d){let t=jA(d),i=t.matches[t.matches.length-1];return Kt(i.route.id,`${d} can only be used on routes that contain a unique "id"`),i.route.id}function HA(){return Nh("useRouteId")}function GA(){let d=j.useContext(Rh),t=IA("useRouteError"),i=Nh("useRouteError");return d!==void 0?d:t.errors?.[i]}function qA(){let{router:d}=UA("useNavigate"),t=Nh("useNavigate"),i=j.useRef(!1);return iy(()=>{i.current=!0}),j.useCallback(async(r,o={})=>{ti(i.current,ey),i.current&&(typeof r=="number"?await d.navigate(r):await d.navigate(r,{fromRouteId:t,...o}))},[d,t])}var fm={};function sy(d,t,i){!t&&!fm[d]&&(fm[d]=!0,ti(!1,i))}j.memo(VA);function VA({routes:d,future:t,state:i,unstable_onError:s}){return ny(d,void 0,i,s,t)}function XA({to:d,replace:t,state:i,relative:s}){Kt(ca(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=j.useContext(gi);ti(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=j.useContext(Ni),{pathname:c}=Ln(),u=xr(),h=Mh(d,Th(o),c,s==="path"),f=JSON.stringify(h);return j.useEffect(()=>{u(JSON.parse(f),{replace:t,state:i,relative:s})},[u,f,s,t,i]),null}function hr(d){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YA({basename:d="/",children:t=null,location:i,navigationType:s="POP",navigator:r,static:o=!1,unstable_useTransitions:c}){Kt(!ca(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=d.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:u,navigator:r,static:o,unstable_useTransitions:c,future:{}}),[u,r,o,c]);typeof i=="string"&&(i=rs(i));let{pathname:f="/",search:g="",hash:y="",state:b=null,key:A="default"}=i,w=j.useMemo(()=>{let S=en(f,u);return S==null?null:{location:{pathname:S,search:g,hash:y,state:b,key:A},navigationType:s}},[u,f,g,y,b,A,s]);return ti(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:j.createElement(gi.Provider,{value:h},j.createElement(wr.Provider,{children:t,value:w}))}function $A({children:d,location:t}){return LA(hh(d),t)}function hh(d,t=[]){let i=[];return j.Children.forEach(d,(s,r)=>{if(!j.isValidElement(s))return;let o=[...t,r];if(s.type===j.Fragment){i.push.apply(i,hh(s.props.children,o));return}Kt(s.type===hr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=hh(s.props.children,o)),i.push(c)}),i}var ol="get",ll="application/x-www-form-urlencoded";function bl(d){return typeof HTMLElement<"u"&&d instanceof HTMLElement}function KA(d){return bl(d)&&d.tagName.toLowerCase()==="button"}function QA(d){return bl(d)&&d.tagName.toLowerCase()==="form"}function WA(d){return bl(d)&&d.tagName.toLowerCase()==="input"}function ZA(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}function JA(d,t){return d.button===0&&(!t||t==="_self")&&!ZA(d)}var Qo=null;function tS(){if(Qo===null)try{new FormData(document.createElement("form"),0),Qo=!1}catch{Qo=!0}return Qo}var eS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ju(d){return d!=null&&!eS.has(d)?(ti(!1,`"${d}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ll}"`),null):d}function iS(d,t){let i,s,r,o,c;if(QA(d)){let u=d.getAttribute("action");s=u?en(u,t):null,i=d.getAttribute("method")||ol,r=Ju(d.getAttribute("enctype"))||ll,o=new FormData(d)}else if(KA(d)||WA(d)&&(d.type==="submit"||d.type==="image")){let u=d.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=d.getAttribute("formaction")||u.getAttribute("action");if(s=h?en(h,t):null,i=d.getAttribute("formmethod")||u.getAttribute("method")||ol,r=Ju(d.getAttribute("formenctype"))||Ju(u.getAttribute("enctype"))||ll,o=new FormData(u,d),!tS()){let{name:f,type:g,value:y}=d;if(g==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,y)}}else{if(bl(d))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ol,s=null,r=ll,c=d}return o&&r==="text/plain"&&(c=o,o=void 0),{action:s,method:i.toLowerCase(),encType:r,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Oh(d,t){if(d===!1||d===null||typeof d>"u")throw new Error(t)}function nS(d,t,i){let s=typeof d=="string"?new URL(d,typeof window>"u"?"server://singlefetch/":window.location.origin):d;return s.pathname==="/"?s.pathname=`_root.${i}`:t&&en(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function sS(d,t){if(d.id in t)return t[d.id];try{let i=await import(d.module);return t[d.id]=i,i}catch(i){return console.error(`Error loading route module \`${d.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aS(d){return d==null?!1:d.href==null?d.rel==="preload"&&typeof d.imageSrcSet=="string"&&typeof d.imageSizes=="string":typeof d.rel=="string"&&typeof d.href=="string"}async function rS(d,t,i){let s=await Promise.all(d.map(async r=>{let o=t.routes[r.route.id];if(o){let c=await sS(o,i);return c.links?c.links():[]}return[]}));return uS(s.flat(1).filter(aS).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function pm(d,t,i,s,r,o){let c=(h,f)=>i[f]?h.route.id!==i[f].route.id:!0,u=(h,f)=>i[f].pathname!==h.pathname||i[f].route.path?.endsWith("*")&&i[f].params["*"]!==h.params["*"];return o==="assets"?t.filter((h,f)=>c(h,f)||u(h,f)):o==="data"?t.filter((h,f)=>{let g=s.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(d,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function oS(d,t,{includeHydrateFallback:i}={}){return lS(d.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function lS(d){return[...new Set(d)]}function cS(d){let t={},i=Object.keys(d).sort();for(let s of i)t[s]=d[s];return t}function uS(d,t){let i=new Set;return new Set(t),d.reduce((s,r)=>{let o=JSON.stringify(cS(r));return i.has(o)||(i.add(o),s.push({key:o,link:r})),s},[])}function ay(){let d=j.useContext(la);return Oh(d,"You must render this element inside a <DataRouterContext.Provider> element"),d}function hS(){let d=j.useContext(yl);return Oh(d,"You must render this element inside a <DataRouterStateContext.Provider> element"),d}var Lh=j.createContext(void 0);Lh.displayName="FrameworkContext";function ry(){let d=j.useContext(Lh);return Oh(d,"You must render this element inside a <HydratedRouter> element"),d}function dS(d,t){let i=j.useContext(Lh),[s,r]=j.useState(!1),[o,c]=j.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,b=j.useRef(null);j.useEffect(()=>{if(d==="render"&&c(!0),d==="viewport"){let S=x=>{x.forEach(T=>{c(T.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[d]),j.useEffect(()=>{if(s){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[s]);let A=()=>{r(!0)},w=()=>{r(!1),c(!1)};return i?d!=="intent"?[o,b,{}]:[o,b,{onFocus:ar(u,A),onBlur:ar(h,w),onMouseEnter:ar(f,A),onMouseLeave:ar(g,w),onTouchStart:ar(y,A)}]:[!1,b,{}]}function ar(d,t){return i=>{d&&d(i),i.defaultPrevented||t(i)}}function fS({page:d,...t}){let{router:i}=ay(),s=j.useMemo(()=>Qm(i.routes,d,i.basename),[i.routes,d,i.basename]);return s?j.createElement(gS,{page:d,matches:s,...t}):null}function pS(d){let{manifest:t,routeModules:i}=ry(),[s,r]=j.useState([]);return j.useEffect(()=>{let o=!1;return rS(d,t,i).then(c=>{o||r(c)}),()=>{o=!0}},[d,t,i]),s}function gS({page:d,matches:t,...i}){let s=Ln(),{manifest:r,routeModules:o}=ry(),{basename:c}=ay(),{loaderData:u,matches:h}=hS(),f=j.useMemo(()=>pm(d,t,h,r,s,"data"),[d,t,h,r,s]),g=j.useMemo(()=>pm(d,t,h,r,s,"assets"),[d,t,h,r,s]),y=j.useMemo(()=>{if(d===s.pathname+s.search+s.hash)return[];let w=new Set,S=!1;if(t.forEach(x=>{let T=r.routes[x.route.id];!T||!T.hasLoader||(!f.some(C=>C.route.id===x.route.id)&&x.route.id in u&&o[x.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:w.add(x.route.id))}),w.size===0)return[];let _=nS(d,c,"data");return S&&w.size>0&&_.searchParams.set("_routes",t.filter(x=>w.has(x.route.id)).map(x=>x.route.id).join(",")),[_.pathname+_.search]},[c,u,s,r,f,t,d,o]),b=j.useMemo(()=>oS(g,r),[g,r]),A=pS(g);return j.createElement(j.Fragment,null,y.map(w=>j.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...i})),b.map(w=>j.createElement("link",{key:w,rel:"modulepreload",href:w,...i})),A.map(({key:w,link:S})=>j.createElement("link",{key:w,nonce:i.nonce,...S})))}function mS(...d){return t=>{d.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var oy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oy&&(window.__reactRouterVersion="7.10.0")}catch{}function yS({basename:d,children:t,unstable_useTransitions:i,window:s}){let r=j.useRef();r.current==null&&(r.current=iA({window:s,v5Compat:!0}));let o=r.current,[c,u]=j.useState({action:o.action,location:o.location}),h=j.useCallback(f=>{i===!1?u(f):j.startTransition(()=>u(f))},[i]);return j.useLayoutEffect(()=>o.listen(h),[o,h]),j.createElement(YA,{basename:d,children:t,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:i===!0})}var ly=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vl=j.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:r,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:g,viewTransition:y,...b},A){let{basename:w,unstable_useTransitions:S}=j.useContext(gi),_=typeof f=="string"&&ly.test(f),x,T=!1;if(typeof f=="string"&&_&&(x=f,oy))try{let W=new URL(window.location.href),Z=f.startsWith("//")?new URL(W.protocol+f):new URL(f),st=en(Z.pathname,w);Z.origin===W.origin&&st!=null?f=st+Z.search+Z.hash:T=!0}catch{ti(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=NA(f,{relative:r}),[D,k,B]=dS(s,b),N=SS(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:r,viewTransition:y,unstable_useTransitions:S});function H(W){t&&t(W),W.defaultPrevented||N(W)}let K=j.createElement("a",{...b,...B,href:x||C,onClick:T||o?t:H,ref:mS(A,k),target:h,"data-discover":!_&&i==="render"?"true":void 0});return D&&!_?j.createElement(j.Fragment,null,K,j.createElement(fS,{page:C})):K});vl.displayName="Link";var bS=j.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:r=!1,style:o,to:c,viewTransition:u,children:h,...f},g){let y=_r(c,{relative:f.relative}),b=Ln(),A=j.useContext(yl),{navigator:w,basename:S}=j.useContext(gi),_=A!=null&&CS(y)&&u===!0,x=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,T=b.pathname,C=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(T=T.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&S&&(C=en(C,S)||C);const D=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let k=T===x||!r&&T.startsWith(x)&&T.charAt(D)==="/",B=C!=null&&(C===x||!r&&C.startsWith(x)&&C.charAt(x.length)==="/"),N={isActive:k,isPending:B,isTransitioning:_},H=k?t:void 0,K;typeof s=="function"?K=s(N):K=[s,k?"active":null,B?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let W=typeof o=="function"?o(N):o;return j.createElement(vl,{...f,"aria-current":H,className:K,ref:g,style:W,to:c,viewTransition:u},typeof h=="function"?h(N):h)});bS.displayName="NavLink";var vS=j.forwardRef(({discover:d="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:r,state:o,method:c=ol,action:u,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:y,...b},A)=>{let{unstable_useTransitions:w}=j.useContext(gi),S=_S(),_=ES(u,{relative:f}),x=c.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&ly.test(u),C=D=>{if(h&&h(D),D.defaultPrevented)return;D.preventDefault();let k=D.nativeEvent.submitter,B=k?.getAttribute("formmethod")||c,N=()=>S(k||D.currentTarget,{fetcherKey:t,method:B,navigate:i,replace:r,state:o,relative:f,preventScrollReset:g,viewTransition:y});w&&i!==!1?j.startTransition(()=>N()):N()};return j.createElement("form",{ref:A,method:x,action:_,onSubmit:s?h:C,...b,"data-discover":!T&&d==="render"?"true":void 0})});vS.displayName="Form";function AS(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cy(d){let t=j.useContext(la);return Kt(t,AS(d)),t}function SS(d,{target:t,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let h=xr(),f=Ln(),g=_r(d,{relative:o});return j.useCallback(y=>{if(JA(y,t)){y.preventDefault();let b=i!==void 0?i:mr(f)===mr(g),A=()=>h(d,{replace:b,state:s,preventScrollReset:r,relative:o,viewTransition:c});u?j.startTransition(()=>A()):A()}},[f,h,g,i,s,t,d,r,o,c,u])}var wS=0,xS=()=>`__${String(++wS)}__`;function _S(){let{router:d}=cy("useSubmit"),{basename:t}=j.useContext(gi),i=HA(),s=d.fetch,r=d.navigate;return j.useCallback(async(o,c={})=>{let{action:u,method:h,encType:f,formData:g,body:y}=iS(o,t);if(c.navigate===!1){let b=c.fetcherKey||xS();await s(b,i,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||h,formEncType:c.encType||f,flushSync:c.flushSync})}else await r(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||h,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:i,flushSync:c.flushSync,viewTransition:c.viewTransition})},[s,r,t,i])}function ES(d,{relative:t}={}){let{basename:i}=j.useContext(gi),s=j.useContext(Ni);Kt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={..._r(d||".",{relative:t})},c=Ln();if(d==null){o.search=c.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(g=>g==="")){u.delete("index"),h.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!d||d===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:tn([i,o.pathname])),mr(o)}function CS(d,{relative:t}={}){let i=j.useContext(ty);Kt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=cy("useViewTransitionState"),r=_r(d,{relative:t});if(!i.isTransitioning)return!1;let o=en(i.currentLocation.pathname,s)||i.currentLocation.pathname,c=en(i.nextLocation.pathname,s)||i.nextLocation.pathname;return dl(r.pathname,c)!=null||dl(r.pathname,o)!=null}const Ys={english:[{id:"e1",source:"JSO22_PreScreen2",instruction:"Read the Following Passage and answer the questions below:",passage:`Volcanoes are often associated with earthquakes that occur in the same vicinity. But earthquakes can occur in regions where there are no volcanic eruptions, such as Assam, where in 1897 a major earthquake devastated an area of 150,000 thousand square miles. To the devastation caused by the upheaval itself was added that produced by the floods and storms which followed. Earthquakes of this kind are caused by the movements of "strata" or beds of rock at a weak place or 'fault' in the crust of the earth.`,question:'In the passage the phrase "that produced by the floods" implies:',options:["upheaval","devastation","volcanic eruption","earthquake"],correct:1},{id:"e2",source:"JSO24_PreScreen1",instruction:"Read the passage below:",passage:"And on top of all this was Smattering Hall itself. Smattering Hall destroyed Mordred's last hope. It was one of those vast edifices... whose original founders seem to have budgeted for families of twenty-five or so... Mordred's reaction of passing through the front door was a sort of sick sensation, a kind of settled despair.",question:'From the sense of the passage, the statement "And on top of all this was Smattering Hall itself" implies that:',options:["Smattering Hall was atop a great hill","Smattering Hall with its size and cost shattered Mordred's final hopes","Smattering Hall faced an unequal problem","Smattering Hall was one of the greatest challenges"],correct:1},{id:"e3",source:"JSO24_PreScreening2",instruction:"Choose the word closest in meaning to the context:",question:"DOCILE - It was a rude shock to see Prem, who is usually docile, fighting ferociously.",options:["Impudent","Obedient","Indignant","Brittle"],correct:1},{id:"e4",source:"JSO24_PreScreening2",instruction:"Read the passage below:",passage:"Direct taxes can be graded, not only by taking into account the size of a person's income, but also considering the use he makes of it and making suitable allowances. The proportion of taxable income may be reduced by allowances for expenses incurred on behalf of children of school age or dependent relatives or for money spent on insurance. Such a system of grading is not possible in case of indirect taxation.",question:"The levels of direct tax are decided on the basis of:",options:["allowances for expenses on children, dependents and insurance","differing expenditure of the rich and poor","the size of a person's income","actual income, its use and appropriate allowances"],correct:3},{id:"e5",source:"JSO24_PreScreen_P3",instruction:"Select the grammatically correct statement:",question:"From the following options, identify the grammatically correct statement regarding the conductor:",options:["Observing the conductor, his discomfiture overlooked his money","Sensing the conductor's discomfiture he did not insist on payment","Understanding his discomfiture, the conductor did not compel his pay","Observing his discomfiture, the conductor did not insist on his fare"],correct:3},{id:"e6",source:"JSO22_PreScreen",instruction:"Read the Passage Below and answer the questions",passage:"The present era has seen a very considerable acceleration in the speed of technological development and the problem of the growth of the gross materialistic outlook is inevitably more acute. The danger obviously that spiritual values will be submerged by a wave of material prosperity such as the world has never seen before, which may upset the traditional equilibrium of the Western society.",question:'Identify from the options below, a word or phrase which is near synonymous to "certain to happen or unavoidable"',options:["inevitably","obviously","considerable","inherent"],correct:0},{id:"e7",source:"JSO22_PreScreen2",instruction:"Read the Passage Below and answer the questions",passage:"Rabbits are eaten in most European countries, and some of the early settlers introduced rabbits into that country as meat was hard to obtain. The European rabbit has many natural enemies which prevent the rabbit population from growing, but in Australia it had no such enemies... Rabbits breed very easily... they caused a great deal of damage.",question:"Rabbits caused much damage in Australia because they:",options:["bred easily and soon their number was enormously high","made holes in the ground to live in and ate up grass and other plants","were eating up grass and other plants needed to feed sheep and other cattle","consumed the food of animals which were the source of country's wealth"],correct:3},{id:"e8",source:"JSO22_PreScreen2",instruction:"Read the Passage Below and answer the questions",passage:"An ambassador is required by his own government to get information about the state of affairs, the economic and military strength, and the internal political situation of the country in which he stays... On many occasions, the ambassador of a powerful nation has endeavoured to intervene in the political happenings of the country in which his embassy is established.",question:'Identify from the options provided, the synonym of "powerful" in the sense it is used in the passage',options:["strong and influential","imperialist","authoritarian","fit and formidable"],correct:0},{id:"e9",source:"JSO24_PreScreen_P",instruction:"Read the Passage Below and answer the questions",passage:"Most malnutrition is invisible. Consistent undernutrition... can retard growth... For timely prevention of malnutrition, the UNICEF has been using the simple inexpensive method of growth monitoring charts...",question:"Identify the original full form of UNICEF from the options given below",options:["United Nations International Cultural Economic Forum","United National Cultural Economic Federation","United Nations International Children's Emergency Fund","United Nations Intellectual Cultural Economic Foundation"],correct:2},{id:"e10",source:"JSO24_PreScreening",type:"analogy",instruction:"Choose the correct word from the following options:",question:"Foundation : Edifice :: Constitution : ?",options:["Government","State","Nation","Cabinet"],correct:2},{id:"e11",source:"JSO22_PreScreen2",instruction:"Read the Passage Below and answer the questions",passage:"Since the end of the last World War, the Emperor has several times rejected the suggestion that a new palace should be built for him... The Emperor refused to live in a luxurious palace, because millions of his people were rendered homeless during the war...",question:"According to the passage, the Emperor refused to live in a palace because:",options:["he was the Emperor","his country suffered a defeat in the war","his people were rendered homeless by war","he did not wish to live better when his people were homeless and suffering hardships"],correct:3},{id:"e12",source:"JSO24_PreScreen_P",type:"vocabulary",instruction:"Pick the word closest in meaning to the context:",question:"GAINSAY - Harish, known for his honesty, is not likely to gainsay the facts of the report.",options:["Deny","Lie","Prevaricate","Exaggerate"],correct:0},{id:"e13",source:"JSO22_PreScreen5",instruction:"Read the passage below:",passage:"An arbitrator's work is to settle dispute, but that is not all; he must try to make both sides accept his decision... He makes their attitudes converge... His settlement is likely to be durable if he can persuade the opponents to make complementary concessions.",question:'Identify a word or phrase from the passage that means "something that a disputant agrees to do in order to end an argument":',options:["avoid arbitration","seek accommodation","make a concession","refuse convergence"],correct:2},{id:"e14",source:"JSO24_PreScreening",instruction:"Read the passage below:",passage:"Non-fiction prose is an area of humungous potential... It is one of the most accommodative literary genres... Its style eschews tension, monotony and self-conscious craft. With scant exceptions, there is the marked presence of the author in the text.",question:"Identify a suitable title for this passage:",options:["Introduction to Non-fiction writing","Characteristics of Non-fiction","Shortcomings of the Genre of Non-fiction","An Introduction to Non-fiction Prose"],correct:3},{id:"e15",source:"JSO24_PreScreen_P2",instruction:"Read the passage below:",passage:"It is beyond question that in its severest forms theology has an extremely noxious influence... Ingersoll's work has a positive aspect... In his belief that human activity is limited to the present life, he was a Secularist. In his rejection of the problematic, he was an Agnostic.",question:"As per the passage, in its extreme form theology has a/an ______ influence.",options:["unpleasant","harmful","punitive","rigorous"],correct:1},{id:"e16",source:"JSO24_PreScreen_P",type:"vocabulary",instruction:"Pick the word closest in meaning to the context:",question:"RETINUE - The chief weapons inspector with his retinue searched the palaces.",options:["Opponents","Superiors","Pall bearers","Attendants"],correct:3}],numerical:[{id:"n1",source:"JSO24_RPre",question:"4 men and 6 women can complete a work in 8 days, while 3 men and 7 women can complete it in 10 days. In how many days will 10 women complete it?",options:["35","40","45","50"],correct:1},{id:"n2",source:"JSO24_RPre",question:"A man's speed with the current is 15 km/hr and the speed of the current is 2.5 km/hr. The man's speed against the current is:",options:["8.5 km/hr","9 km/hr","10 km/hr","12.5 km/hr"],correct:2},{id:"n3",source:"JSO22_PreScreen",question:"Arun's present age in years is 40% of Barun's. In another few years, Arun's age will be half of Barun's. By what percentage will Barun's age increase during this period?",options:["20","10","15","25"],correct:0},{id:"n4",source:"JSO24_PreScreening",question:"The increase in the price of a certain item was 25%. Then the price was decreased by 20% and then again increased by 10%. What is the resultant increase in the price?",options:["5%","10%","12.5%","15%"],correct:1},{id:"n5",source:"JSO24_PreScreen_P3",question:"What is the remainder when 85  87  89  91  95  96 is divided by 100?",options:["0","1","2","4"],correct:0},{id:"n6",source:"JSO22_PreScreen3",question:"A contract on construction job specifies a penalty for delay in completion of the work beyond a certain date is as follows: Rs. 200 for the first day, Rs. 250 for the second day, Rs. 300 for the third day etc. How much penalty should the contractor pay if he delays the work by 10 days?",options:["Rs. 4950","Rs. 4250","Rs. 3600","Rs. 650"],correct:1},{id:"n7",source:"JSO22_PreScreen3",question:"A tank is filled by three pipes with uniform flow. The first two pipes operating simultaneously fill the tank in the same time during which the tank is filled by the third pipe alone. The second pipe fills the tank 5 hours faster than the first pipe and 4 hours slower than the third pipe. The time required by the first pipe is:",options:["6 hours","10 hours","15 hours","30 hours"],correct:2},{id:"n8",source:"JSO24_PreScreening2",question:"A starts business with Rs. 3500 and after 5 months, B joins with A as his partner. After a year, the profit is divided in the ratio 2: 3. What is B's contribution in the capital?",options:["Rs. 7500","Rs. 8000","Rs. 8500","Rs. 9000"],correct:3},{id:"n9",source:"JSO22_PreScreen2",question:"Ms. Rani has to pay each security guard half of the money she has in her purse and 2 rupees more to pass through. There are 3 doors. She has only 1 rupee left at the end. How much money did she have in the beginning?",options:["Rs. 40","Rs. 36","Rs. 25","Rs. 42"],correct:1},{id:"n10",source:"JSO24_PreScreening2",question:"A telecom service provider engages male (M) and female (F) operators for 1000 calls/day. M handles 40 calls, wage Rs. 250 + Rs. 15/call. F handles 50 calls, wage Rs. 300 + Rs. 10/call. To minimize cost (employing >7 females out of 12 available), how many males should be employed?",options:["15","14","12","10"],correct:3},{id:"n11",source:"JSO22_PreScreen2",question:"X and Y run a 3 km race along a circular course of length 300m. Their speeds are in the ratio 3:2. If they start together in the same direction, how many times would the first one pass the other?",options:["2","3","4","5"],correct:1},{id:"n12",source:"JSO24_PreScreen_P",question:"Three travelers are sitting around a fire. 1st has 5 loaves, 2nd has 3 loaves. 3rd has 8 coins and no food. They share equally. How much should the 1st traveler get?",options:["5 coins","7 coins","1 coin","0 coins"],correct:1},{id:"n13",source:"JSO22_PreScreen2",question:"Owner of an art shop increases prices by x%, then decreases by x%. After one cycle, price of a painting reduced by Rs. 441. After second cycle, sold for Rs. 1944.81. What was original price?",options:["Rs. 2756.25","Rs. 2256.25","Rs. 2500","Rs. 2000"],correct:1},{id:"n14",source:"JSO24_RPre",question:"At what angle the hands of a clock are inclined at 15 minutes past 5?",options:["58 1/2 degrees","64 degrees","67 1/2 degrees","72 1/2 degrees"],correct:2},{id:"n15",source:"JSO22_PreScreen2",question:"Flight A and B with equal capacity. Hall capacity 200, 10% empty. 40% passengers ladies. Flight capacity = 4/3 of waiting passengers. Half of Flight A are women. Ratio of empty seats in Flight B to airhostesses in Flight A (1 airhostess per 20 passengers in hall)?",options:["10:1","5:1","20:1","1:1"],correct:0}],reasoning:[{id:"r1",source:"JSO24_RPre",question:"How many such pair(s) of letters are there in the word 'POCKETBOOK' which have as many letters between them as in the alphabetical series as we move from left to right?",options:["One","Two","Three","Four"],correct:1},{id:"r2",source:"JSO24_PreScreening",question:"AVIATOR = 6, FIXTURE = 9, WIZARDS = 1. Then DIVERSE = ?",options:["2","3","4","5"],correct:2},{id:"r3",source:"JSO22_PreScreen5",question:"If the order of the letters in the English alphabet is reversed and each letter represents the letter whose position it occupies, then which one of the following represents 'LUCKNOW'?",options:["OGXPMLD","OGXQMLE","OFXPMLE","OFXPMLD"],correct:3},{id:"r4",source:"JSO24_PreScreen_P",question:`Pointing to a man, Rohan said, "His only brother is the father of my daughter's father." How is Rohan related to the man?`,options:["Father","Grandson","Uncle","Nephew"],correct:3},{id:"r5",source:"JSO24_PreScreening",question:"Find the odd one out:",options:["optimize","retrograde","ameliorate","regenerate"],correct:1},{id:"r6",source:"JSO24_PreScreening",question:'In a code language, "start walk stop diet" is coded as 8% #21 3$7 *6, "walk rest start bite" is coded as #9 *6 2@9 #21. Find the code for "work diet"?',options:["3$7 #9","78 3$7","^78 #9","3$7 *6"],correct:1},{id:"r7",source:"JSO24_PreScreening2",question:`If Karan says, "Rocky's mother is the only daughter of my mother", How is Karan related to Rocky?`,options:["Brother","Father","Uncle","Grandfather"],correct:2},{id:"r8",source:"JSO22_PreScreen2",question:"At what time between 4 and 5 o'clock will the hands of a watch point in opposite directions?",options:["45 min. past 4","40 min. past 4","50 4/11 min. past 4","54 6/11 min. past 4"],correct:3},{id:"r9",source:"JSO22_PreScreen2",question:"Seven persons A, B, C, D, E, F and G live in a 7 story building. G is on floor 7. D is on floor 6. C is on floor 3. A is immediately above B. Who lives on the first floor?",options:["The one who works with Reebok","The one who works with Sonata","The one who works with Puma","Can't be determined"],correct:1},{id:"r10",source:"JSO22_PreScreen2",question:"Statements: A few Ostriches are Peacocks. All Peacocks are Swans. Some Swans are Ducks. Conclusions: I. A few Swans are Ostriches. II. Some Ducks are Peacocks.",options:["Only conclusion I follows","Only conclusion II follows","Neither I nor II follows","Both follow"],correct:0},{id:"r11",source:"JSO22_PreScreen2",question:"Direction: Find the correct mirror image of the given figure where the mirror is placed on the line AB/MN.",options:["Figure A","Figure B","Figure C","Figure D"],correct:3},{id:"r12",source:"JSO22_PreScreen",question:"Zachary has invited his three buddies... #1: All agree first three numbers are 995. #2: Three agree fourth is 9. #3: Three agree fifth is 2. #4: Three agree sixth is 6... Which is likely the number?",options:["995-9266","995-9336","995-9268","995-8266"],correct:0},{id:"r13",source:"JSO24_PreScreening2",question:"500 men are arranged in an array of 10 rows and 50 columns. Tallest among each row come out, shortest is A. Shortest among each column come out, tallest is B. Who is taller?",options:["Only A","Only B","Both A and B are same","Neither A nor B"],correct:2},{id:"r14",source:"JSO22_PreScreen2",question:'Three friends Budha, Lallu and Sharad are either from Earth (Truth tellers) or Jupiter (Liars). Budha: "Both Lallu and Sharad are from Jupiter". Sharad: "Lallu says he is not from Jupiter". Who is definitely from Jupiter?',options:["Budha","Sharad","Both Budha and Sharad","Lallu"],correct:0},{id:"r15",source:"JSO22_PreScreen2",question:"Inequalities: Statements: G=T, T<=W, W>=K. Conclusions: I. W>G, II. W=G",options:["Only II follows","Only I follows","Both follow","Either I or II follows"],correct:3},{id:"r16",source:"JSO22_PreScreen5",question:"Directions: Alphanumeric series: 8HP&6R4%X$U3O#BA!2LC?5ES7@D. Step 1: If letter is immediately followed by symbol but not preceded by letter... Step 2... Which is 7th element from left after Step 1 if composite numbers dropped?",options:["S","%","#","U"],correct:3},{id:"r17",source:"JSO24_PreScreening",question:"Ten guards A to J on pentagon gates. B is 3rd to right of E. C is immediate left of D. I is neighbor of B... Four of the following five are alike. Which does not belong?",options:["D","I","E","B"],correct:0},{id:"r18",source:"JSO22_PreScreen5",question:"Six persons on a bus: Kalyan, Kumar, Kiran, Karan, Krishna, Keerthan... Who was the first person among the six to get off the bus?",options:["Kalyan","Keerthan","Kumar","Cannot be determined"],correct:0},{id:"r19",source:"JSO24_PreScreen_P3",question:'Statement: "Buy pure butter of company A" - advertisement. Assumptions: I. No other company supplies pure butter. II. People read advertisement.',options:["Only I implicit","Only II implicit","Either I or II","Neither I nor II"],correct:1}]},Wo=({title:d,icon:t,color:i,onClick:s,questionCount:r})=>R.jsxs("button",{onClick:s,className:`flex flex-col items-center justify-center p-6 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 bg-white border-2 border-transparent hover:border-${i}-500 w-full`,children:[R.jsx("div",{className:`p-4 rounded-full bg-${i}-100 mb-4`,children:R.jsx(t,{className:`w-10 h-10 text-${i}-600`})}),R.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:d}),R.jsxs("p",{className:"text-gray-500 text-sm",children:[r," Questions"]}),R.jsx("div",{className:`mt-4 px-4 py-1 rounded-full text-xs font-semibold bg-${i}-50 text-${i}-600 uppercase`,children:"Start Test"})]}),TS=({duration:d,onTimeUp:t})=>{const[i,s]=j.useState(d);j.useEffect(()=>{if(i<=0){t();return}const c=setInterval(()=>s(u=>u-1),1e3);return()=>clearInterval(c)},[i,t]);const r=Math.floor(i/60),o=i%60;return R.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 bg-white px-3 py-1 rounded-lg shadow-sm border border-gray-200",children:[R.jsx($m,{size:18}),R.jsxs("span",{className:`font-mono font-bold ${i<60?"text-red-500":""}`,children:[String(r).padStart(2,"0"),":",String(o).padStart(2,"0")]})]})},uy=j.createContext(null),MS=({children:d})=>{const[t,i]=j.useState(null),[s,r]=j.useState(!0);j.useEffect(()=>{const h=localStorage.getItem("currentUser");h&&i(JSON.parse(h)),r(!1)},[]);const o=(h,f)=>{const y=JSON.parse(localStorage.getItem("users")||"[]").find(b=>b.username===h&&b.password===f);if(y){const{password:b,...A}=y;return localStorage.setItem("currentUser",JSON.stringify(A)),i(A),{success:!0}}return{success:!1,message:"Invalid username or password"}},c=(h,f)=>{const g=JSON.parse(localStorage.getItem("users")||"[]");if(g.find(w=>w.username===h))return{success:!1,message:"Username already exists"};const y={id:Date.now().toString(),username:h,password:f};g.push(y),localStorage.setItem("users",JSON.stringify(g));const{password:b,...A}=y;return localStorage.setItem("currentUser",JSON.stringify(A)),i(A),{success:!0}},u=()=>{localStorage.removeItem("currentUser"),i(null)};return R.jsx(uy.Provider,{value:{user:t,login:o,signup:c,logout:u,loading:s},children:!s&&d})},Al=()=>j.useContext(uy);function RS(){const[d,t]=j.useState(""),[i,s]=j.useState(""),[r,o]=j.useState(""),{login:c}=Al(),u=xr(),h=f=>{f.preventDefault();const g=c(d,i);g.success?u("/"):o(g.message)};return R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:R.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("div",{className:"bg-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:R.jsx(Yv,{className:"w-8 h-8 text-indigo-600"})}),R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),R.jsx("p",{className:"text-gray-500 mt-2",children:"Sign in to continue your prep"})]}),r&&R.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-6 text-sm",children:r}),R.jsxs("form",{onSubmit:h,className:"space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),R.jsx("input",{type:"text",required:!0,value:d,onChange:f=>t(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"Enter your username"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),R.jsx("input",{type:"password",required:!0,value:i,onChange:f=>s(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"Enter your password"})]}),R.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors shadow-md hover:shadow-lg",children:"Sign In"})]}),R.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Don't have an account?"," ",R.jsx(vl,{to:"/signup",className:"text-indigo-600 font-semibold hover:text-indigo-700",children:"Sign up"})]})]})})}function DS(){const[d,t]=j.useState(""),[i,s]=j.useState(""),[r,o]=j.useState(""),[c,u]=j.useState(""),{signup:h}=Al(),f=xr(),g=y=>{if(y.preventDefault(),i!==r)return u("Passwords do not match");const b=h(d,i);b.success?f("/"):u(b.message)};return R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:R.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:R.jsx(eA,{className:"w-8 h-8 text-green-600"})}),R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),R.jsx("p",{className:"text-gray-500 mt-2",children:"Start your journey today"})]}),c&&R.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-6 text-sm",children:c}),R.jsxs("form",{onSubmit:g,className:"space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),R.jsx("input",{type:"text",required:!0,value:d,onChange:y=>t(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",placeholder:"Choose a username"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),R.jsx("input",{type:"password",required:!0,value:i,onChange:y=>s(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",placeholder:"Choose a password"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),R.jsx("input",{type:"password",required:!0,value:r,onChange:y=>o(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",placeholder:"Confirm your password"})]}),R.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors shadow-md hover:shadow-lg",children:"Sign Up"})]}),R.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Already have an account?"," ",R.jsx(vl,{to:"/login",className:"text-green-600 font-semibold hover:text-green-700",children:"Sign in"})]})]})})}const Re=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),dh=[.001,0,0,.001,0,0],th=1.35,Ze={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Rn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},yr="pdfjs_internal_editor_",mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},NS={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},fh={TRIANGLES:1,LATTICE:2},we={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},cl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ue={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ks={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Sl={ERRORS:0,WARNINGS:1,INFOS:5},br={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},rr={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},OS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let wl=Sl.WARNINGS;function LS(d){Number.isInteger(d)&&(wl=d)}function kS(){return wl}function xl(d){wl>=Sl.INFOS&&console.info(`Info: ${d}`)}function pt(d){wl>=Sl.WARNINGS&&console.warn(`Warning: ${d}`)}function Gt(d){throw new Error(d)}function Rt(d,t){d||Gt(t)}function BS(d){switch(d?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function hy(d,t=null,i=null){if(!d)return null;if(i&&typeof d=="string"&&(i.addDefaultProtocol&&d.startsWith("www.")&&d.match(/\./g)?.length>=2&&(d=`http://${d}`),i.tryConvertEncoding))try{d=IS(d)}catch{}const s=t?URL.parse(d,t):URL.parse(d);return BS(s)?s:null}function dy(d,t,i=!1){const s=URL.parse(d);return s?(s.hash=t,s.href):i&&hy(d,"http://example.com")?d.split("#",1)[0]+`${t?`#${t}`:""}`:""}function gt(d,t,i,s=!1){return Object.defineProperty(d,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const os=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class gm extends os{constructor(t,i){super(t,"PasswordException"),this.code=i}}class eh extends os{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class ph extends os{constructor(t){super(t,"InvalidPDFException")}}class fl extends os{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class PS extends os{constructor(t){super(t,"FormatError")}}class Nn extends os{constructor(t){super(t,"AbortException")}}function fy(d){(typeof d!="object"||d?.length===void 0)&&Gt("Invalid argument for bytesToString");const t=d.length,i=8192;if(t<i)return String.fromCharCode.apply(null,d);const s=[];for(let r=0;r<t;r+=i){const o=Math.min(r+i,t),c=d.subarray(r,o);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Er(d){typeof d!="string"&&Gt("Invalid argument for stringToBytes");const t=d.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=d.charCodeAt(s)&255;return i}function zS(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function FS(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function US(){try{return new Function(""),!0}catch{return!1}}class Ee{static get isLittleEndian(){return gt(this,"isLittleEndian",FS())}static get isEvalSupported(){return gt(this,"isEvalSupported",US())}static get isOffscreenCanvasSupported(){return gt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return gt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return gt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return gt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return gt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return gt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ih=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));class nt{static makeHexColor(t,i,s){return`#${ih[t]}${ih[i]}${ih[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],o=t[s+1];t[s]=r*i[0]+o*i[2]+i[4],t[s+1]=r*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],o=i[1],c=i[2],u=i[3],h=i[4],f=i[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*r+b*c+h,t[s+g+1]=y*o+b*u+f}}static applyInverseTransform(t,i){const s=t[0],r=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,s){const r=i[0],o=i[1],c=i[2],u=i[3],h=i[4],f=i[5],g=t[0],y=t[1],b=t[2],A=t[3];let w=r*g+h,S=w,_=r*b+h,x=_,T=u*y+f,C=T,D=u*A+f,k=D;if(o!==0||c!==0){const B=o*g,N=o*b,H=c*y,K=c*A;w+=H,x+=H,_+=K,S+=K,T+=B,k+=B,D+=N,C+=N}s[0]=Math.min(s[0],w,_,S,x),s[1]=Math.min(s[1],T,D,C,k),s[2]=Math.max(s[2],w,_,S,x),s[3]=Math.max(s[3],T,D,C,k)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],o=t[2],c=t[3],u=s**2+r**2,h=s*o+r*c,f=o**2+c**2,g=(u+f)/2,y=Math.sqrt(g**2-(u*f-h**2));i[0]=Math.sqrt(g+y||1),i[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>c?null:[s,o,r,c]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],i,r),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],i,r)}static#t(t,i,s,r,o,c,u,h,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,A=b*f,w=y*(y*(y*t+3*f*i)+3*b*s)+A*r,S=y*(y*(y*o+3*f*c)+3*b*u)+A*h;g[0]=Math.min(g[0],w),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],w),g[3]=Math.max(g[3],S)}static#e(t,i,s,r,o,c,u,h,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,i,s,r,o,c,u,h,-y/g,b);return}const A=g**2-4*y*f;if(A<0)return;const w=Math.sqrt(A),S=2*f;this.#t(t,i,s,r,o,c,u,h,(-g+w)/S,b),this.#t(t,i,s,r,o,c,u,h,(-g-w)/S,b)}static bezierBoundingBox(t,i,s,r,o,c,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,h),this.#e(t,s,o,u,i,r,c,h,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,i,r,c,h,3*(-i+3*(r-c)+h),6*(i-2*r+c),3*(r-i),f)}}function IS(d){return decodeURIComponent(escape(d))}let nh=null,mm=null;function jS(d){return nh||(nh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,mm=new Map([["","t"]])),d.replaceAll(nh,(t,i,s)=>i?i.normalize("NFKC"):mm.get(s))}function py(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const d=new Uint8Array(32);return crypto.getRandomValues(d),fy(d)}const Js="pdfjs_internal_id_";function HS(d,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...o]=i;if(!d(s)&&!Number.isInteger(s)||!t(r))return!1;const c=o.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function De(d,t,i){return Math.min(Math.max(d,t),i)}function gy(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa(fy(d))}function GS(d){return Uint8Array.fromBase64?Uint8Array.fromBase64(d):Er(atob(d))}typeof Promise.try!="function"&&(Promise.try=function(d,...t){return new Promise(i=>{i(d(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(d){return d.reduce((t,i)=>t+i,0)});class vr{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(vr.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&i.push({str:c}),!!o.children)for(const h of o.children)r(h)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class my{static setupStorage(t,i,s,r,o){const c=r.getValue(i,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:o}){const{attributes:c}=i,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[h,f]of Object.entries(c))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:s});const u=o!=="richText",h=t.div;if(h.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=y}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),u&&vr.shouldBuildText(r.name)&&f.push(y)}return{textDivs:f}}const g=[[r,-1,c]];for(;g.length>0;){const[y,b,A]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const w=y.children[++g.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const x=document.createTextNode(w.value);f.push(x),A.append(x);continue}const _=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(A.append(_),w.attributes&&this.setAttributes({html:_,element:w,storage:i,intent:o,linkService:s}),w.children?.length>0)g.push([w,-1,_]);else if(w.value){const x=document.createTextNode(w.value);u&&vr.shouldBuildText(S)&&f.push(x),_.append(x)}}for(const y of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const Wi="http://www.w3.org/2000/svg";class oa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Cr(d,t="text"){if(dr(d,document.baseURI)){const i=await fetch(d);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Tr{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=c,s*=i;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let w,S,_,x;g===0?(w=Math.abs(f-t[1])*s+o,S=Math.abs(h-t[0])*s+c,_=(t[3]-t[1])*s,x=(t[2]-t[0])*s):(w=Math.abs(h-t[0])*s+o,S=Math.abs(f-t[1])*s+c,_=(t[2]-t[0])*s,x=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,A*s,w-g*s*h-b*s*f,S-y*s*h-A*s*f],this.width=_,this.height=x}get rawDims(){const t=this.viewBox;return gt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Tr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,i){const s=[t,i];return nt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];nt.applyTransform(i,this.transform);const s=[t[2],t[3]];return nt.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return nt.applyInverseTransform(s,this.transform),s}}class kh extends os{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function _l(d){const t=d.length;let i=0;for(;i<t&&d[i].trim()==="";)i++;return d.substring(i,i+5).toLowerCase()==="data:"}function Bh(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function qS(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function VS(d,t="document.pdf"){if(typeof d!="string")return t;if(_l(d))return pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(d);if(!s)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(o.test(c))return r(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const h=Array.from(s.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return r(f)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return r(h[0])}return t}class ym{started=Object.create(null);times=[];time(t){t in this.started&&pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-r}ms
`);return t.join("")}}function dr(d,t){const i=t?URL.parse(d,t):URL.parse(d);return i?.protocol==="http:"||i?.protocol==="https:"}function pi(d){d.preventDefault()}function te(d){d.preventDefault(),d.stopPropagation()}function XS(d){console.log("Deprecated API usage: "+d)}class gh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(i[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(i[6],10);h=h>=0&&h<=59?h:0;const f=i[7]||"Z";let g=parseInt(i[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,u+=y):f==="+"&&(c-=g,u-=y),new Date(Date.UTC(s,r,o,c,u,h))}}function YS(d,{scale:t=1,rotation:i=0}){const{width:s,height:r}=d.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new Tr({viewBox:o,userUnit:1,scale:t,rotation:i})}function Mr(d){if(d.startsWith("#")){const t=parseInt(d.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(t=>parseInt(t)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(pt(`Not a valid color format: "${d}"`),[0,0,0])}function $S(d){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of d.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;d.set(i,Mr(s))}t.remove()}function Qt(d){const{a:t,b:i,c:s,d:r,e:o,f:c}=d.getTransform();return[t,i,s,r,o,c]}function Ci(d){const{a:t,b:i,c:s,d:r,e:o,f:c}=d.getTransform().invertSelf();return[t,i,s,r,o,c]}function ss(d,t,i=!1,s=!0){if(t instanceof Tr){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:c}=d,u=Ee.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}s&&d.setAttribute("data-main-rotation",t.rotation)}class Di{constructor(){const{pixelRatio:t}=Di;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,o=-1){let c=1/0,u=1/0,h=1/0;s=Di.capPixels(s,o),s>0&&(c=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,h=r/i);const f=Math.min(c,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const mh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class KS{static get isDarkMode(){return gt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class QS{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),gt(this,"commentForegroundColor",Mr(s))}}function WS(d,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return d=Math.round(d*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[d,t,i]}function bm(d,t){const i=d[0]/255,s=d[1]/255,r=d[2]/255,o=Math.max(i,s,r),c=Math.min(i,s,r),u=(o+c)/2;if(o===c)t[0]=t[1]=0;else{const h=o-c;switch(t[1]=u<.5?h/(o+c):h/(2-o-c),o){case i:t[0]=((s-r)/h+(s<r?6:0))*60;break;case s:t[0]=((r-i)/h+2)*60;break;case r:t[0]=((i-s)/h+4)*60;break}}t[2]=u}function yh(d,t){const i=d[0],s=d[1],r=d[2],o=(1-Math.abs(2*r-1))*s,c=o*(1-Math.abs(i/60%2-1)),u=r-o/2;switch(Math.floor(i/60)){case 0:t[0]=o+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=o+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=c+u;break}}function vm(d){return d<=.03928?d/12.92:((d+.055)/1.055)**2.4}function Am(d,t,i){yh(d,i),i.map(vm);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];yh(t,i),i.map(vm);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const Sm=new Map;function ZS(d,t){const i=d[0]+d[1]*256+d[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Sm.get(i);if(s)return s;const r=new Float32Array(9),o=r.subarray(0,3),c=r.subarray(3,6);bm(d,c);const u=r.subarray(6,9);bm(t,u);const h=u[2]<.5,f=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),Am(c,u,o)<f){let g,y;h?(g=c[2],y=1):(g=0,y=c[2]);const b=.005;for(;y-g>b;){const A=c[2]=(g+y)/2;h===Am(c,u,o)<f?g=A:y=A}c[2]=h?y:g}return yh(c,o),s=nt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Sm.set(i,s),s}function yy({html:d,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof d=="string"){const o=document.createElement("p");o.dir=t||"auto";const c=d.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const f=c[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}r.append(o)}else my.render({xfaHtml:d,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",i),s.append(r)}function by(d){const t=new Path2D;if(!d)return t;for(let i=0,s=d.length;i<s;)switch(d[i++]){case rr.moveTo:t.moveTo(d[i++],d[i++]);break;case rr.lineTo:t.lineTo(d[i++],d[i++]);break;case rr.curveTo:t.bezierCurveTo(d[i++],d[i++],d[i++],d[i++],d[i++],d[i++]);break;case rr.quadraticCurveTo:t.quadraticCurveTo(d[i++],d[i++],d[i++],d[i++]);break;case rr.closePath:t.closePath();break;default:pt(`Unrecognized drawing path operator: ${d[i-1]}`);break}return t}class gr{#t=null;#e=null;#n;#i=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,gr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",pi,{signal:i}),t.addEventListener("pointerdown",gr.#l,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:o}=t,c=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,te(t)}#h(t){this.#n._focusEventsAllowed=!0,te(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",pi,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",gr.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#r=t}addComment(t,i=null){if(this.#a)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#s=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#o=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){switch(t){case"comment":this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null;break}}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class JS{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",pi,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,i){let s=0,r=0;for(const o of t){const c=o.y+o.height;if(c<s)continue;const u=o.x+(i?o.width:0);if(c>s){r=u,s=c;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,o]=this.#r(i,s),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,i,s,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",i);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",pi,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function vy(d,t,i){for(const s of i)t.addEventListener(s,d[s].bind(d))}class kt{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(kt.#e||=new Set).add(t)}static setPointer(t,i){kt.#t||=i,kt.#i??=t}static setTimeStamp(t){kt.#n=t}static isSamePointerId(t){return kt.#t===t}static isSamePointerIdOrRemove(t){return kt.#t===t?!0:(kt.#e?.delete(t),!1)}static isSamePointerType(t){return kt.#i===t}static isInitializedAndDifferentPointerType(t){return kt.#i!==null&&!kt.isSamePointerType(t)}static isSameTimeStamp(t){return kt.#n===t}static isUsingMultiplePointers(){return kt.#e?.size>=1}static clearPointerType(){kt.#i=null}static clearPointerIds(){kt.#t=NaN,kt.#e=null}static clearTimeStamp(){kt.#n=NaN}}class t1{#t=0;get id(){return`${yr}${this.#t++}`}}class Ph{#t=py();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return gt(this,"_isSVGFittingCanvas",o)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await Cr(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const o=Ph._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((f,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},c.onload=async()=>{const y=s.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=g});c.readAsDataURL(r),await h}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){pt(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:o}=t;return this.#i(`${i}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class e1{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:i,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(c&&this.#t[this.#i].type===o){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Rr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=Ee.platform;for(const[s,r,o={}]of t)for(const c of s){const u=c.startsWith("mac+");i&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!i&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...c,i)(),o||te(i))}}class zh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return $S(t),gt(this,"_colors",t)}convert(t){const i=Mr(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((o,c)=>o===i[c]))return zh._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?nt.makeHexColor(...i):t}}class On{#t=new AbortController;#e=null;#n=null;#i=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new e1;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#E=null;#x=null;#S=null;#T=null;#A=!1;#_=null;#D=new t1;#M=!1;#R=!1;#z=!1;#O=null;#k=null;#F=null;#B=null;#q=null;#C=mt.NONE;#w=new Set;#L=null;#U=null;#j=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#V=null;#Z=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=On.prototype,i=c=>c.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return gt(this,"_keyboardManager",new Rr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,s,r,o,c,u,h,f,g,y,b,A,w,S,_){const x=this._signal=this.#t.signal;this.#V=t,this.#Z=i,this.#J=s,this.#a=r,this.#l=o,this.#U=c,this.#X=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:x}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),u._on("setpreference",this.onSetPreference.bind(this),{signal:x}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:x}),window.addEventListener("pointerdown",()=>{this.#R=!0},{capture:!0,signal:x}),window.addEventListener("pointerup",()=>{this.#R=!1},{capture:!0,signal:x}),this.#rt(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#E=h.filterFactory,this.#j=f,this.#T=g||null,this.#y=y,this.#v=b,this.#b=A,this.#q=w||null,this.viewParameters={realScale:oa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1,o?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#i.clear(),this.#p.clear(),this.#B?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return gt(this,"hcmFilter",this.#j?this.#E.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return gt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return gt(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return gt(this,"highlightColors",null);const i=new Map,s=!!this.#j;for(const[r,o]of t){const c=r.endsWith("_HCM");if(s&&c){i.set(r.replace("_HCM",""),o);continue}!s&&!c&&i.set(r,o)}return gt(this,"highlightColors",i)}get highlightColorNames(){return gt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}hasCommentManager(){return!!this.#l}editComment(t,i,s,r){this.#l?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#r.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,i,s=void 0){this.#l?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#l?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=i;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,i){for(const s of this.#r.values()){const{x:r,y:o,width:c,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+c&&i>=o&&i<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*oa.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:c,focusOffset:u}=s,h=s.toString(),g=this.#W(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const b=this.#tt(g),A=this.#C===mt.NONE,w=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:o,focusNode:c,focusOffset:u,text:h});A&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(A){this.switchToMode(mt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#W(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#_||=new JS(this),this.#_.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${yr}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#_?.hide(),this.#L=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#L)return;const r=this.#W(t).closest(".textLayer");if(!r){this.#L&&(this.#_?.hide(),this.#L=null,this.#N({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#L=i,this.#N({hasSelectedText:!0}),!(this.#C!==mt.HIGHLIGHT&&this.#C!==mt.NONE)&&(this.#C===mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===mt.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#R){const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#C===mt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#w)if(i.div.contains(t)){this.#k=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,i]=this.#k;this.#k=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#w){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){pt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const h of s){const f=await r.deserialize(h);if(!f)return;o.push(f)}const c=()=>{for(const h of o)this.#it(h);this.#nt(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){pt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==mt.NONE&&!this.isEditorHandlingKeyboard&&On._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(t){Object.entries(t).some(([s,r])=>this.#$[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#C===mt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Mt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#N({isEditing:this.#C!==mt.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,o=!1){if(this.#C!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===mt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===mt.NONE){this.setEditingState(!1),this.#pt();for(const c of this.#i.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const c of this.#i.values())c.addStandaloneCommentButton();t===mt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const c of this.#r.values())c.updateMode(t);if(t===mt.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const c=new Set,u=[];for(const h of this.#i.values()){const{annotationElementId:f,hasComment:g,deleted:y}=h;f&&c.add(f),g&&!y&&u.push(h.getData())}for(const h of this.#n){const{id:f,popupRef:g,contentsObj:y}=h;g&&y?.str&&!c.has(f)&&!this.#m.has(f)&&u.push(h)}this.#l?.showSidebar(u)}if(!i){s&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const c of this.#i.values())c.uid===i?(this.setSelected(c),o?c.editComment():r?c.enterInEditMode():c.focus()):c.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(i);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#Y?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[Mt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const i of this.#r.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#r.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#r.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#r.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#w)i!==t&&i.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#N({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(t){this.#c.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(t){this.#c.cleanType(t)}#Q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#w],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},r=()=>{for(const o of i)this.#it(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#w)i.unselect();this.#w.clear();for(const i of t)i.isEmpty()||(this.#w.add(i),i.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==mt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=i;const[r,o]=this.#H,c=[...this.#w],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(r,o),h.translationDone())},undo:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(-r,-o),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(t,i),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#w)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let i=!1;for(const[{x:r,y:o,pageIndex:c},u]of t)u.newX=r,u.newY=o,u.newPageIndex=c,i||=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!i)return!1;const s=(r,o,c,u)=>{if(this.#i.has(r.id)){const h=this.#r.get(u);h?r._setParentAndPosition(h,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of t)s(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of t)s(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#g)for(const s of this.#g.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==mt.NONE}get imageManager(){return gt(this,"imageManager",new Ph)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,g=i.rangeCount;f<g;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,b)=>({x:(g-r)/c,y:1-(f+y-s)/o,width:b/c,height:y/o});break;case"180":u=(f,g,y,b)=>({x:1-(f+y-s)/o,y:1-(g+b-r)/c,width:y/o,height:b/c});break;case"270":u=(f,g,y,b)=>({x:1-(g+b-r)/c,y:(f-s)/o,width:b/c,height:y/o});break;default:u=(f,g,y,b)=>({x:(f-s)/o,y:(g-r)/c,width:y/o,height:b/c});break}const h=[];for(let f=0,g=i.rangeCount;f<g;f++){const y=i.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:A,width:w,height:S}of y.getClientRects())w===0||S===0||h.push(u(b,A,w,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#C===mt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#B?.get(t);r&&(r.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Ri{#t=null;#e=!1;#n=null;#i=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Ri.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ri._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ri.#f.missing),i.setAttribute("data-l10n-id",Ri.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",pi,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,r(o))},{signal:s}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Ri._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#l=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ri.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Ri.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#r;if(!i){this.#r=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class Zo{#t=null;#e=null;#n=!1;#i=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:o,width:c,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/c,(i+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",pi,{signal:s}),i&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,te(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,te(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,r(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:g,height:y,x:b,y:A}=this.#i;s=b+s*g,r=A+r*y}const o=this.#i.parent.boundingClientRect,{x:c,y:u,width:h,height:f}=o;this.#i._uiManager.editComment(this.#i,c+s*h,u+r*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,i=null){this.#r=t,this.data=t,this.#o=null,this.#a=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class El{#t;#e=!1;#n=null;#i;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#r=r,this.#a=o,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Di.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),c=this.#t,u={capture:!0,signal:o,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(te(f),h(f))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,c={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#g.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",te,c),o.addEventListener("pointermove",te,c),o.addEventListener("pointercancel",te,c),o.addEventListener("pointerup",te,c),this.#r?.()}if(te(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;te(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:o}=i,{screenX:c,screenY:u}=s,h=this.#l,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:b}=h,A=y-f,w=b-g,S=c-r,_=u-o,x=Math.hypot(S,_)||1,T=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(T-x)<=El.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=o,h.touch1X=c,h.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(r+c)/2,(o+u)/2];this.#a?.(C,T,x)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(te(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ot{#t=null;#e=null;#n=null;#i=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#E=0;#x=0;#S=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#_=ot._zIndex++;static _borderLineWidth=-1;static _colorManager=new zh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ot.prototype._resizeWithKeyboard,i=On.TRANSLATE_SMALL,s=On.TRANSLATE_BIG;return gt(this,"_resizerKeyboardManager",new Rr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ot.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,c];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return gt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new i1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(ot._l10n??=t,ot._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ot._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ot._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){Gt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[o,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(i+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#D([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#D(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,f]=this.getBaseTranslation();c+=h,u+=f;const{style:g}=s;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=ot,r=s/t,o=s/i;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:o,y:c,width:u,height:h}=this;if(u*=s,h*=r,o*=s,c*=r,this._mustFixPosition)switch(t){case 0:o=De(o,0,s-u),c=De(c,0,r-h);break;case 90:o=De(o,0,s-h),c=De(c,u,r);break;case 180:o=De(o,u,s),c=De(c,h,r);break;case 270:o=De(o,h,s),c=De(c,0,r-u);break}this.x=o/=s,this.y=c/=r;const[f,g]=this.getBaseTranslation();o+=f,c+=g,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return ot.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return ot.#M(t,i,360-this.parentRotation)}#R(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),r.addEventListener("contextmenu",pi,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=Ee.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[i.screenX,i.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",te,{passive:!1,signal:c}),window.addEventListener("contextmenu",pi,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#k(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const o=this.x,c=this.y,u=this.width,h=this.height;o===t&&c===i&&u===s&&h===r||this.addCommands({cmd:this.#k.bind(this,o,c,u,h),undo:this.#k.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,h=this.height,f=ot.MIN_SIZE/s,g=ot.MIN_SIZE/r,y=this.#R(this.rotation),b=(z,X)=>[y[0]*z+y[2]*X,y[1]*z+y[3]*X],A=this.#R(360-this.rotation),w=(z,X)=>[A[0]*z+A[2]*X,A[1]*z+A[3]*X];let S,_,x=!1,T=!1;switch(t){case"topLeft":x=!0,S=(z,X)=>[0,0],_=(z,X)=>[z,X];break;case"topMiddle":S=(z,X)=>[z/2,0],_=(z,X)=>[z/2,X];break;case"topRight":x=!0,S=(z,X)=>[z,0],_=(z,X)=>[0,X];break;case"middleRight":T=!0,S=(z,X)=>[z,X/2],_=(z,X)=>[0,X/2];break;case"bottomRight":x=!0,S=(z,X)=>[z,X],_=(z,X)=>[0,0];break;case"bottomMiddle":S=(z,X)=>[z/2,X],_=(z,X)=>[z/2,0];break;case"bottomLeft":x=!0,S=(z,X)=>[0,X],_=(z,X)=>[z,0];break;case"middleLeft":T=!0,S=(z,X)=>[0,X/2],_=(z,X)=>[z,X/2];break}const C=S(u,h),D=_(u,h);let k=b(...D);const B=ot._round(o+k[0]),N=ot._round(c+k[1]);let H=1,K=1,W,Z;if(i.fromKeyboard)({deltaX:W,deltaY:Z}=i);else{const{screenX:z,screenY:X}=i,[J,dt]=this.#l;[W,Z]=this.screenToPageTranslation(z-J,X-dt),this.#l[0]=z,this.#l[1]=X}if([W,Z]=w(W/s,Z/r),x){const z=Math.hypot(u,h);H=K=Math.max(Math.min(Math.hypot(D[0]-C[0]-W,D[1]-C[1]-Z)/z,1/u,1/h),f/u,g/h)}else T?H=De(Math.abs(D[0]-C[0]-W),f,1)/u:K=De(Math.abs(D[1]-C[1]-Z),g,1)/h;const st=ot._round(u*H),At=ot._round(h*K);k=b(..._(st,At));const vt=B-k[0],St=N-k[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=st,this.height=At,this.x=vt,this.y=St,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new gr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Ri.initialize(ot._l10n),this.#n=new Ri(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Zo(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#i.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Zo(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new Zo(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Zo(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#j();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),vy(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new El({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,i,s){let o=.7*(s/i)+1-.7;if(o===1)return;const c=this.#R(this.rotation),u=(B,N)=>[c[0]*B+c[2]*N,c[1]*B+c[3]*N],[h,f]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,w=ot.MIN_SIZE/h,S=ot.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/A),w/b,S/A);const _=ot._round(b*o),x=ot._round(A*o);if(_===b&&x===A)return;this.#u||=[g,y,b,A];const T=u(b/2,A/2),C=ot._round(g+T[0]),D=ot._round(y+T[1]),k=u(_/2,x/2);this.x=C-k[0],this.y=D-k[1],this.width=_,this.height=x,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:i}=Ee.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#U(t);return}this.#L(t)}#L(t){const{isMac:i}=Ee.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#L(f),s&&this._onStopDragging()};i&&(this.#E=t.clientX,this.#x=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=f;if(b!==this.#s){te(f);return}const[A,w]=this.screenToPageTranslation(g-this.#E,y-this.#x);this.#E=g,this.#x=y,this._uiManager.dragSelectedEditors(A,w)},c),window.addEventListener("touchmove",te,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&u(f),te(f)},c));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}te(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,g=i/r,y=this.x*o,b=this.y*c,A=this.width*o,w=this.height*c;switch(s){case 0:return[y+f+u,c-b-g-w+h,y+f+A+u,c-b-g+h];case 90:return[y+g+u,c-b+f+h,y+g+w+u,c-b+f+A+h];case 180:return[y-f-A+u,c-b+g+h,y-f+u,c-b+g+w+h];case 270:return[y-g-w+u,c-b-f-A+h,y-g+u,c-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,o,c]=t,u=o-s,h=c-r;switch(this.rotation){case 0:return[s,i-c,u,h];case 90:return[s,i-r,h,u];case 180:return[o,i-r,u,h];case 270:return[o,i-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ot._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:o,richText:c},uid:u,pageIndex:h,creationDate:f,modificationDate:g}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return i<c&&r>0&&t<o&&s>0}#j(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#j()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,c]=r.pageDimensions,[u,h,f,g]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/o,r.y=h/c,r.width=f/o,r.height=g/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#T?.destroy(),this.#T=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,o,c]=this.getPDFRect();return[ot._round(s+(o-s)*t),ot._round(r+(c-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const c=this.#Y.bind(this),u=this.#X.bind(this),h=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#$.bind(this,g),{signal:h}),f.setAttribute("data-l10n-id",ot._l10nResizer[g])}}const s=this.#e[0];let r=0;for(const c of i){if(c===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of i){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ot._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ot._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#m=this.#v?t:""}#H(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#P(){this.#v=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},ot._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstElementChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class i1 extends ot{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const wm=3285377520,hi=4294901760,Ti=65535;class Ay{constructor(t){this.h1=t?t&4294967295:wm,this.h2=t?t&4294967295:wm}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,_=t.length;S<_;S++){const x=t.charCodeAt(S);x<=255?i[s++]=x:(i[s++]=x>>>8,i[s++]=x&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,c=new Uint32Array(i.buffer,0,r);let u=0,h=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&Ti,w=b&Ti;for(let S=0;S<r;S++)S&1?(u=c[S],u=u*y&hi|u*A&Ti,u=u<<15|u>>>17,u=u*b&hi|u*w&Ti,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=c[S],h=h*y&hi|h*A&Ti,h=h<<15|h>>>17,h=h*b&hi|h*w&Ti,g^=h,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*y&hi|u*A&Ti,u=u<<15|u>>>17,u=u*b&hi|u*w&Ti,r&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&hi|t*36045&Ti,i=i*4283543511&hi|((i<<16|t>>>16)*2950163797&hi)>>>16,t^=i>>>1,t=t*444984403&hi|t*60499&Ti,i=i*3301882366&hi|((i<<16|t>>>16)*3120437893&hi)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const bh=Object.freeze({map:null,hash:"",transfer:void 0});class Fh{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof ot&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof ot)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[o,c]of Object.entries(i))s[o]!==c&&(r=!0,s[o]=c);else r=!0,this.#i.set(t,i);r&&this.#r(),i instanceof ot&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Sy(this)}get serializable(){if(this.#i.size===0)return bh;const t=new Map,i=new Ay,s=[],r=Object.create(null);let o=!1;for(const[c,u]of this.#i){const h=u instanceof ot?u.serialize(!1,r):u;h&&(t.set(c,h),i.update(`${c}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:bh}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const o of this.#i.values()){if(!(o instanceof ot)){o.popup&&(o.popup.deleted?r+=1:s+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(s+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;i.has(u)||i.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,g]of Object.entries(c)){if(f==="type")continue;let y=h.get(f);y||(y=new Map,h.set(f,y));const b=y.get(g)??0;y.set(g,b+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[o,c]of i)t[o]=c.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class Sy extends Fh{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){Gt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return gt(this,"modifiedIds",{ids:new Set,hash:""})}}class n1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Rt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:c}=t,u=new FontFace(r,o,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Gt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw pt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return gt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return gt(this,"isSyncFontLoadingSupported",Re||Ee.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Rt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return gt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(D,k){return D.charCodeAt(k)<<24|D.charCodeAt(k+1)<<16|D.charCodeAt(k+2)<<8|D.charCodeAt(k+3)&255}function r(D,k,B,N){const H=D.substring(0,k),K=D.substring(k+B);return H+N+K}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function g(D,k){if(++f>30){pt("Load test font never loaded."),k();return}if(h.font="30px "+D,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(g.bind(null,D,k))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const w=16,S=1482184792;let _=s(b,w);for(o=0,c=y.length-3;o<c;o+=4)_=_-S+s(y,o)|0;o<y.length&&(_=_-S+s(y+"XXX",o)|0),b=r(b,w,4,zS(_));const x=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${y}";src:${x}}`;this.insertRule(T);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const D of[t.loadedName,y]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=D,C.append(k)}this._document.body.append(C),g(y,()=>{C.remove(),i.complete()})}}class s1{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${gy(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(c){pt(`getPathGenerator - ignoring character: "${c}".`)}const o=by(r);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){gt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){gt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class ia{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const f of ia.strings){const g=i.encode(t[f]);s[f]=g,r+=4+g.length}const o=new ArrayBuffer(r),c=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of ia.strings){const g=s[f],y=g.length;u.setUint32(h,y),c.set(g,h+4),h+=4+y}return Rt(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Rt(t<ia.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class na{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const b of na.strings){const A=i.encode(t[b]);s[b]=A,r+=4+A.length}r+=4;let o,c,u=1+r;t.style&&(o=i.encode(t.style.style),c=i.encode(t.style.weight),u+=4+o.length+4+c.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),g=new DataView(h);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,r=0;for(const b of na.strings){const A=s[b],w=A.length;r+=4+w,g.setUint32(y,w),f.set(A,y+4),y+=4+w}return g.setUint32(y-r-4,r),t.style&&(g.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,g.setUint32(y,c.length),f.set(c,y+4),y+=4+c.length),Rt(y<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Rt(t<na.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:o}}}class It{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#r=this.#i+1+6;#a;#s;#o;constructor({data:t,extra:i}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),i&&Object.assign(this,i)}#c(t){Rt(t<It.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#o.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Rt(t<It.numbers.length,"Invalid number index"),this.#o.getFloat64(It.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=It.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=It.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=It.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Rt(t<It.strings.length,"Invalid string index");let i=It.#r+4;for(let o=0;o<t;o++)i+=this.#o.getUint32(i)+4;const s=this.#o.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,i+4,s)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=It.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#a,t+4,o)}clearData(){let t=It.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=It.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#a,t+4,r)),new ia(o.buffer)}get systemFontInfo(){let t=It.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,t+4,s)),new na(r.buffer)}static write(t){const i=t.systemFontInfo?na.write(t.systemFontInfo):null,s=t.cssFontInfo?ia.write(t.cssFontInfo):null,r=new TextEncoder,o={};let c=0;for(const S of It.strings)o[S]=r.encode(t[S]),c+=4+o[S].length;const u=It.#r+4+c+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),g=new DataView(h);let y=0;const b=It.bools.length;let A=0,w=0;for(let S=0;S<b;S++){const _=t[It.bools[S]];A|=(_===void 0?0:_?2:1)<<w,w+=2,(w===8||S===b-1)&&(g.setUint8(y++,A),A=0,w=0)}Rt(y===It.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of It.numbers)g.setFloat64(y,t[S]),y+=8;if(Rt(y===It.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Rt(y===It.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Rt(y===It.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Rt(y===It.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(It.#r,0),y+=4;for(const S of It.strings){const _=o[S],x=_.length;g.setUint32(y,x),f.set(_,y+4),y+=4+x}if(g.setUint32(It.#r,y-It.#r-4),!i)g.setUint32(y,0),y+=4;else{const S=i.byteLength;g.setUint32(y,S),Rt(y+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Rt(y+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Rt(y<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(y)}}class pe{static#t=0;static#e=1;static#n=2;static#i=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,r=[],o=[],c=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],c=t[3],i===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,h=t[1],r=t[2],o=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(r.length/2),y=Math.floor(o.length/3),b=c.length,A=u.length;let w=0;for(const k of u)w+=1,w=Math.ceil(w/4)*4,w+=4+k.coords.length*4,w+=4+k.colors.length*4,k.verticesPerRow!==void 0&&(w+=4);const S=20+g*8+y*3+b*8+(s?16:0)+(f?3:0)+w,_=new ArrayBuffer(S),x=new DataView(_),T=new Uint8Array(_);x.setUint8(pe.#t,i),x.setUint8(pe.#e,s?1:0),x.setUint8(pe.#n,f?1:0),x.setUint8(pe.#i,h),x.setUint32(pe.#r,g,!0),x.setUint32(pe.#a,y,!0),x.setUint32(pe.#s,b,!0),x.setUint32(pe.#o,A,!0);let C=20;new Float32Array(_,C,g*2).set(r),C+=g*8,T.set(o,C),C+=y*3;for(const[k,B]of c)x.setFloat32(C,k,!0),C+=4,x.setUint32(C,parseInt(B.slice(1),16),!0),C+=4;if(s)for(const k of s)x.setFloat32(C,k,!0),C+=4;f&&(T.set(f,C),C+=3);for(let k=0;k<u.length;k++){const B=u[k];x.setUint8(C,B.type),C+=1,C=Math.ceil(C/4)*4,x.setUint32(C,B.coords.length,!0),C+=4,new Int32Array(_,C,B.coords.length).set(B.coords),C+=B.coords.length*4,x.setUint32(C,B.colors.length,!0),C+=4,new Int32Array(_,C,B.colors.length).set(B.colors),C+=B.colors.length*4,B.verticesPerRow!==void 0&&(x.setUint32(C,B.verticesPerRow,!0),C+=4)}return _}getIR(){const t=this.view,i=this.data[pe.#t],s=!!this.data[pe.#e],r=!!this.data[pe.#n],o=t.getUint32(pe.#r,!0),c=t.getUint32(pe.#a,!0),u=t.getUint32(pe.#s,!0),h=t.getUint32(pe.#o,!0);let f=20;const g=new Float32Array(this.buffer,f,o*2);f+=o*8;const y=new Uint8Array(this.buffer,f,c*3);f+=c*3;const b=[];for(let _=0;_<u;++_){const x=t.getFloat32(f,!0);f+=4;const T=t.getUint32(f,!0);f+=4,b.push([x,`#${T.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let _=0;_<4;++_)A.push(t.getFloat32(f,!0)),f+=4}let w=null;r&&(w=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let _=0;_<h;++_){const x=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const T=t.getUint32(f,!0);f+=4;const C=new Int32Array(this.buffer,f,T);f+=T*4;const D=t.getUint32(f,!0);f+=4;const k=new Int32Array(this.buffer,f,D);f+=D*4;const B={type:x,coords:C,colors:k};x===fh.LATTICE&&(B.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(B)}if(i===1)return["RadialAxial","axial",A,b,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",A,b,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(i===3){const _=this.data[pe.#i];let x=null;if(g.length>0){let T=g[0],C=g[0],D=g[1],k=g[1];for(let B=0;B<g.length;B+=2){const N=g[B],H=g[B+1];T=T>N?N:T,D=D>H?H:D,C=C<N?N:C,k=k<H?H:k}x=[T,D,C,k]}return["Mesh",_,g,y,S,x,A,w]}throw new Error(`Unsupported pattern kind: ${i}`)}}function a1(d){if(d instanceof URL)return d.href;if(typeof d=="string"){if(Re)return d;const t=URL.parse(d,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function r1(d){if(Re&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return Er(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d?.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Jo(d){if(typeof d!="string")return null;if(d.endsWith("/"))return d;throw new Error(`Invalid factory url: "${d}" must include trailing slash.`)}const vh=d=>typeof d=="object"&&Number.isInteger(d?.num)&&d.num>=0&&Number.isInteger(d?.gen)&&d.gen>=0,o1=d=>typeof d=="object"&&typeof d?.name=="string",l1=HS.bind(null,vh,o1);class c1{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){pt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,i);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const tl={DATA:1,ERROR:2},ce={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function xm(){}function Ie(d){if(d instanceof Nn||d instanceof ph||d instanceof gm||d instanceof fl||d instanceof eh)return d;switch(d instanceof Error||typeof d=="object"&&d!==null||Gt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new Nn(d.message);case"InvalidPDFException":return new ph(d.message);case"PasswordException":return new gm(d.message,d.code);case"ResponseException":return new fl(d.message,d.status,d.missing);case"UnknownErrorException":return new eh(d.message,d.details)}return new eh(d.message,d.toString())}class fr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===tl.DATA)r.resolve(t.data);else if(t.callback===tl.ERROR)r.reject(Ie(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(c){o.postMessage({sourceName:s,targetName:r,callback:tl.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:s,targetName:r,callback:tl.ERROR,callbackId:t.callbackId,reason:Ie(c)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,i,s,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:i,desiredSize:f.desiredSize},r),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,h.postMessage({sourceName:c,targetName:u,stream:ce.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Rt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:ce.CANCEL,streamId:o,reason:Ie(f)}),g.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],h={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:ce.ENQUEUE,streamId:i,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ce.CLOSE,streamId:i}),delete c.streamSinks[i])},error(f){Rt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ce.ERROR,streamId:i,reason:Ie(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[i]=h,Promise.try(u,t.data,h).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ce.START_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ce.START_COMPLETE,streamId:i,reason:Ie(f)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ce.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Ie(t.reason));break;case ce.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Ie(t.reason));break;case ce.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:ce.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||xm).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ce.PULL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ce.PULL_COMPLETE,streamId:i,reason:Ie(f)})});break;case ce.ENQUEUE:if(Rt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ce.CLOSE:if(Rt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,i);break;case ce.ERROR:Rt(c,"error should have stream controller"),c.controller.error(Ie(t.reason)),this.#r(c,i);break;case ce.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Ie(t.reason)),this.#r(c,i);break;case ce.CANCEL:if(!u)break;const h=Ie(t.reason);Promise.try(u.onCancel||xm,h).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ce.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ce.CANCEL_COMPLETE,streamId:i,reason:Ie(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#r(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class wy{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){Gt("Abstract method `_createCanvas` called.")}}class u1 extends wy{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class xy{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class _m extends xy{async _fetch(t){const i=await Cr(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Er(i)}}class _y{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,o){return"none"}destroy(t=!1){}}class h1 extends _y{#t;#e;#n;#i;#r;#a;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#r=i}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#n){const t=this.#r.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#r.createElementNS(Wi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(Wi,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=h[y]/255;const g=f.join(",");return[g,g,g]}const[i,s,r]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=i[h]/255,c[h]=s[h]/255,u[h]=r[h]/255;return[o.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#r.URL;i!==this.#r.baseURI&&(_l(i)?pt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=dy(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[s,r,o]=this.#d(t),c=t.length===1?s:`${s}${r}${o}`;if(i=this.#o.get(c),i)return this.#o.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(c,h);const f=this.#g(u);return this.#p(s,r,o,f),h}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let o=this.#c.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(r,o)),!t||!i))return o.url;const c=this.#v(t);t=nt.makeHexColor(...c);const u=this.#v(i);if(i=nt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const h=new Array(256);for(let A=0;A<=255;A++){const w=A/255;h[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=h.join(","),g=`g_${this.#i}_hcm_filter`,y=o.filter=this.#g(g);this.#p(f,f,f,y),this.#m(y);const b=(A,w)=>{const S=c[A]/255,_=u[A]/255,x=new Array(w+1);for(let T=0;T<=w;T++)x[T]=S+T/w*(_-S);return x.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_alpha_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(r,c);const u=this.#g(o);return this.#y(s,u),c}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_luminosity_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(r,c);const u=this.#g(o);return this.#f(u),t&&this.#y(s,u),c}addHighlightHCMFilter(t,i,s,r,o){const c=`${i}-${s}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[h,f]=[i,s].map(this.#v.bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,A]=[r,o].map(this.#v.bind(this));y<g&&([g,y,b,A]=[y,g,A,b]),this.#l.style.color="";const w=(x,T,C)=>{const D=new Array(256),k=(y-g)/C,B=x/255,N=(T-x)/(255*C);let H=0;for(let K=0;K<=C;K++){const W=Math.round(g+K*k),Z=B+K*N;for(let st=H;st<=W;st++)D[st]=Z;H=W+1}for(let K=H;K<256;K++)D[K]=D[H-1];return D.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,_=u.filter=this.#g(S);return this.#m(_),this.#p(w(b[0],A[0],5),w(b[1],A[1],5),w(b[2],A[2],5),_),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const i=this.#r.createElementNS(Wi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#r.createElementNS(Wi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#r.createElementNS(Wi,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#u(t,i,s){const r=this.#r.createElementNS(Wi,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#p(t,i,s,r){const o=this.#r.createElementNS(Wi,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",i),this.#u(o,"feFuncB",s)}#y(t,i){const s=this.#r.createElementNS(Wi,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,Mr(getComputedStyle(this.#l).getPropertyValue("color"))}}class Ey{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class Em extends Ey{async _fetch(t){const i=await Cr(t,"arraybuffer");return new Uint8Array(i)}}class Cy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class Cm extends Cy{async _fetch(t){const i=await Cr(t,"arraybuffer");return new Uint8Array(i)}}Re&&pt("Please use the `legacy` build in Node.js environments.");async function Uh(d){const i=await process.getBuiltinModule("fs").promises.readFile(d);return new Uint8Array(i)}class d1 extends _y{}class f1 extends wy{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class p1 extends xy{async _fetch(t){return Uh(t)}}class g1 extends Ey{async _fetch(t){return Uh(t)}}class m1 extends Cy{async _fetch(t){return Uh(t)}}const $s="__forcedDependency",{floor:Tm,ceil:Mm}=Math;function el(d,t,i,s,r,o){d[t*4+0]=Math.min(d[t*4+0],i),d[t*4+1]=Math.min(d[t*4+1],s),d[t*4+2]=Math.max(d[t*4+2],r),d[t*4+3]=Math.max(d[t*4+3],o)}const Ah=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class y1{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Ah}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const il=(d,t)=>{if(!d)return;let i=d.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},d.set(t,i)),i};class b1{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[$s]:[]};#n=new Map;#i=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#y(i),s&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,i){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(Ah,i.length)):this.#u.fill(Ah)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[$s]:{__proto__:this.#e[$s]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(il(this.#p,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(il(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const i=this.#r.pop();return i!==void 0&&(il(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#a.push(nt.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData($s,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency($s,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,i,s,r,o,c){const u=nt.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform()),h=[1/0,1/0,-1/0,-1/0];nt.axialAlignedBoundingBox([s,o,r,c],u,h);const f=nt.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,r,o,c){const u=this.#s;if(u[0]===1/0)return this;const h=nt.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform());if(u[0]===-1/0)return nt.axialAlignedBoundingBox([s,o,r,c],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return nt.axialAlignedBoundingBox([s,o,r,c],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,o=0,c=0,u){const h=s.bbox;let f,g;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],nt.axialAlignedBoundingBox(h,s.fontMatrix,g),(r!==1||o!==0||c!==0)&&nt.scaleMinMax([r,0,0,-r,o,c],g),f)))return this.recordBBox(t,i,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return h&&g&&f===void 0&&(f=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=c-y.actualBoundingBoxAscent&&g[3]>=c+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,g[0],g[2],g[1],g[3]):this.recordBBox(t,i,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#l,r=this.#t,o=this.#e;for(const c of i)c in this.#t?s.add(r[c]):c in o&&o[c].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#l.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[$s]),this.#p){const s=il(this.#p,t),{dependencies:r}=s;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Tm(this.#o[0]*256/this.#f),r=Tm(this.#o[1]*256/this.#m),o=Mm(this.#o[2]*256/this.#f),c=Mm(this.#o[3]*256/this.#m);el(this.#g,t,s,r,o,c);for(const u of this.#l)u!==t&&el(this.#g,u,s,r,o,c);for(const u of this.#i)u!==t&&el(this.#g,u,s,r,o,c);for(const u of this.#r)u!==t&&el(this.#g,u,s,r,o,c);i||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#l);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),i||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#l.add(i)}take(){return this.#h.clear(),new y1(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class pl{#t;#e;#n;#i=0;#r=0;constructor(t,i,s){if(t instanceof pl&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,o,c){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,o,c),this}recordBBox(t,i,s,r,o,c){return this.#n||this.#t.recordBBox(this.#e,i,s,r,o,c),this}recordCharacterBBox(t,i,s,r,o,c,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,o,c,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const di={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},_e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Sh(d,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),d.clip(r)}class Ih{isModifyingCurrentTransform(){return!1}getPattern(){Gt("Abstract method `getPattern` called.")}}class v1 extends Ih{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)i.addColorStop(s[0],s[1]);return i}getPattern(t,i,s,r){let o;if(r===_e.STROKE||r===_e.FILL){const c=i.current.getClippedPathBoundingBox(r,Qt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,h),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),s=nt.transform(s,[1,0,0,1,c[0],c[1]]),g.transform(...i.baseTransform),this.matrix&&g.transform(...this.matrix),Sh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else Sh(t,this._bbox),o=this._createGradient(t);return o}}function sh(d,t,i,s,r,o,c,u){const h=t.coords,f=t.colors,g=d.data,y=d.width*4;let b;h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=o,o=c,c=b),h[s+1]>h[r+1]&&(b=s,s=r,r=b,b=c,c=u,u=b),h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=o,o=c,c=b);const A=(h[i]+t.offsetX)*t.scaleX,w=(h[i+1]+t.offsetY)*t.scaleY,S=(h[s]+t.offsetX)*t.scaleX,_=(h[s+1]+t.offsetY)*t.scaleY,x=(h[r]+t.offsetX)*t.scaleX,T=(h[r+1]+t.offsetY)*t.scaleY;if(w>=T)return;const C=f[o],D=f[o+1],k=f[o+2],B=f[c],N=f[c+1],H=f[c+2],K=f[u],W=f[u+1],Z=f[u+2],st=Math.round(w),At=Math.round(T);let vt,St,z,X,J,dt,wt,O;for(let q=st;q<=At;q++){if(q<_){const ct=q<w?0:(w-q)/(w-_);vt=A-(A-S)*ct,St=C-(C-B)*ct,z=D-(D-N)*ct,X=k-(k-H)*ct}else{let ct;q>T?ct=1:_===T?ct=0:ct=(_-q)/(_-T),vt=S-(S-x)*ct,St=B-(B-K)*ct,z=N-(N-W)*ct,X=H-(H-Z)*ct}let Q;q<w?Q=0:q>T?Q=1:Q=(w-q)/(w-T),J=A-(A-x)*Q,dt=C-(C-K)*Q,wt=D-(D-W)*Q,O=k-(k-Z)*Q;const tt=Math.round(Math.min(vt,J)),lt=Math.round(Math.max(vt,J));let ht=y*q+tt*4;for(let ct=tt;ct<=lt;ct++)Q=(vt-ct)/(vt-J),Q<0?Q=0:Q>1&&(Q=1),g[ht++]=St-(St-dt)*Q|0,g[ht++]=z-(z-wt)*Q|0,g[ht++]=X-(X-O)*Q|0,g[ht++]=255}}function A1(d,t,i){const s=t.coords,r=t.colors;let o,c;switch(t.type){case fh.LATTICE:const u=t.verticesPerRow,h=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<h;o++){let g=o*u;for(let y=0;y<f;y++,g++)sh(d,i,s[g],s[g+1],s[g+u],r[g],r[g+1],r[g+u]),sh(d,i,s[g+u+1],s[g+1],s[g+u],r[g+u+1],r[g+1],r[g+u])}break;case fh.TRIANGLES:for(o=0,c=s.length;o<c;o+=3)sh(d,i,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class S1 extends Ih{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/y,w=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/A,scaleY:1/w},_=y+4,x=b+4,T=s.getCanvas("mesh",_,x),C=T.context,D=C.createImageData(y,b);if(i){const B=D.data;for(let N=0,H=B.length;N<H;N+=4)B[N]=i[0],B[N+1]=i[1],B[N+2]=i[2],B[N+3]=255}for(const B of this._figures)A1(D,B,S);return C.putImageData(D,2,2),{canvas:T.canvas,offsetX:u-2*A,offsetY:h-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){Sh(t,this._bbox);const o=new Float32Array(2);if(r===_e.SHADING)nt.singularValueDecompose2dScale(Qt(t),o);else if(this.matrix){nt.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;nt.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=h}else nt.singularValueDecompose2dScale(i.baseTransform,o);const c=this._createMeshCanvas(o,r===_e.SHADING?null:this._background,i.cachedCanvases);return r!==_e.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class w1 extends Ih{getPattern(){return"hotpink"}}function x1(d){switch(d[0]){case"RadialAxial":return new v1(d);case"Mesh":return new S1(d);case"Dummy":return new w1}throw new Error(`Unknown IR type: ${d[0]}`)}const Rm={COLORED:1,UNCOLORED:2};class jh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),xl("TilingType: "+c);const y=s[0],b=s[1],A=s[2],w=s[3],S=A-y,_=w-b,x=new Float32Array(2);nt.singularValueDecompose2dScale(this.matrix,x);const[T,C]=x;nt.singularValueDecompose2dScale(this.baseTransform,x);const D=T*x[0],k=C*x[1];let B=S,N=_,H=!1,K=!1;const W=Math.ceil(f*D),Z=Math.ceil(g*k),st=Math.ceil(S*D),At=Math.ceil(_*k);W>=st?B=f:H=!0,Z>=At?N=g:K=!0;const vt=this.getSizeAndScale(B,this.ctx.canvas.width,D),St=this.getSizeAndScale(N,this.ctx.canvas.height,k),z=t.cachedCanvases.getCanvas("pattern",vt.size,St.size),X=z.context,J=h.createCanvasGraphics(X,i);if(J.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(J,o,u),X.translate(-vt.scale*y,-St.scale*b),J.transform(0,vt.scale,0,0,St.scale,0,0),X.save(),J.dependencyTracker?.save(),this.clipBbox(J,y,b,A,w),J.baseTransform=Qt(J.ctx),J.executeOperatorList(r),J.endDrawing(),J.dependencyTracker?.restore(),X.restore(),H||K){const dt=z.canvas;H&&(B=f),K&&(N=g);const wt=this.getSizeAndScale(B,this.ctx.canvas.width,D),O=this.getSizeAndScale(N,this.ctx.canvas.height,k),q=wt.size,Q=O.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",q,Q),lt=tt.context,ht=H?Math.floor(S/f):0,ct=K?Math.floor(_/g):0;for(let ee=0;ee<=ht;ee++)for(let jt=0;jt<=ct;jt++)lt.drawImage(dt,q*ee,Q*jt,q,Q,0,0,q,Q);return{canvas:tt.canvas,scaleX:wt.scale,scaleY:O.scale,offsetX:y,offsetY:b}}return{canvas:z.canvas,scaleX:vt.scale,scaleY:St.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,i,s){const r=Math.max(jh.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,r,o){const c=r-i,u=o-s;t.ctx.rect(i,s,c,u),nt.axialAlignedBoundingBox([i,s,r,o],Qt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,o=t.current;switch(i){case Rm.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=c,r.strokeStyle=o.strokeColor=u;break;case Rm.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new PS(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,o){let c=s;r!==_e.SHADING&&(c=nt.transform(c,i.baseTransform),this.matrix&&(c=nt.transform(c,this.matrix)));const u=this.createPatternCanvas(i,o);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function _1({src:d,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=Ee.isLittleEndian?4278190080:255,[h,f]=c?[o,u]:[u,o],g=s>>3,y=s&7,b=d.length;i=new Uint32Array(i.buffer);let A=0;for(let w=0;w<r;w++){for(const _=t+g;t<_;t++){const x=t<b?d[t]:255;i[A++]=x&128?f:h,i[A++]=x&64?f:h,i[A++]=x&32?f:h,i[A++]=x&16?f:h,i[A++]=x&8?f:h,i[A++]=x&4?f:h,i[A++]=x&2?f:h,i[A++]=x&1?f:h}if(y===0)continue;const S=t<b?d[t++]:255;for(let _=0;_<y;_++)i[A++]=S&1<<7-_?f:h}return{srcPos:t,destPos:A}}const Dm=16,Nm=100,E1=15,Om=10,je=16,ah=new DOMMatrix,Je=new Float32Array(2),ta=new Float32Array([1/0,1/0,-1/0,-1/0]);function C1(d,t){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){t.save(),this.__originalSave()},d.restore=function(){t.restore(),this.__originalRestore()},d.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},d.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},d.transform=function(i,s,r,o,c,u){t.transform(i,s,r,o,c,u),this.__originalTransform(i,s,r,o,c,u)},d.setTransform=function(i,s,r,o,c,u){t.setTransform(i,s,r,o,c,u),this.__originalSetTransform(i,s,r,o,c,u)},d.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},d.rotate=function(i){t.rotate(i),this.__originalRotate(i)},d.clip=function(i){t.clip(i),this.__originalClip(i)},d.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},d.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},d.bezierCurveTo=function(i,s,r,o,c,u){t.bezierCurveTo(i,s,r,o,c,u),this.__originalBezierCurveTo(i,s,r,o,c,u)},d.rect=function(i,s,r,o){t.rect(i,s,r,o),this.__originalRect(i,s,r,o)},d.closePath=function(){t.closePath(),this.__originalClosePath()},d.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class T1{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function nl(d,t,i,s,r,o,c,u,h,f){const[g,y,b,A,w,S]=Qt(d);if(y===0&&b===0){const T=c*g+w,C=Math.round(T),D=u*A+S,k=Math.round(D),B=(c+h)*g+w,N=Math.abs(Math.round(B)-C)||1,H=(u+f)*A+S,K=Math.abs(Math.round(H)-k)||1;return d.setTransform(Math.sign(g),0,0,Math.sign(A),C,k),d.drawImage(t,i,s,r,o,0,0,N,K),d.setTransform(g,y,b,A,w,S),[N,K]}if(g===0&&A===0){const T=u*b+w,C=Math.round(T),D=c*y+S,k=Math.round(D),B=(u+f)*b+w,N=Math.abs(Math.round(B)-C)||1,H=(c+h)*y+S,K=Math.abs(Math.round(H)-k)||1;return d.setTransform(0,Math.sign(y),Math.sign(b),0,C,k),d.drawImage(t,i,s,r,o,0,0,K,N),d.setTransform(g,y,b,A,w,S),[K,N]}d.drawImage(t,i,s,r,o,c,u,h,f);const _=Math.hypot(g,y),x=Math.hypot(b,A);return[_*h,x*f]}class Lm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=dh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=we.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=ta.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=_e.FILL,i=null){const s=this.minMax.slice();if(t===_e.STROKE){i||Gt("Stroke bounding box must include transform."),nt.singularValueDecompose2dScale(i,Je);const r=Je[0]*this.lineWidth/2,o=Je[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=nt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ta,0)}getClippedPathBoundingBox(t=_e.FILL,i=null){return nt.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function km(d,t){if(t instanceof ImageData){d.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%je,o=(i-r)/je,c=r===0?o:o+1,u=d.createImageData(s,je);let h=0,f;const g=t.data,y=u.data;let b,A,w,S;if(t.kind===cl.GRAYSCALE_1BPP){const _=g.byteLength,x=new Uint32Array(y.buffer,0,y.byteLength>>2),T=x.length,C=s+7>>3,D=4294967295,k=Ee.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(w=b<o?je:r,f=0,A=0;A<w;A++){const B=_-h;let N=0;const H=B>C?s:B*8-7,K=H&-8;let W=0,Z=0;for(;N<K;N+=8)Z=g[h++],x[f++]=Z&128?D:k,x[f++]=Z&64?D:k,x[f++]=Z&32?D:k,x[f++]=Z&16?D:k,x[f++]=Z&8?D:k,x[f++]=Z&4?D:k,x[f++]=Z&2?D:k,x[f++]=Z&1?D:k;for(;N<H;N++)W===0&&(Z=g[h++],W=128),x[f++]=Z&W?D:k,W>>=1}for(;f<T;)x[f++]=0;d.putImageData(u,0,b*je)}}else if(t.kind===cl.RGBA_32BPP){for(A=0,S=s*je*4,b=0;b<o;b++)y.set(g.subarray(h,h+S)),h+=S,d.putImageData(u,0,A),A+=je;b<c&&(S=s*r*4,y.set(g.subarray(h,h+S)),d.putImageData(u,0,A))}else if(t.kind===cl.RGB_24BPP)for(w=je,S=s*w,b=0;b<c;b++){for(b>=o&&(w=r,S=s*w),f=0,A=S;A--;)y[f++]=g[h++],y[f++]=g[h++],y[f++]=g[h++],y[f++]=255;d.putImageData(u,0,b*je)}else throw new Error(`bad image kind: ${t.kind}`)}function Bm(d,t){if(t.bitmap){d.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%je,o=(i-r)/je,c=r===0?o:o+1,u=d.createImageData(s,je);let h=0;const f=t.data,g=u.data;for(let y=0;y<c;y++){const b=y<o?je:r;({srcPos:h}=_1({src:f,srcPos:h,dest:g,width:s,height:b,nonBlackColor:0})),d.putImageData(u,0,y*je)}}function or(d,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)d[s]!==void 0&&(t[s]=d[s]);d.setLineDash!==void 0&&(t.setLineDash(d.getLineDash()),t.lineDashOffset=d.lineDashOffset)}function sl(d){d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0);const{filter:t}=d;t!=="none"&&t!==""&&(d.filter="none")}function Pm(d,t){if(t)return!0;nt.singularValueDecompose2dScale(d,Je);const i=Math.fround(Di.pixelRatio*oa.PDF_TO_CSS_UNITS);return Je[0]<=i&&Je[1]<=i}const M1=["butt","round","square"],R1=["miter","round","bevel"],D1={},zm={};class sa{constructor(t,i,s,r,o,{optionalContentConfig:c,markedContentStack:u=null},h,f,g){this.ctx=t,this.current=new Lm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new T1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Qt(this.compositeCtx))}this.ctx.save(),sl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Qt(this.ctx)}executeOperatorList(t,i,s,r,o){const c=t.argsArray,u=t.fnArray;let h=i||0;const f=c.length;if(f===h)return h;const g=f-h>Om&&typeof s=="function",y=g?Date.now()+E1:0;let b=0;const A=this.commonObjs,w=this.objs;let S,_;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(!o||o(h))if(S=u[h],_=c[h]??null,S!==br.dependency)_===null?this[S](h):this[S](h,..._);else for(const x of _){this.dependencyTracker?.recordNamedData(x,h);const T=x.startsWith("g_")?A:w;if(!T.has(x))return T.get(x,s),h}if(h++,h===f)return h;if(g&&++b>Om){if(Date.now()>y)return s(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),c=Math.max(Math.hypot(i[2],i[3]),1),u=s,h=r,f="prescale1",g,y;for(;o>2&&u>1||c>2&&h>1;){let b=u,A=h;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),c>2&&h>1&&(A=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/A),g=this.cachedCanvases.getCanvas(f,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,h,0,0,b,A),t=g.canvas,u=b,h=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:o}=i,c=this.current.fillColor,u=this.current.patternFill,h=Qt(s);let f,g,y,b;if((i.bitmap||i.data)&&i.count>1){const W=i.bitmap||i.data.buffer;g=JSON.stringify(u?h:[h.slice(0,4),c]),f=this._cachedBitmapsMap.get(W),f||(f=new Map,this._cachedBitmapsMap.set(W,f));const Z=f.get(g);if(Z&&!u){const st=Math.round(Math.min(h[0],h[2])+h[4]),At=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,di.transformAndFill),{canvas:Z,offsetX:st,offsetY:At}}y=Z}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,o),Bm(b.context,i));let A=nt.transform(h,[1/r,0,0,-1/o,0,0]);A=nt.transform(A,[1,0,0,1,0,-o]);const w=ta.slice();nt.axialAlignedBoundingBox([0,0,r,o],A,w);const[S,_,x,T]=w,C=Math.round(x-S)||1,D=Math.round(T-_)||1,k=this.cachedCanvases.getCanvas("fillCanvas",C,D),B=k.context,N=S,H=_;B.translate(-N,-H),B.transform(...A),y||(y=this._scaleImage(b.canvas,Ci(B)),y=y.img,f&&u&&f.set(g,y)),B.imageSmoothingEnabled=Pm(Qt(B),i.interpolate),nl(B,y,0,0,y.width,y.height,0,0,r,o),B.globalCompositeOperation="source-in";const K=nt.transform(Ci(B),[1,0,0,1,-N,-H]);return B.fillStyle=u?c.getPattern(s,this,K,_e.FILL,t):c,B.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,k.canvas)),this.dependencyTracker?.recordDependencies(t,di.transformAndFill),{canvas:k.canvas,offsetX:Math.round(N),offsetY:Math.round(H)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=M1[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=R1[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),or(this.suspendedCtx,c),C1(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),or(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const o=r[0],c=r[1],u=r[2]-o,h=r[3]-c;u===0||h===0||(this.genericComposeSMask(i.context,s,u,h,i.subtype,i.backdrop,i.transferMap,o,c,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,o,c,u,h,f,g,y){let b=t.canvas,A=h-g,w=f-y;if(c)if(A<0||w<0||A+s>b.width||w+r>b.height){const _=this.cachedCanvases.getCanvas("maskExtension",s,r),x=_.context;x.drawImage(b,-A,-w),x.globalCompositeOperation="destination-atop",x.fillStyle=c,x.fillRect(0,0,s,r),x.globalCompositeOperation="source-over",b=_.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(A,w,s,r),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,w,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,f,s,r),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(b,A,w,s,r,h,f,s,r),i.restore()}save(t){this.inSMaskMode&&or(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&or(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[o]=s;if(!r){o||=s[0]=new Path2D,this[i](t,o);return}if(this.dependencyTracker!==null){const c=i===br.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-c,r[2]+c,r[1]-c,r[3]+c).recordDependencies(t,["transform"])}o instanceof Path2D||(o=s[0]=by(o)),nt.axialAlignedBoundingBox(r,Qt(this.ctx),this.current.minMax),this[i](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,Ci(r),_e.STROKE,t),c){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(c)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,di.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(_e.STROKE,Qt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,Ci(r),_e.FILL,t),f){const g=new Path2D;g.addPath(i,r.getTransform().invertSelf().multiplySelf(f)),i=g}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,di.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,h)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,di.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=D1}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=zm}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,o=s.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:f,path:g}of i)g&&r.addPath(g,new DOMMatrix(c).preMultiplySelf(o).translate(u,h).scale(f,-f));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),o=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(o.fontMatrix=r.fontMatrix||dh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&pt("Invalid font matrix for font "+i),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const c=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${c}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let g=s;s<Dm?g=Dm:s>Nm&&(g=Nm),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${h} ${g}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,o,c){const u=this.ctx,h=this.current,f=h.font,g=h.textRenderingMode,y=h.fontSize/h.fontSizeScale,b=g&we.FILL_STROKE_MASK,A=!!(g&we.ADD_TO_PATH_FLAG),w=h.patternFill&&!f.missingFile,S=h.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||A||w||S)&&!f.missingFile&&(_=f.getPathGenerator(this.commonObjs,i)),_&&(f.disableFontFace||w||S)){u.save(),u.translate(s,r),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let x;if(b===we.FILL||b===we.FILL_STROKE)if(o){x=u.getTransform(),u.setTransform(...o);const T=this.#n(_,x,o);u.fill(T)}else u.fill(_);if(b===we.STROKE||b===we.FILL_STROKE)if(c){x||=u.getTransform(),u.setTransform(...c);const{a:T,b:C,c:D,d:k}=x,B=nt.inverseTransform(c),N=nt.transform([T,C,D,k,0,0],B);nt.singularValueDecompose2dScale(N,Je),u.lineWidth*=Math.max(Je[0],Je[1])/y,u.stroke(this.#n(_,x,c))}else u.lineWidth/=y,u.stroke(_);u.restore()}else(b===we.FILL||b===we.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i))),(b===we.STROKE||b===we.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i)).recordDependencies(t,di.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:Qt(u),x:s,y:r,fontSize:y,path:_}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return gt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,di.showText).resetBBox(t),this.current.textRenderingMode&we.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=s.fontSizeScale,h=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,b=i.length,A=r.vertical,w=A?1:-1,S=r.defaultVMetrics,_=o*s.fontMatrix[0],x=s.textRenderingMode===we.FILL&&!r.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),g>0?c.scale(y,-1):c.scale(y,1);let T,C;if(s.patternFill){c.save();const H=s.fillColor.getPattern(c,this,Ci(c),_e.FILL,t);T=Qt(c),c.restore(),c.fillStyle=H}if(s.patternStroke){c.save();const H=s.strokeColor.getPattern(c,this,Ci(c),_e.STROKE,t);C=Qt(c),c.restore(),c.strokeStyle=H}let D=s.lineWidth;const k=s.textMatrixScale;if(k===0||D===0){const H=s.textRenderingMode&we.FILL_STROKE_MASK;(H===we.STROKE||H===we.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=k;if(u!==1&&(c.scale(u,u),D/=u),c.lineWidth=D,r.isInvalidPDFjsFont){const H=[];let K=0;for(const Z of i)H.push(Z.unicode),K+=Z.width;const W=H.join("");if(c.fillText(W,0,0),this.dependencyTracker!==null){const Z=c.measureText(W);this.dependencyTracker.recordBBox(t,this.ctx,-Z.actualBoundingBoxLeft,Z.actualBoundingBoxRight,-Z.actualBoundingBoxAscent,Z.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=K*_*y,c.restore(),this.compose();return}let B=0,N;for(N=0;N<b;++N){const H=i[N];if(typeof H=="number"){B+=w*H*o/1e3;continue}let K=!1;const W=(H.isSpace?f:0)+h,Z=H.fontChar,st=H.accent;let At,vt,St=H.width;if(A){const J=H.vmetric||S,dt=-(H.vmetric?J[1]:St*.5)*_,wt=J[2]*_;St=J?-J[0]:St,At=dt/u,vt=(B+wt)/u}else At=B/u,vt=0;let z;if(r.remeasure&&St>0){z=c.measureText(Z);const J=z.width*1e3/o*u;if(St<J&&this.isFontSubpixelAAEnabled){const dt=St/J;K=!0,c.save(),c.scale(dt,1),At/=dt}else St!==J&&(At+=(St-J)/2e3*o/u)}if(this.contentVisible&&(H.isInFont||r.missingFile)){if(x&&!st)c.fillText(Z,At,vt),this.dependencyTracker?.recordCharacterBBox(t,c,z?{bbox:null}:r,o/u,At,vt,()=>z??c.measureText(Z));else if(this.paintChar(t,Z,At,vt,T,C),st){const J=At+o*st.offset.x/u,dt=vt-o*st.offset.y/u;this.paintChar(t,st.fontChar,J,dt,T,C)}}const X=A?St*_-W*g:St*_+W*g;B+=X,K&&c.restore()}A?s.y-=B:s.x+=B*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,o=r.font,c=r.fontSize,u=r.fontDirection,h=o.vertical?1:-1,f=r.charSpacing,g=r.wordSpacing,y=r.textHScale*u,b=r.fontMatrix||dh,A=i.length,w=r.textRenderingMode===we.INVISIBLE;let S,_,x,T;if(w||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(y,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new pl(C,t):null,S=0;S<A;++S){if(_=i[S],typeof _=="number"){T=h*_*c/1e3,this.ctx.translate(T,0),r.x+=T*y;continue}const D=(_.isSpace?g:0)+f,k=o.charProcOperatorList[_.operatorListId];k?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...b),this.executeOperatorList(k),this.restore()):pt(`Type3 character "${_.operatorListId}" is not available.`);const B=[_.width,0];nt.applyTransform(B,b),x=B[0]*c+D,s.translate(x,0),r.x+=x*y}s.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,o,c,u){const h=new Path2D;h.rect(r,o,c-r,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,c,o,u).recordClipBox(t,this.ctx,r,c,o,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||Qt(this.ctx),o={createCanvasGraphics:(c,u)=>new sa(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new pl(this.dependencyTracker,u,!0):null)};s=new jh(i,this.ctx,o,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=x1(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,Ci(s),_e.SHADING,t);const o=Ci(s);if(o){const{width:c,height:u}=s.canvas,h=ta.slice();nt.axialAlignedBoundingBox([0,0,c,u],o,h);const[f,g,y,b]=h;this.ctx.fillRect(f,g,y-f,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,di.transform).recordDependencies(t,di.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Gt("Should not call beginInlineImage")}beginImageData(){Gt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=Qt(this.ctx),s)){nt.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,c,u]=s,h=new Path2D;h.rect(r,o,c-r,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,c,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||xl("TODO: Support non-isolated groups."),i.knockout&&pt("Knockout groups not supported.");const r=Qt(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let o=ta.slice();nt.axialAlignedBoundingBox(i.bbox,Qt(s),o);const c=[0,0,s.canvas.width,s.canvas.height];o=nt.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;i.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,g),A=b.context;A.translate(-u,-h),A.transform(...r);let w=new Path2D;const[S,_,x,T]=i.bbox;if(w.rect(S,_,x-S,T-_),i.matrix){const C=new Path2D;C.addPath(w,new DOMMatrix(i.matrix)),w=C}A.clip(w),i.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:h,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),or(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Qt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const c=ta.slice();nt.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,i,s,r,o,c){if(this.#t(),sl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(c&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,nt.singularValueDecompose2dScale(Qt(this.ctx),Je);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(Je[0],0,0,-Je[1],0,h*Je[1]),sl(this.ctx)}else{sl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,h),this.ctx.clip(f)}}this.current=new Lm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,o=this._createMaskCanvas(t,i),c=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,o=0,c,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const h=this.ctx;h.save();const f=Qt(h);h.transform(s,r,o,c,0,0);const g=this._createMaskCanvas(t,i);h.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=nt.transform(f,[s,r,o,c,u[y],u[y+1]]);h.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,di.transformAndFill);for(const c of i){const{data:u,width:h,height:f,transform:g}=c,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=y.context;b.save();const A=this.getObject(t,u,c);Bm(b,A),b.globalCompositeOperation="source-in",b.fillStyle=o?r.getPattern(b,this,Ci(s),_e.FILL,t):r,b.fillRect(0,0,h,f),b.restore(),s.save(),s.transform(...g),s.scale(1,-1),nl(s,y.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,h,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,o){if(!this.contentVisible)return;const c=this.getObject(t,i);if(!c){pt("Dependent image isn't ready yet");return}const u=c.width,h=c.height,f=[];for(let g=0,y=o.length;g<y;g+=2)f.push({transform:[s,0,0,r,o[g],o[g+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(i,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,o=this.ctx;this.save(t);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,r).context;km(g,i),u=this.applyTransferMapsToCanvas(g)}const h=this._scaleImage(u,Ci(o));o.imageSmoothingEnabled=Pm(Qt(o),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-r,0).recordDependencies(t,di.imageXObject).recordOperation(t),nl(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let o;if(i.bitmap)o=i.bitmap;else{const c=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;km(f,i),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of s)r.save(),r.transform(...c.transform),r.scale(1,-1),nl(r,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,di.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===zm?o.clip(i,"evenodd"):o.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Qt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:o}=this.ctx.getTransform();let c,u;if(s===0&&r===0){const h=Math.abs(i),f=Math.abs(o);if(h===f)if(t===0)c=u=1/h;else{const g=h*t;c=u=g<1?1/g:1}else if(t===0)c=1/h,u=1/f;else{const g=h*t,y=f*t;c=g<1?1/g:1,u=y<1?1/y:1}}else{const h=Math.abs(i*o-s*r),f=Math.hypot(i,s),g=Math.hypot(r,o);if(t===0)c=g/h,u=f/h;else{const y=t*h;c=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[o,c]=this.getScaleForStroking();if(o===c){s.lineWidth=(r||1)*o,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(o,c),ah.a=1/o,ah.d=1/c;const h=new Path2D;if(h.addPath(t,ah),u.length>0){const f=Math.max(o,c);s.setLineDash(u.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=r||1,s.stroke(h),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const d in br)sa.prototype[d]!==void 0&&(sa.prototype[br[d]]=sa.prototype[d]);class aa{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class N1{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Qs=Symbol("INTERNAL");class O1{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&Ze.DISPLAY),this.#e=!!(t&Ze.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==Qs&&Gt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class L1{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=Ze.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new O1(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Qs,!1);for(const s of t.on)this.#e.get(s)._setVisible(Qs,!0);for(const s of t.off)this.#e.get(s)._setVisible(Qs,!1);this.#n=this.getHash()}}#r(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const o=t[r];let c;if(Array.isArray(o))c=this.#r(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return pt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return xl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return pt(`Unknown optional content policy ${t.policy}.`),!0}return pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){pt(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(Qs,!1,!0);r._setVisible(Qs,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Ay;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class k1{constructor(t,{disableRange:i=!1,disableStream:s=!1}){Rt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Rt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Rt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new B1(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new P1(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class B1{constructor(t,i,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=Bh(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class P1{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function z1(d){let t=!0,i=s("filename\\*","i").exec(d);if(i){i=i[1];let g=u(i);return g=unescape(g),g=h(g),g=f(g),o(g)}if(i=c(d),i){const g=f(i);return o(g)}if(i=s("filename","i").exec(d),i){i=i[1];let g=u(i);return g=f(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=Er(y);y=b.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function c(g){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,S,_,x]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[_,x]}const w=[];for(let S=0;S<y.length&&S in y;++S){let[_,x]=y[S];x=u(x),_&&(x=unescape(x),S===0&&(x=h(x))),w.push(x)}return w.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function h(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),w=g.slice(y+1).replace(/^[^']*'/,"");return r(b,w)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,_){return String.fromCharCode(parseInt(_,16))}),r(b,w);try{w=atob(w)}catch{}return r(b,w)})}return""}function Ty(d,t){const i=new Headers;if(!d||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function Cl(d){return URL.parse(d)?.origin??null}function My({responseHeaders:d,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(d.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*i)||s||!t||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Ry(d){const t=d.get("Content-Disposition");if(t){let i=z1(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Bh(i))return i}return null}function Dr(d,t){return new fl(`Unexpected server response (${d}) while retrieving PDF "${t}".`,d,d===404||d===0&&t.startsWith("file:"))}function Dy(d){return d===200||d===206}function Ny(d,t,i){return{method:"GET",headers:d,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Oy(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(pt(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class F1{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Ty(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Rt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new U1(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new I1(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class U1{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),r=i.url;fetch(r,Ny(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Cl(o.url),!Dy(o.status))throw Dr(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:h}=My({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=Ry(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Nn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Oy(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class I1{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${i}-${s-1}`);const c=r.url;fetch(c,Ny(o,this._withCredentials,this._abortController)).then(u=>{const h=Cl(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!Dy(u.status))throw Dr(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Oy(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const rh=200,oh=206;function j1(d){const t=d.response;return typeof t!="string"?t:Er(t).buffer}class H1{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Ty(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[o,c]of this.headers)i.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=oh):r.expectedStatus=rh,i.responseType="arraybuffer",Rt(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){const s=this.pendingRequests[t];s&&s.onProgress?.(i)}onStateChange(t,i){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const o=r.status||rh;if(!(o===rh&&s.expectedStatus===oh)&&o!==s.expectedStatus){s.onError(r.status);return}const u=j1(r);if(o===oh){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(pt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class G1{constructor(t){this._source=t,this._manager=new H1(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Rt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new q1(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new V1(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class q1{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=Cl(i.responseURL);const s=i.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=My({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Ry(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Dr(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class V1{constructor(t,i,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Cl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Dr(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const X1=/^[a-z][a-z0-9\-+.]+:/i;function Y1(d){if(X1.test(d))return new URL(d);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(d))}class $1{constructor(t){this.source=t,this.url=Y1(t.url),Rt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Rt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new K1(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Q1(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class K1{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Dr(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Nn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Q1{constructor(t,i,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:i,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const lr=Symbol("INITIAL_DATA");class Ly{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:lr}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===lr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==lr}delete(t){const i=this.#t[t];return!i||i.data===lr?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==lr&&(yield[t,i])}}}const W1=1e5,Fm=30;class Me{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#E=new WeakMap;static#x=null;static#S=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#h=s.scale*Di.pixelRatio,this.#d=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-c,u+o],this.#o=r,this.#s=o,Me.#R(),ss(i,s),this.#t.promise.finally(()=>{Me.#S.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=Ee.platform;return gt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#r??=i.lang,Object.assign(this.#f,i.styles),this.#T(i.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),Me.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Di.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,ss(this.#l,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const o={div:null,properties:null,ctx:Me.#D(this.#r)};for(const c of this.#u)o.properties=this.#p.get(c),o.div=c,this.#_(o)}}cancel(){const t=new Nn("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#T(t){if(this.#n)return;this.#a.ctx??=Me.#D(this.#r);const i=this.#u,s=this.#m;for(const r of t){if(i.length>W1){pt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#A(r)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=nt.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#i&&c.fontSubstitution||c.fontFamily;u=Me.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*Me.#z(u,c,this.#r);let g,y;o===0?(g=r[4],y=r[5]-f):(g=r[4]+f*Math.sin(o),y=r[5]-f*Math.cos(o));const b="calc(var(--total-scale-factor) *",A=i.style;this.#e===this.#l?(A.left=`${(100*g/this.#o).toFixed(2)}%`,A.top=`${(100*y/this.#s).toFixed(2)}%`):(A.left=`${b}${g.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${(Me.#x*h).toFixed(2)}px)`,A.fontFamily=u,s.fontSize=h,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);S!==_&&Math.max(S,_)/Math.min(S,_)>1.5&&(w=!0)}if(w&&(s.canvasWidth=c.vertical?t.height:t.width),this.#p.set(i,s),this.#a.div=i,this.#a.properties=s,this.#_(this.#a),s.hasText&&this.#e.append(i),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#_(t){const{div:i,properties:s,ctx:r}=t,{style:o}=i;let c="";if(Me.#x>1&&(c=`scale(${1/Me.#x})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:f}=s;Me.#M(r,f*this.#h,u);const{width:g}=r.measureText(i.textContent);g>0&&(c=`scaleX(${h*this.#h/g}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(o.transform=c)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let i=this.#b.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,i),this.#E.set(i,{size:0,family:""})}return i}static#M(t,i,s){const r=this.#E.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#R(){if(this.#x!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#x=t.getBoundingClientRect().height,t.remove()}static#z(t,i,s){const r=this.#v.get(t);if(r)return r;const o=this.#D(s);o.canvas.width=o.canvas.height=Fm,this.#M(o,Fm,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(Ee.platform.isFirefox&&pt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#v.set(t,f),f}}const Z1=100;function J1(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const t=new Hh,{docId:i}=t,s=d.url?a1(d.url):null,r=d.data?r1(d.data):null,o=d.httpHeaders||null,c=d.withCredentials===!0,u=d.password??null,h=d.range instanceof ky?d.range:null,f=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:2**16;let g=d.worker instanceof Ar?d.worker:null;const y=d.verbosity,b=typeof d.docBaseUrl=="string"&&!_l(d.docBaseUrl)?d.docBaseUrl:null,A=Jo(d.cMapUrl),w=d.cMapPacked!==!1,S=d.CMapReaderFactory||(Re?p1:_m),_=Jo(d.iccUrl),x=Jo(d.standardFontDataUrl),T=d.StandardFontDataFactory||(Re?g1:Em),C=Jo(d.wasmUrl),D=d.WasmFactory||(Re?m1:Cm),k=d.stopAtErrors!==!0,B=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,N=d.isEvalSupported!==!1,H=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!Re,K=typeof d.isImageDecoderSupported=="boolean"?d.isImageDecoderSupported:!Re&&(Ee.platform.isFirefox||!globalThis.chrome),W=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,Z=typeof d.disableFontFace=="boolean"?d.disableFontFace:Re,st=d.fontExtraProperties===!0,At=d.enableXfa===!0,vt=d.ownerDocument||globalThis.document,St=d.disableRange===!0,z=d.disableStream===!0,X=d.disableAutoFetch===!0,J=d.pdfBug===!0,dt=d.CanvasFactory||(Re?f1:u1),wt=d.FilterFactory||(Re?d1:h1),O=d.enableHWA===!0,q=d.useWasm!==!1,Q=h?h.length:d.length??NaN,tt=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!Re&&!Z,lt=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:!!(S===_m&&T===Em&&D===Cm&&A&&x&&C&&dr(A,document.baseURI)&&dr(x,document.baseURI)&&dr(C,document.baseURI)),ht=null;LS(y);const ct={canvasFactory:new dt({ownerDocument:vt,enableHWA:O}),filterFactory:new wt({docId:i,ownerDocument:vt}),cMapReaderFactory:lt?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:lt?null:new T({baseUrl:x}),wasmFactory:lt?null:new D({baseUrl:C})};g||(g=Ar.create({verbosity:y,port:aa.workerPort}),t._worker=g);const ee={docId:i,apiVersion:"5.4.449",data:r,password:u,disableAutoFetch:X,rangeChunkSize:f,length:Q,docBaseUrl:b,enableXfa:At,evaluatorOptions:{maxImageSize:B,disableFontFace:Z,ignoreErrors:k,isEvalSupported:N,isOffscreenCanvasSupported:H,isImageDecoderSupported:K,canvasMaxAreaInBytes:W,fontExtraProperties:st,useSystemFonts:tt,useWasm:q,useWorkerFetch:lt,cMapUrl:A,iccUrl:_,standardFontDataUrl:x,wasmUrl:C}},jt={ownerDocument:vt,pdfBug:J,styleElement:ht,loadingParams:{disableAutoFetch:X,enableXfa:At}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const kn=g.messageHandler.sendWithPromise("GetDocRequest",ee,r?[r.buffer]:null);let nn;if(h)nn=new k1(h,{disableRange:St,disableStream:z});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Bn=dr(s)?F1:Re?$1:G1;nn=new Bn({url:s,length:Q,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:St,disableStream:z})}return kn.then(Bn=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ua=new fr(i,Bn,g.port),Oi=new iw(ua,t,nn,jt,ct,O);t._transport=Oi,ua.send("Ready",null)})}).catch(t._capability.reject),t}class Hh{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Hh.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class ky{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#r)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){Gt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class tw{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return gt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ew{#t=!1;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new ym:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new Ly,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new Tr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return gt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:o=Rn.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,o,y,b),{renderingIntent:_,cacheKey:x}=S;this.#t=!1,h||=this._transport.getOptionalContentConfig(_);let T=this._intentStates.get(x);T||(T=Object.create(null),this._intentStates.set(x,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const C=!!(_&Ze.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const D=!!(this._pdfBug&&globalThis.StepperManager?.enabled),k=!this.recordedBBoxes&&(A||D),B=K=>{if(T.renderTasks.delete(N),k){const W=N.gfx?.dependencyTracker.take();W&&(N.stepper&&N.stepper.setOperatorBBoxes(W,N.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=W))}C&&(this.#t=!0),this.#e(),K?(N.capability.reject(K),this._abortOperatorList({intentState:T,reason:K instanceof Error?K:new Error(K)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new ea({callback:B,params:{canvas:i,canvasContext:t,dependencyTracker:k?new b1(i,T.operatorList.length,D):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:w});(T.renderTasks||=new Set).add(N);const H=N.task;return Promise.all([T.displayReadyCapability.promise,h]).then(([K,W])=>{if(this.destroyed){B();return}if(this._stats?.time("Rendering"),!(W.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:K,optionalContentConfig:W}),N.operatorListChanged()}).catch(B),H}getOperatorList({intent:t="display",annotationMode:i=Rn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>vr.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function o(){c.read().then(function({value:h,done:f}){if(f){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},r)}const c=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new ym),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:c}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:r},c).getReader(),f=this._intentStates.get(i);f.streamReader=h;const g=()=>{h.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof kh){let r=Z1;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new Nn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Dn,vi,Ji,es,ml,is,ns,Ne,ul,By,Py,pr,ra,hl;const $t=class $t{constructor({name:t=null,port:i=null,verbosity:s=kS()}={}){_i(this,Ne);_i(this,Dn,Promise.withResolvers());_i(this,vi,null);_i(this,Ji,null);_i(this,es,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(Yt($t,ns).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Yt($t,ns).set(i,this),Ei(this,Ne,By).call(this,i)}else Ei(this,Ne,Py).call(this)}get promise(){return Yt(this,Dn).promise}get port(){return Yt(this,Ji)}get messageHandler(){return Yt(this,vi)}destroy(){this.destroyed=!0,Yt(this,es)?.terminate(),Ue(this,es,null),Yt($t,ns).delete(Yt(this,Ji)),Ue(this,Ji,null),Yt(this,vi)?.destroy(),Ue(this,vi,null)}static create(t){const i=Yt(this,ns).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new $t(t)}static get workerSrc(){if(aa.workerSrc)return aa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return gt(this,"_setupFakeWorkerGlobal",(async()=>Yt(this,ra,hl)?Yt(this,ra,hl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Dn=new WeakMap,vi=new WeakMap,Ji=new WeakMap,es=new WeakMap,ml=new WeakMap,is=new WeakMap,ns=new WeakMap,Ne=new WeakSet,ul=function(){Yt(this,Dn).resolve(),Yt(this,vi).send("configure",{verbosity:this.verbosity})},By=function(t){Ue(this,Ji,t),Ue(this,vi,new fr("main","worker",t)),Yt(this,vi).on("ready",()=>{}),Ei(this,Ne,ul).call(this)},Py=function(){if(Yt($t,is)||Yt($t,ra,hl)){Ei(this,Ne,pr).call(this);return}let{workerSrc:t}=$t;try{$t._isSameOrigin(window.location,t)||(t=$t._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new fr("main","worker",i),r=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?Yt(this,Dn).reject(new Error("Worker was destroyed")):Ei(this,Ne,pr).call(this)},o=new AbortController;i.addEventListener("error",()=>{Yt(this,es)||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}Ue(this,vi,s),Ue(this,Ji,i),Ue(this,es,i),Ei(this,Ne,ul).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{Ei(this,Ne,pr).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{xl("The worker has been disabled.")}Ei(this,Ne,pr).call(this)},pr=function(){Yt($t,is)||(pt("Setting up fake worker."),Ue($t,is,!0)),$t._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Yt(this,Dn).reject(new Error("Worker was destroyed"));return}const i=new c1;Ue(this,Ji,i);const s=`fake${Wg($t,ml)._++}`,r=new fr(s+"_worker",s,i);t.setup(r,i),Ue(this,vi,new fr(s,s+"_worker",i)),Ei(this,Ne,ul).call(this)}).catch(t=>{Yt(this,Dn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ra=new WeakSet,hl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},_i($t,ra),_i($t,ml,0),_i($t,is,!1),_i($t,ns,new WeakMap),Re&&(Ue($t,is,!0),aa.workerSrc||="./pdf.worker.mjs"),$t._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},$t._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},$t.fromPort=t=>{if(XS("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return $t.create(t)};let Ar=$t;class iw{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,i,s,r,o,c){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new Ly,this.fontLoader=new n1({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,i=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,r),r}get annotationStorage(){return gt(this,"annotationStorage",new Fh)}getRenderingIntent(t,i=Rn.ENABLE,s=null,r=!1,o=!1){let c=Ze.DISPLAY,u=bh;switch(t){case"any":c=Ze.ANY;break;case"display":break;case"print":c=Ze.PRINT;break;default:pt(`getRenderingIntent - invalid intent: ${t}`)}const h=c&Ze.PRINT&&s instanceof Sy?s:this.annotationStorage;switch(i){case Rn.DISABLE:c+=Ze.ANNOTATIONS_DISABLE;break;case Rn.ENABLE:break;case Rn.ENABLE_FORMS:c+=Ze.ANNOTATIONS_FORMS;break;case Rn.ENABLE_STORAGE:c+=Ze.ANNOTATIONS_STORAGE,u=h.serializable;break;default:pt(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(c+=Ze.IS_EDITING),o&&(c+=Ze.OPLIST);const{ids:f,hash:g}=h.modifiedIds,y=[c,u.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Me.cleanup(),this._networkStream?.cancelAllRequests(new Nn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{Rt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}Rt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(s,r)=>{Rt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}Rt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new tw(s,this))}),t.on("DocException",s=>{i._capability.reject(Ie(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!i.onPassword)throw Ie(s);const r=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};i.onPassword(r,s.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",s=>{i.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const y=o.error;pt(`Error during font loading: ${y}`),this.commonObjs.resolve(s,y);break}const c=new It(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,b)=>globalThis.FontInspector.fontAdded(y,b):null,h=new s1(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:f}=o;Rt(f,"The imageRef must be defined.");for(const y of this.#e.values())for(const[,b]of y.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(s,o);break;case"Pattern":const g=new pe(o);this.commonObjs.resolve(s,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,c])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||i.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#n.get(i);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const c=new ew(i,o,this,this._params.pdfBug);return this.#e.set(i,c),c});return this.#n.set(i,r),r}getPageIndex(t){return vh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(i=>new L1(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new N1(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:r[2]}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Me.cleanup()}}cachedPageNumber(t){if(!vh(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(i)??null}}class nw{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class ea{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:w=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new nw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(ea.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ea.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new sa(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ea.#e.delete(this._canvas),t||=new kh(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ea.#e.delete(this._canvas),this.callback())))}}const zy="5.4.449",sw="f44e5f0e6";class fi{#t=null;#e=null;#n;#i=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return gt(this,"_keyboardManager",new Rr([[["Escape","mac+Escape"],fi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fi.prototype._moveToPrevious],[["Home","mac+Home"],fi.prototype._moveToBeginning],[["End","mac+End"],fi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||i,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",fi.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",pi,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",fi.#d[s]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.ariaSelected=r===this.#n,o.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastElementChild?.focus()}#m(t){fi._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Sr{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Sr.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Sr.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Um(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function cr(d){return Math.max(0,Math.min(255,255*d))}class Im{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=cr(t),[t,t,t]}static G_HTML([t]){const i=Um(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(cr)}static RGB_HTML(t){return`#${t.map(Um).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[cr(1-Math.min(1,t+r)),cr(1-Math.min(1,s+r)),cr(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,o=1-i,c=1-s,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class aw{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Gt("Abstract method `_createSVG` called.")}}class gl extends aw{_createSVG(t){return document.createElementNS(Wi,t)}}const rw=9,as=new WeakSet,ow=new Date().getTimezoneOffset()*60*1e3;class lh{static create(t){switch(t.data.annotationType){case ue.LINK:return new Gh(t);case ue.TEXT:return new cw(t);case ue.WIDGET:switch(t.data.fieldType){case"Tx":return new uw(t);case"Btn":return t.data.radioButton?new Fy(t):t.data.checkBox?new dw(t):new fw(t);case"Ch":return new pw(t);case"Sig":return new hw(t)}return new ls(t);case ue.POPUP:return new wh(t);case ue.FREETEXT:return new Uy(t);case ue.LINE:return new mw(t);case ue.SQUARE:return new yw(t);case ue.CIRCLE:return new bw(t);case ue.POLYLINE:return new Iy(t);case ue.CARET:return new Aw(t);case ue.INK:return new qh(t);case ue.POLYGON:return new vw(t);case ue.HIGHLIGHT:return new jy(t);case ue.UNDERLINE:return new Sw(t);case ue.SQUIGGLY:return new ww(t);case ue.STRIKEOUT:return new xw(t);case ue.STAMP:return new Hy(t);case ue.FILEATTACHMENT:return new _w(t);default:return new Wt(t)}}}class Wt{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Wt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let o=-1/0,c=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>c?(c=i[u+1],o=i[u+2]):i[u+1]===c&&(o=Math.max(o,i[u+2]));return[o,c]}if(s?.length>=1){for(const u of s)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>c?(c=u[h+1],o=u[h]):u[h+1]===c&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,c]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-c)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${yr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${yr}${i.id}`,{id:i.id,annotationType:i.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(c-t[3]+h)/c}%`,r===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),!(this instanceof ls)&&!(this instanceof Gh)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof wh){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:h}=this;if(!t&&i.borderStyle.width>0){c.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,_=i.borderStyle.verticalCornerRadius;if(S>0||_>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;c.borderRadius=T}else if(this instanceof Fy){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=T}switch(i.borderStyle.style){case Ks.SOLID:c.borderStyle="solid";break;case Ks.DASHED:c.borderStyle="dashed";break;case Ks.BEVELED:pt("Unimplemented border style: beveled");break;case Ks.INSET:pt("Unimplemented border style: inset");break;case Ks.UNDERLINE:c.borderBottomStyle="solid";break}const x=i.borderColor||null;x?(this.#e=!0,c.borderColor=nt.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):c.borderWidth=0}const f=nt.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=r.rawDims;c.left=`${100*(f[0]-b)/g}%`,c.top=`${100*(f[1]-A)/y}%`;const{rotation:w}=i;return i.hasOwnCanvas||w===0?(c.width=`${100*u/g}%`,c.height=`${100*h/y}%`):this.setRotation(w,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),i.style.width=`${100*o/s}%`,i.style.height=`${100*c/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const o=r.detail[i],c=o[0],u=o.slice(1);r.target.style[s]=Im[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Im[`${c}_rgb`](u)})};return gt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,o]of Object.entries(i)){const c=s[r];if(c){const u={detail:{[r]:o},target:t};c(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,_,x,T]=t.subarray(2,6);if(r===S&&o===_&&i===x&&s===T)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:_}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const h=r-i,f=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,_=t.length;S<_;S+=8){const x=t[S],T=t[S+1],C=t[S+2],D=t[S+3],k=g.createElement("rect"),B=(C-i)/h,N=(o-T)/f,H=(x-C)/h,K=(T-D)/f;k.setAttribute("x",B),k.setAttribute("y",N),k.setAttribute("width",H),k.setAttribute("height",K),A.append(k),u?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${N}" width="${H}" height="${K}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate),this.#n=new wh({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Gt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===i)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!as.has(f)){pt(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:h,domElement:f})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==i&&as.has(r)&&s.push({id:c,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class lw extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Gh extends Wt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:c}=i,u=[];if(r.length!==0||o.length!==0){const g=new Set(o);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:A}of b)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===c&&u.push(b)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const h=this.annotationStorage,f=[];for(const g of u){const{id:y}=g;switch(f.push(y),g.type){case"text":{const A=g.defaultValue||"";h.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;h.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";h.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!as.has(b)){pt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class cw extends Wt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class ls extends Wt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ee.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,o){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!i.focused||!c.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}})})}_setEventListeners(t,i,s,r){for(const[o,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":nt.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||rw,o=t.style;let c;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(th*r))||1,y=f/g;c=Math.min(r,h(y/th))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,h(f/th))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=nt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class uw extends ls{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[i]=s),o.setValue(c.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let o=r.value||"";const c=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),as.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",w=>{t.setValue(i,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=h.userValue=S,h.formattedValue=null});let A=w=>{const{formattedValue:S}=h;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(h.focused)return;const{target:_}=S;if(b&&(_.type=g,y&&(_.step=y)),h.userValue){const x=h.userValue;if(b)if(g==="time"){const T=new Date(x),C=[T.getHours(),T.getMinutes(),T.getSeconds()];_.value=C.map(D=>D.toString().padStart(2,"0")).join(":")}else _.value=new Date(x-ow).toISOString().split(g==="date"?"T":".",1)[0];else _.value=x}h.lastCommittedValue=_.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const _={value(x){h.userValue=x.detail.value??"",b||t.setValue(i,{value:h.userValue.toString()}),x.target.value=h.userValue},formattedValue(x){const{formattedValue:T}=x.detail;h.formattedValue=T,T!=null&&x.target!==document.activeElement&&(x.target.value=T);const C={formattedValue:T};b&&(C.value=T),t.setValue(i,C)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{const{charLimit:T}=x.detail,{target:C}=x;if(T===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",T);let D=h.userValue;!D||D.length<=T||(D=D.slice(0,T),C.value=h.userValue=D,t.setValue(i,{value:D}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(_,S)}),s.addEventListener("keydown",S=>{h.commitKey=1;let _=-1;if(S.key==="Escape"?_=0:S.key==="Enter"&&!this.data.multiLine?_=2:S.key==="Tab"&&(h.commitKey=3),_===-1)return;const{value:x}=S.target;h.lastCommittedValue!==x&&(h.lastCommittedValue=x,h.userValue=x,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:x,willCommit:!0,commitKey:_,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=A;A=null,s.addEventListener("blur",S=>{if(!h.focused||!S.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:_}=S;let{value:x}=_;if(b){if(x&&g==="time"){const T=x.split(":").map(C=>parseInt(C,10));x=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),_.step=""}else x.includes("T")||(x=`${x}T00:00`),x=new Date(x).valueOf();_.type="text"}h.userValue=x,h.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:x,willCommit:!0,commitKey:h.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{h.lastCommittedValue=null;const{data:_,target:x}=S,{value:T,selectionStart:C,selectionEnd:D}=x;let k=C,B=D;switch(S.inputType){case"deleteWordBackward":{const N=T.substring(0,C).match(/\w*[^\w]*$/);N&&(k-=N[0].length);break}case"deleteWordForward":{const N=T.substring(C).match(/^[^\w]*\w*/);N&&(B+=N[0].length);break}case"deleteContentBackward":C===D&&(k-=1);break;case"deleteContentForward":C===D&&(B+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:T,change:_||"",willCommit:!1,selStart:k,selEnd:B}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class hw extends ls{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class dw extends ls{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return as.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s)){const g=h&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:h})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue||"Off";c.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Fy extends ls{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const c of this._getElementsByName(i.fieldName,s))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(as.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:h})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue;c.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const c=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class fw extends Gh{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class pw extends ls{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");as.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),c=()=>{g.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let h=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(b){c?.();const A=b.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of r.options)S.selected=w.has(S.value);t.setValue(i,{value:u(!0)}),h=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,w=b.detail.remove;A[w].selected=!1,r.remove(w),A.length>0&&Array.prototype.findIndex.call(A,_=>_.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),h=u(!1)},insert(b){const{index:A,displayValue:w,exportValue:S}=b.detail.insert,_=r.children[A],x=document.createElement("option");x.textContent=w,x.value=S,_?_.before(x):r.append(x),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const w of A){const{displayValue:S,exportValue:_}=w,x=document.createElement("option");x.textContent=S,x.value=_,r.append(x)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const w of b.target.options)w.selected=A.has(w.index);t.setValue(i,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{const y=u(!0),b=u(!1);t.setValue(i,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:h,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class wh extends Wt{constructor(t){const{data:i,elements:s,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&Wt._hasPopupData(i)}),this.elements=s,o&&Wt._hasPopupData(i)){const c=this.popup=this.#t();for(const u of s)u.popup=c}else this.popup=null}#t(){return new gw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Js}${r}`).join(",")),this.container}}class gw{#t=null;#e=this.#q.bind(this);#n=this.#U.bind(this);#i=this.#L.bind(this);#r=this.#w.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#v=null;#b=null;#E=null;#x=null;#S=null;#T=!1;#A=null;#_=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:h,rect:f,parentRect:g,open:y,commentManager:b=null}){this.#s=t,this.#x=r,this.#o=c,this.#E=u,this.#d=h,this.#a=i,this.#b=f,this.#h=g,this.#l=s,this.#t=b,this.#A=s[0],this.#c=gh.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b||(this.#D(),this.#s.hidden=!0,y&&this.#w())}#D(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const i of this.trigger)i.addEventListener("click",this.#r,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#l)i.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(i=>i.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#y||this.#M(),!this.#y)return;const{signal:t}=this.#g=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#p=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#A.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#R(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),u.after(c)}}#R(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[t,i]=this.#y,{style:s}=this.#p;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#z(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#A.commentText,this.#_}set comment(t){t!==this.comment&&(this.#A.commentText=this.#_=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=i)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#p.getBoundingClientRect(),{x:r,y:o,width:c,height:u}=this.#A.layer.getBoundingClientRect();return[(t-r)/c,(i+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:c,width:u,height:h}=r;this.#t.showDialog(null,this,o+i*u,c+s*h,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const s=t.style.outlineColor=nt.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#x?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#x}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}yy({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#O(){const t=this.#E,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#E.html||null}get#k(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:r});return s}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#_=null):i&&(i.deleted?this.remove():(this.#z(),this.#_=i.text)),t&&(this.#y=null,this.#M(),this.#R());return}if(s||i?.deleted){this.remove();return}this.#D(),this.#S||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),i&&i.text&&(this.#E=this.#B(i.text),this.#c=gh.toDateObject(i.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#E}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#b;for(const w of this.#l)if(!u||nt.intersect(w.data.rect,u)!==null){u=w.data.rect,c=!0;break}const h=nt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=c?u[2]-u[0]+5:0,y=h[0]+g,b=h[1];this.#u=[100*(y-r)/i,100*(b-o)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#L(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#C(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#T&&(this.#m||this.#L(),this.#T=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class Uy extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class mw extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class yw extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",i-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class bw extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",i/2),c.setAttribute("cy",s/2),c.setAttribute("rx",i/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Iy extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:o,height:c}=this;if(!i)return this.container;const u=this.svgFactory.create(o,c,!0);let h=[];for(let g=0,y=i.length;g<y;g+=2){const b=i[g]-t[0],A=t[3]-i[g+1];h.push(`${b},${A}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class vw extends Iy{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Aw extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class qh extends Wt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?mt.HIGHLIGHT:mt.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:c,width:u,height:h}=this.#n(i,t),f=this.svgFactory.create(u,h,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",s[c].join(","));if(r){const{transform:c,width:u,height:h}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class jy extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=mt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Sw extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class ww extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class xw extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Hy extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class _w extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=Ee.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Vh{#t=null;#e=null;#n=null;#i=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:g}){this.div=t,this.#t=i,this.#e=s,this.#r=u||null,this.#a=f||null,this.#n=g||new Fh,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;ss(s,this.viewport);const r=new Map,o=[],c={data:null,layer:s,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new gl,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const h=u.annotationType===ue.POPUP;if(h){const y=r.get(u.id);if(!y)continue;if(!this._commentManager){o.push(u);continue}c.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=lh.create(c);if(!f.isRenderable)continue;if(!h&&(this.#s.push(f),u.popupRef)){const y=r.get(u.popupRef);y?y.push(f):r.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const h=c.elements=r.get(u.id);c.data=u;const f=lh.create(c);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${Js}${u.id}`,u.hidden&&(g.style.visibility="hidden"),h.at(-1).container.after(g)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:r}}of this.#s){const o=s.id=`${Js}${r}`;t.push(this.#r?.getAriaAttributes(o).then(c=>{if(c)for(const[u,h]of c)s.setAttribute(u,h)}))}}this.#s.sort(({data:{rect:[s,r,o,c]}},{data:{rect:[u,h,f,g]}})=>{if(s===o&&r===c)return 1;if(u===f&&h===g)return-1;const y=c,b=r,A=(r+c)/2,w=g,S=h,_=(h+g)/2;if(A>=w&&_<=b)return-1;if(_>=y&&A<=S)return 1;const x=(s+o)/2,T=(u+f)/2;return x-T});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#a,svgFactory:new gl,parent:this};for(const s of t){s.borderStyle||=Vh._defaultBorderStyle,i.data=s;const r=lh.create(i);r.isRenderable&&(r.render(),r.contentElement.id=`${Js}${s.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,ss(i,{rotation:t.rotation}),this.#l(),i.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const c=this.#i.get(i);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,o=new lw({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#n});return o.render(),o.contentElement.id=`${Js}${s}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const i=this.#s.findIndex(r=>r.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return gt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ks.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const al=/\r\n?|\n/g;class ge extends ot{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ge.prototype,i=o=>o.isEmpty(),s=On.TRANSLATE_SMALL,r=On.TRANSLATE_BIG;return gt(this,"_keyboardManager",new Rr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=mt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||ge._defaultColor||ot._defaultLineColor,this.#i=t.fontSize||ge._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){ot.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Mt.FREETEXT_SIZE:ge._defaultFontSize=i;break;case Mt.FREETEXT_COLOR:ge._defaultColor=i;break}}updateParams(t,i){switch(t){case Mt.FREETEXT_SIZE:this.#r(i);break;case Mt.FREETEXT_COLOR:this.#a(i);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,ge._defaultFontSize],[Mt.FREETEXT_COLOR,ge._defaultColor||ot._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#i],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Sr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}#r(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-ge._internalPadding*t,-(ge._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(ge.#c(s)),i=s);return t.join(`
`)}#o(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ge._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,g]=this.pageDimensions,[y,b]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(c[0]-y)/f,w=i+this.height-(c[1]-b)/g;break;case 90:A=t+(c[0]-y)/f,w=i-(c[1]-b)/g,[u,h]=[h,-u];break;case 180:A=t-this.width+(c[0]-y)/f,w=i-(c[1]-b)/g,[u,h]=[-u,-h];break;case 270:A=t+(c[0]-y-this.height*g)/f,w=i+(c[1]-b-this.width*f)/g,[u,h]=[-h,u];break}this.setAt(A*r,w*o,u,h)}else this._moveAfterPaste(t,i);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(al,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=ge.#h(i.getData("text")||"").replaceAll(al,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=c,f=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(h).replaceAll(al,"")),A!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===A){w=g;continue}w.push(ge.#c(S))}}f.push(u.nodeValue.slice(0,h).replaceAll(al,""))}else if(u===this.editorDiv){let A=f,w=0;for(const S of this.editorDiv.childNodes)w++===h&&(A=g),A.push(ge.#c(S))}this.#t=`${f.join(`
`)}${r}${g.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(b<=w){y.setStart(A,b),y.setEnd(A,b);break}b-=w}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ge._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof Uy){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:f,id:g,popupRef:y,richText:b,contentsObj:A,creationDate:w,modificationDate:S},textContent:_,textPosition:x,parent:{page:{pageNumber:T}}}=t;if(!_||_.length===0)return null;r=t={annotationType:mt.FREETEXT,color:Array.from(u),fontSize:c,value:_.join(`
`),position:x,pageIndex:T-1,rect:h.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:w,modificationDate:S}}const o=await super.deserialize(t,i,s);return o.#i=t.fontSize,o.color=nt.makeHexColor(...t.color),o.#t=ge.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=ot._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class et{static PRECISION=1e-4;toSVGPath(){Gt("Abstract method `toSVGPath` must be implemented.")}get box(){Gt("Abstract getter `box` must be implemented.")}serialize(t,i){Gt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,o,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u]*r,c[u+1]=s+t[u+1]*o;return c}static _rescaleAndSwap(t,i,s,r,o,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u+1]*r,c[u+1]=s+t[u]*o;return c}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)r[o]=i+t[o],r[o+1]=s+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,o){switch(o){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,o,c){return[(t+5*s)/6,(i+5*r)/6,(5*s+o)/6,(5*r+c)/6,(s+o)/2,(r+c)/2]}}class ts{#t;#e=[];#n;#i;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=ts.#m+ts.#g;constructor({x:t,y:i},s,r,o,c,u=0){this.#t=s,this.#h=o*r,this.#i=c,this.#a.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#l=ts.#m*r,this.#c=ts.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[s,r,o,c]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/o,(this.#o+(t[1]-i[1])/2-r)/c,(this.#s+(i[0]-t[0])/2-s)/o,(this.#o+(i[1]-t[1])/2-r)/c]}add({x:t,y:i}){this.#s=t,this.#o=i;const[s,r,o,c]=this.#t;let[u,h,f,g]=this.#a.subarray(8,12);const y=t-f,b=i-g,A=Math.hypot(y,b);if(A<this.#c)return!1;const w=A-this.#l,S=w/A,_=S*y,x=S*b;let T=u,C=h;u=f,h=g,f+=_,g+=x,this.#f?.push(t,i);const D=-x/w,k=_/w,B=D*this.#h,N=k*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+B,g+N],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-B,g-N],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([u+B,h+N],2),this.#r.push(NaN,NaN,NaN,NaN,(u+B-s)/o,(h+N-r)/c),this.#a.set([u-B,h-N],14),this.#e.push(NaN,NaN,NaN,NaN,(u-B-s)/o,(h-N-r)/c)),this.#a.set([T,C,u,h,f,g],6),!this.isEmpty()):(this.#a.set([T,C,u,h,f,g],6),Math.abs(Math.atan2(C-h,T-u)-Math.atan2(x,_))<Math.PI/2?([u,h,f,g]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((h+g)/2-r)/c),[u,h,T,C]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-s)/o,((C+h)/2-r)/c),!0):([T,C,u,h,f,g]=this.#a.subarray(0,6),this.#r.push(((T+5*u)/6-s)/o,((C+5*h)/6-r)/c,((5*u+f)/6-s)/o,((5*h+g)/6-r)/c,((u+f)/2-s)/o,((h+g)/2-r)/c),[f,g,u,h,T,C]=this.#a.subarray(12,18),this.#e.push(((T+5*u)/6-s)/o,((C+5*h)/6-r)/c,((5*u+f)/6-s)/o,((5*h+g)/6-r)/c,((u+f)/2-s)/o,((h+g)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,i=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,i,s,r]=this.#t,[o,c,u,h]=this.#p();return`M${(this.#a[2]-t)/s} ${(this.#a[3]-i)/r} L${(this.#a[4]-t)/s} ${(this.#a[5]-i)/r} L${o} ${c} L${u} ${h} L${(this.#a[16]-t)/s} ${(this.#a[17]-i)/r} L${(this.#a[14]-t)/s} ${(this.#a[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#b(t){const[i,s,r,o]=this.#t,c=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[h,f,g,y]=this.#p();t.push(`L${(c[0]-i)/r} ${(c[1]-s)/o} L${h} ${f} L${g} ${y} L${(u[0]-i)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,i,s,r,o,c){return new Gy(t,i,s,r,o,c)}getOutlines(){const t=this.#r,i=this.#e,s=this.#a,[r,o,c,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=h.length-2;y<b;y+=2)h[y]=(this.#f[y]-r)/c,h[y+1]=(this.#f[y+1]-o)/u;if(h[h.length-2]=(this.#s-r)/c,h[h.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#E(h);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#S(f,g);for(let y=i.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(i[y+b])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=i[y+b],f[g+1]=i[y+b+1],g+=2}return this.#x(f,g),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#n,this.#i)}#E(t){const i=this.#a,[s,r,o,c]=this.#t,[u,h,f,g]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-r)/c,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-r)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-r)/c,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#x(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#S(t,i){const s=this.#a.subarray(4,6),r=this.#a.subarray(16,18),[o,c,u,h]=this.#t,[f,g,y,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-c)/h,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/h],i),i+=24}}class Gy extends et{#t;#e=new Float32Array(4);#n;#i;#r;#a;#s;constructor(t,i,s,r,o,c){super(),this.#s=t,this.#r=i,this.#t=s,this.#a=r,this.#n=o,this.#i=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,h,f,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-h)/g;for(let y=0,b=i.length;y<b;y+=2)i[y]=(i[y]-u)/f,i[y+1]=(i[y+1]-h)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const c=s-t,u=r-i;let h,f;switch(o){case 0:h=et._rescale(this.#s,t,r,c,-u),f=et._rescale(this.#r,t,r,c,-u);break;case 90:h=et._rescaleAndSwap(this.#s,t,i,c,u),f=et._rescaleAndSwap(this.#r,t,i,c,u);break;case 180:h=et._rescale(this.#s,s,i,-c,u),f=et._rescale(this.#r,s,i,-c,u);break;case 270:h=et._rescaleAndSwap(this.#s,s,r,-c,-u),f=et._rescaleAndSwap(this.#r,s,r,-c,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const i=this.#s;let s=i[4],r=i[5];const o=[s,r,s,r];let c=s,u=r,h=s,f=r;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,w=i.length;A<w;A+=6){const S=i[A+4],_=i[A+5];isNaN(i[A])?(nt.pointBoundingBox(S,_,o),u>_?(c=S,u=_):u===_&&(c=g(c,S)),f<_?(h=S,f=_):f===_&&(h=g(h,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,nt.bezierBoundingBox(s,r,...i.slice(A,A+6),y),nt.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(c=y[0],u=y[1]):u===y[1]&&(c=g(c,y[0])),f<y[3]?(h=y[2],f=y[3]):f===y[3]&&(h=g(h,y[2]))),s=S,r=_}const b=this.#e;b[0]=o[0]-this.#n,b[1]=o[1]-this.#n,b[2]=o[2]-o[0]+2*this.#n,b[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,i,s,r,o,c=0){return new ts(t,i,s,r,o,c)}getNewOutline(t,i){const[s,r,o,c]=this.#e,[u,h,f,g]=this.#t,y=o*f,b=c*g,A=s*f+u,w=r*g+h,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+w},this.#t,this.#a,t,this.#i,i??this.#n);for(let _=2;_<this.#r.length;_+=2)S.add({x:this.#r[_]*y+A,y:this.#r[_+1]*b+w});return S.getOutlines()}}class xh{#t;#e;#n;#i=[];#r=[];constructor(t,i=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:S,y:_,width:x,height:T}of t){const C=Math.floor((S-i)/c)*c,D=Math.ceil((S+x+i)/c)*c,k=Math.floor((_-i)/c)*c,B=Math.ceil((_+T+i)/c)*c,N=[C,k,B,!0],H=[D,k,B,!1];this.#i.push(N,H),nt.rectBoundingBox(C,k,D,B,o)}const u=o[2]-o[0]+2*s,h=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let y=r?-1/0:1/0,b=1/0;const A=this.#i.at(r?-1:-2),w=[A[0],A[2]];for(const S of this.#i){const[_,x,T,C]=S;!C&&r?x<b?(b=x,y=_):x===b&&(y=Math.max(y,_)):C&&!r&&(x<b?(b=x,y=_):x===b&&(y=Math.min(y,_))),S[0]=(_-f)/u,S[1]=(x-g)/h,S[2]=(T-g)/h}this.#t=new Float32Array([f,g,u,h]),this.#e=[y,b],this.#n=w}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#l(i)),this.#o(i)):(this.#c(i),t.push(...this.#l(i)));return this.#a(t)}#a(t){const i=[],s=new Set;for(const c of t){const[u,h,f]=c;i.push([u,h,c],[u,f,c])}i.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=i.length;c<u;c+=2){const h=i[c][2],f=i[c+1][2];h.push(f),f.push(h),s.add(h),s.add(f)}const r=[];let o;for(;s.size>0;){const c=s.values().next().value;let[u,h,f,g,y]=c;s.delete(c);let b=u,A=h;for(o=[u,f],r.push(o);;){let w;if(s.has(g))w=g;else if(s.has(y))w=y;else break;s.delete(w),[u,h,f,g,y]=w,b!==u&&(o.push(b,A,u,A===h?h:f),b=u),A=A===h?f:h}o.push(b,A)}return new Ew(r,this.#t,this.#e,this.#n)}#s(t){const i=this.#r;let s=0,r=i.length-1;for(;s<=r;){const o=s+r>>1,c=i[o][0];if(c===t)return o;c<t?s=o+1:r=o-1}return r+1}#o([,t,i]){const s=this.#s(t);this.#r.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let r=s;r<this.#r.length;r++){const[o,c]=this.#r[r];if(o!==t)break;if(o===t&&c===i){this.#r.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,c]=this.#r[r];if(o!==t)break;if(o===t&&c===i){this.#r.splice(r,1);return}}}#l(t){const[i,s,r]=t,o=[[i,s,r]],c=this.#s(r);for(let u=0;u<c;u++){const[h,f]=this.#r[u];for(let g=0,y=o.length;g<y;g++){const[,b,A]=o[g];if(!(f<=b||A<=h)){if(b>=h){if(A>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=h,A>f&&o.push([i,f,A])}}}return o}}class Ew extends et{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const c=i[o],u=i[o+1];c===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const c=[],u=s-t,h=r-i;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*u,g[y+1]=r-f[y+1]*h;c.push(g)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class _h extends ts{newFreeDrawOutline(t,i,s,r,o,c){return new Cw(t,i,s,r,o,c)}}class Cw extends Gy{newOutliner(t,i,s,r,o,c=0){return new _h(t,i,s,r,o,c)}}class se extends ot{#t=null;#e=0;#n;#i=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=mt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=se.prototype;return gt(this,"_keyboardManager",new Rr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||se._defaultColor,this.#p=t.thickness||se._defaultThickness,this.opacity=t.opacity||se._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new xh(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new xh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#a=i.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#a;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const r=1.5;if(this.#a=t.getNewOutline(this.#p/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:se.#_(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:se.#_(this.#a.box,y),path:{d:this.#a.toSVGPath()}})}const[o,c,u,h]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=h;break;case 90:{const[y,b]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*b/y,this.height=h*y/b;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*b/y,this.height=h*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-c)/h];const{lastPoint:g}=this.#a;this.#m=[(g[0]-o)/u,(g[1]-c)/h]}static initialize(t,i){ot.initialize(t,i),se._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Mt.HIGHLIGHT_COLOR:se._defaultColor=i;break;case Mt.HIGHLIGHT_THICKNESS:se._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case Mt.HIGHLIGHT_COLOR:this.#E(i);break;case Mt.HIGHLIGHT_THICKNESS:this.#x(i);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,se._defaultColor],[Mt.HIGHLIGHT_THICKNESS,se._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||se._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#p||se._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(t){const i=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,se._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#x(t){const i=this.#p,s=r=>{this.#p=r,this.#S(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new fi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#R())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#T():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#S(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#_([t,i,s,r],o){switch(o){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=se.#_(this.#l.box,t)):s=se.#_([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:se.#_(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),vy(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#D(t){se._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#R(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#n,c=new Float32Array(o.length*8);let u=0;for(const{x:h,y:f,width:g,height:y}of o){const b=h*t+s,A=(1-f)*i+r;c[u]=c[u+4]=b,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=b+g*t,c[u+5]=c[u+7]=A-y*i,u+=8}return c}#O(t){return this.#l.serialize(t,this.#R())}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:c,y:u,width:h,height:f}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=A=>{g.abort(),this.#F(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",te,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",pi,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new _h({x:r,y:o},[c,u,h,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof jy){const{data:{quadPoints:w,rect:S,rotation:_,id:x,color:T,opacity:C,popupRef:D,richText:k,contentsObj:B,creationDate:N,modificationDate:H},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(T),opacity:C,quadPoints:w,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:_,annotationElementId:x,id:x,deleted:!1,popupRef:D,richText:k,comment:B?.str||null,creationDate:N,modificationDate:H}}else if(t instanceof qh){const{data:{inkLists:w,rect:S,rotation:_,id:x,color:T,borderStyle:{rawWidth:C},popupRef:D,richText:k,contentsObj:B,creationDate:N,modificationDate:H},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(T),thickness:C,inkLists:w,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:_,annotationElementId:x,id:x,deleted:!1,popupRef:D,richText:k,comment:B?.str||null,creationDate:N,modificationDate:H}}const{color:o,quadPoints:c,inkLists:u,opacity:h}=t,f=await super.deserialize(t,i,s);f.color=nt.makeHexColor(...o),f.opacity=h||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[g,y]=f.pageDimensions,[b,A]=f.pageTranslation;if(c){const w=f.#n=[];for(let S=0;S<c.length;S+=8)w.push({x:(c[S]-b)/g,y:1-(c[S+1]-A)/y,width:(c[S+2]-c[S])/g,height:(c[S+1]-c[S+5])/y});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-b,y:y-(w[1]-A)},_=new _h(S,[0,0,g,y],1,f.#p/2,!0,.001);for(let C=0,D=w.length;C<D;C+=2)S.x=w[C]-b,S.y=y-(w[C+1]-A),_.add(S);const{id:x,clipPathId:T}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);f.#b({highlightOutlines:_.getOutlines(),highlightId:x,clipPathId:T}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=ot._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#p,quadPoints:this.#z(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class qy{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Gt("Not implemented")}}class Lt extends ot{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(Lt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Gt("Not implemented")}static get typesMap(){Gt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(Lt.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,o=r[i],c=u=>{r.updateProperty(i,u);const h=this.#t.updateProperty(i,u);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,i,s,r]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(c/o),r*(o/c)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(c/o),r*(o/c)];default:return[t,i,s,r]}}#d(){const{x:t,y:i,width:s,height:r,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(o/c),r*(c/o)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(o/c),r*(c/o)];default:return[t,i,s,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:r,rotation:o,parentRotation:c,parentDimensions:[u,h]}=this;switch((o*4+c)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/h),r*(h/u),s*(u/h)];case 5:return[1-i,t,s*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-i,r*(h/u),s*(u/h)];case 7:return[i-s*(u/h),1-t-r*(h/u),s*(u/h),r*(h/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(h/u),i,r*(h/u),s*(u/h)];case 13:return[1-i-s*(u/h),t-r*(h/u),s*(u/h),r*(h/u)];case 14:return[1-t,1-i-s*(u/h),r*(h/u),s*(u/h)];case 15:return[i,1-t,s*(u/h),r*(h/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,o){Gt("Not implemented")}static startDrawing(t,i,s,r){const{target:o,offsetX:c,offsetY:u,pointerId:h,pointerType:f}=r;if(kt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),A=Lt.#i=new AbortController,w=t.combinedSignal(A);if(kt.setPointer(f,h),window.addEventListener("pointerup",S=>{kt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:w}),window.addEventListener("pointercancel",S=>{kt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",S=>{kt.isSamePointerType(S.pointerType)&&(kt.initializeAndAddPointerId(S.pointerId),Lt.#n.isCancellable()&&(Lt.#n.removeLastElement(),Lt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",pi,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",S=>{kt.isSameTimeStamp(S.timeStamp)&&te(S)},{signal:w}),t.toggleDrawing(),i._editorUndoBar?.hide(),Lt.#n){t.drawLayer.updateProperties(this._currentDrawId,Lt.#n.startNew(c,u,y,b,g));return}i.updateUIForDefaultProperties(this),Lt.#n=this.createDrawerInstance(c,u,y,b,g),Lt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Lt.#r.toSVGProperties(),Lt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(kt.isSameTimeStamp(t.timeStamp),!Lt.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(kt.isSamePointerId(r)){if(kt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Lt.#n.add(i,s)),kt.setTimeStamp(t.timeStamp),te(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Lt.#n=null,Lt.#r=null,kt.clearPointerType(),kt.clearTimeStamp()),Lt.#i&&(Lt.#i.abort(),Lt.#i=null,kt.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,Lt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=Lt.#n,r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Mt.DRAW_STEP),!Lt.#n.isEmpty()){const{pageDimensions:[s,r],scale:o}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Lt.#n.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:Lt.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,o,c){Gt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:u}}=i.viewport,h=this.deserializeDraw(c,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#a({drawOutlines:h}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([i,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Tw{#t=new Float64Array(6);#e;#n;#i;#r;#a;#s="";#o=0;#c=new Nr;#l;#d;constructor(t,i,s,r,o,c){this.#l=s,this.#d=r,this.#i=o,this.#r=c,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i],this.#n=[{line:u,points:this.#a}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#r=i)}#h(t,i){return et._normalizePoint(t,i,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,o,c]=this.#t.subarray(2,6),u=t-o,h=i-c;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#a.push(t,i),isNaN(s)?(this.#t.set([o,c,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,o,c,t,i],0),this.#e.push(...et.createBezierPoints(s,r,o,c,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,o){this.#l=s,this.#d=r,this.#i=o,[t,i]=this.#h(t,i);const c=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#a}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#a=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=et.svgRound(this.#e[4]),i=et.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#a.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${i}`,this.#o=6}if(this.#a.length===4){const r=et.svgRound(this.#e[10]),o=et.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${o}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${i}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[c,u,h,f,g,y]=this.#e.slice(r,r+6).map(et.svgRound);s.push(`C${c} ${u} ${h} ${f} ${g} ${y}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,i,s,r){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,i,s,this.#i,this.#r,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Nr extends et{#t;#e=0;#n;#i;#r;#a;#s;#o;#c;build(t,i,s,r,o,c,u){this.#r=i,this.#a=s,this.#s=r,this.#o=o,this.#c=c,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${et.svgRound(i[4])} ${et.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${et.svgRound(i[10])} ${et.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,c,u,h,f,g]=i.subarray(s,s+6).map(et.svgRound);t.push(`C${o} ${c} ${u} ${h} ${f} ${g}`)}}return t.join("")}serialize([t,i,s,r],o){const c=[],u=[],[h,f,g,y]=this.#d();let b,A,w,S,_,x,T,C,D;switch(this.#o){case 0:D=et._rescale,b=t,A=i+r,w=s,S=-r,_=t+h*s,x=i+(1-f-y)*r,T=t+(h+g)*s,C=i+(1-f)*r;break;case 90:D=et._rescaleAndSwap,b=t,A=i,w=s,S=r,_=t+f*s,x=i+h*r,T=t+(f+y)*s,C=i+(h+g)*r;break;case 180:D=et._rescale,b=t+s,A=i,w=-s,S=r,_=t+(1-h-g)*s,x=i+f*r,T=t+(1-h)*s,C=i+(f+y)*r;break;case 270:D=et._rescaleAndSwap,b=t+s,A=i+r,w=-s,S=-r,_=t+(1-f-y)*s,x=i+(1-h-g)*r,T=t+(1-f)*s,C=i+(1-h)*r;break}for(const{line:k,points:B}of this.#i)c.push(D(k,b,A,w,S,o?new Array(k.length):null)),u.push(D(B,b,A,w,S,o?new Array(B.length):null));return{lines:c,points:u,rect:[_,x,T,C]}}static deserialize(t,i,s,r,o,{paths:{lines:c,points:u},rotation:h,thickness:f}){const g=[];let y,b,A,w,S;switch(h){case 0:S=et._rescale,y=-t/s,b=i/r+1,A=1/s,w=-1/r;break;case 90:S=et._rescaleAndSwap,y=-i/r,b=-t/s,A=1/r,w=1/s;break;case 180:S=et._rescale,y=t/s+1,b=-i/r,A=-1/s,w=1/r;break;case 270:S=et._rescaleAndSwap,y=i/r+1,b=t/s+1,A=-1/r,w=-1/s;break}if(!c){c=[];for(const x of u){const T=x.length;if(T===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(T===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const C=new Float32Array(3*(T-2));c.push(C);let[D,k,B,N]=x.subarray(0,4);C.set([NaN,NaN,NaN,NaN,D,k],0);for(let H=4;H<T;H+=2){const K=x[H],W=x[H+1];C.set(et.createBezierPoints(D,k,B,N,K,W),(H-2)*3),[D,k,B,N]=[B,N,K,W]}}}for(let x=0,T=c.length;x<T;x++)g.push({line:S(c[x].map(C=>C??NaN),y,b,A,w),points:S(u[x].map(C=>C??NaN),y,b,A,w)});const _=new this.prototype.constructor;return _.build(g,s,r,1,h,f,o),_}#l(t=this.#c){const i=this.#n+t/2*this.#s;return this.#o%180===0?[i/this.#r,i/this.#a]:[i/this.#a,i/this.#r]}#d(){const[t,i,s,r]=this.#t,[o,c]=this.#l(0);return[t+o,i+c,s-2*o,r-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)nt.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],c=r[5];for(let u=6,h=r.length;u<h;u+=6){const[f,g,y,b,A,w]=r.subarray(u,u+6);nt.bezierBoundingBox(o,c,f,g,y,b,A,w,t),o=A,c=w}}const[i,s]=this.#l();t[0]=De(t[0]-i,0,1),t[1]=De(t[1]-s,0,1),t[2]=De(t[2]+i,0,1),t[3]=De(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#c=t;const[r,o]=this.#l(),[c,u]=[r-i,o-s],h=this.#t;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([t,i],s){const[r,o]=this.#l();this.#r=t,this.#a=i,this.#s=s;const[c,u]=this.#l(),h=c-r,f=u-o,g=this.#t;return g[0]-=h,g[1]-=f,g[2]+=2*h,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(et.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,o=0,c=0,u=0,h=0;switch(this.#e){case 90:r=i/t,o=-t/i,u=t;break;case 180:s=-1,c=-1,u=t,h=i;break;case 270:r=-i/t,o=t/i,h=i;break;default:return""}return`matrix(${s} ${r} ${o} ${c} ${et.svgRound(u)} ${et.svgRound(h)})`}getPathResizingSVGProperties([t,i,s,r]){const[o,c]=this.#l(),[u,h,f,g]=this.#t;if(Math.abs(f-o)<=et.PRECISION||Math.abs(g-c)<=et.PRECISION){const S=t+s/2-(u+f/2),_=i+r/2-(h+g/2);return{path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${_})`}}}const y=(s-2*o)/(f-2*o),b=(r-2*c)/(g-2*c),A=f/s,w=g/r;return{path:{"transform-origin":`${et.svgRound(u)} ${et.svgRound(h)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${et.svgRound(o)} ${et.svgRound(c)}) scale(${y} ${b}) translate(${et.svgRound(-o)} ${et.svgRound(-c)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[o,c]=this.#l(),u=this.#t,[h,f,g,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(g-o)<=et.PRECISION||Math.abs(y-c)<=et.PRECISION){const _=t+s/2-(h+g/2),x=i+r/2-(f+y/2);for(const{line:T,points:C}of this.#i)et._translate(T,_,x,T),et._translate(C,_,x,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),A=(r-2*c)/(y-2*c),w=-b*(h+o)+t+o,S=-A*(f+c)+i+c;if(b!==1||A!==1||w!==0||S!==0)for(const{line:_,points:x}of this.#i)et._rescale(_,w,S,b,A,_),et._rescale(x,w,S,b,A,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,o]=s,c=this.#t,u=t-c[0],h=i-c[1];if(this.#r===r&&this.#a===o)for(const{line:f,points:g}of this.#i)et._translate(f,u,h,f),et._translate(g,u,h,g);else{const f=this.#r/r,g=this.#a/o;this.#r=r,this.#a=o;for(const{line:y,points:b}of this.#i)et._rescale(y,u,h,f,g,y),et._rescale(b,u,h,f,g,b);c[2]*=f,c[3]*=g}return c[0]=t,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t[0])} ${et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Tl extends qy{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ot._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new Tl(this._viewParameters);return t.updateAll(this),t}}class Xh extends Lt{static _type="ink";static _editorType=mt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){ot.initialize(t,i),this._defaultDrawingOptions=new Tl(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return gt(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,o){return new Tw(t,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,o,c){return Nr.deserialize(t,i,s,r,o,c)}static async deserialize(t,i,s){let r=null;if(t instanceof qh){const{data:{inkLists:c,rect:u,rotation:h,id:f,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:w,contentsObj:S,creationDate:_,modificationDate:x},parent:{page:{pageNumber:T}}}=t;r=t={annotationType:mt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:_,modificationDate:x}}const o=await super.deserialize(t,i,s);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Sr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Xh.getDefaultDrawingOptions({stroke:nt.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:ot._colorManager.convert(r),opacity:o,thickness:c,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class Eh extends Nr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const rl=8,ur=3;class Ws{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,o,c,u){const h=this.#e(s,r,o,c);for(let f=0;f<8;f++){const g=(-f+h-u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#r(t,i,s,r,o,c,u){const h=this.#e(s,r,o,c);for(let f=0;f<8;f++){const g=(f+h+u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#a(t,i,s,r){const o=t.length,c=new Int32Array(o);for(let g=0;g<o;g++)c[g]=t[g]<=r?1:0;for(let g=1;g<s-1;g++)c[g*i]=c[g*i+i-1]=0;for(let g=0;g<i;g++)c[g]=c[i*s-1-g]=0;let u=1,h;const f=[];for(let g=1;g<s-1;g++){h=1;for(let y=1;y<i-1;y++){const b=g*i+y,A=c[b];if(A===0)continue;let w=g,S=y;if(A===1&&c[b-1]===0)u+=1,S-=1;else if(A>=1&&c[b+1]===0)u+=1,S+=1,A>1&&(h=A);else{A!==1&&(h=Math.abs(A));continue}const _=[y,g],x=S===y+1,T={isHole:x,points:_,id:u,parent:0};f.push(T);let C;for(const Z of f)if(Z.id===h){C=Z;break}C?C.isHole?T.parent=x?C.parent:h:T.parent=x?h:C.parent:T.parent=x?h:0;const D=this.#i(c,i,g,y,w,S,0);if(D===-1){c[b]=-u,c[b]!==1&&(h=Math.abs(c[b]));continue}let k=this.#n[2*D],B=this.#n[2*D+1];const N=g+k,H=y+B;w=N,S=H;let K=g,W=y;for(;;){const Z=this.#r(c,i,K,W,w,S,1);k=this.#n[2*Z],B=this.#n[2*Z+1];const st=K+k,At=W+B;_.push(At,st);const vt=K*i+W;if(c[vt+1]===0?c[vt]=-u:c[vt]===1&&(c[vt]=u),st===g&&At===y&&K===N&&W===H){c[b]!==1&&(h=Math.abs(c[b]));break}else w=K,S=W,K=st,W=At}}}return f}static#s(t,i,s,r){if(s-i<=4){for(let N=i;N<s-2;N+=2)r.push(t[N],t[N+1]);return}const o=t[i],c=t[i+1],u=t[s-4]-o,h=t[s-3]-c,f=Math.hypot(u,h),g=u/f,y=h/f,b=g*c-y*o,A=h/u,w=1/f,S=Math.atan(A),_=Math.cos(S),x=Math.sin(S),T=w*(Math.abs(_)+Math.abs(x)),C=w*(1-T+T**2),D=Math.max(Math.atan(Math.abs(x+_)*C),Math.atan(Math.abs(x-_)*C));let k=0,B=i;for(let N=i+2;N<s-2;N+=2){const H=Math.abs(b-g*t[N+1]+y*t[N]);H>k&&(B=N,k=H)}k>(f*D)**2?(this.#s(t,i,B+2,r),this.#s(t,B,s,r)):r.push(o,c)}static#o(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,o,c){const u=new Float32Array(c**2),h=-2*r**2,f=c>>1;for(let S=0;S<c;S++){const _=(S-f)**2;for(let x=0;x<c;x++)u[S*c+x]=Math.exp((_+(x-f)**2)/h)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let _=0;_<i;_++){const x=S*i+_,T=t[x];let C=0,D=0;for(let B=0;B<c;B++){const N=S+B-f;if(!(N<0||N>=s))for(let H=0;H<c;H++){const K=_+H-f;if(K<0||K>=i)continue;const W=t[N*i+K],Z=u[B*c+H]*g[Math.abs(W-T)];C+=W*Z,D+=Z}}const k=A[x]=Math.round(C/D);w[k]++}return[A,w]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,o=1/0;for(let u=0,h=s.length;u<h;u++){const f=s[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const c=255/(r-o);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-o)*c;return s}static#h(t){let i,s=-1/0,r=-1/0;const o=t.findIndex(h=>h!==0);let c=o,u=o;for(i=o;i<256;i++){const h=t[i];h>s&&(i-c>r&&(r=i-c,u=i-1),s=h,c=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:o}=this.#t;let c=s,u=r;if(s>o||r>o){let b=s,A=r,w=Math.log2(Math.max(s,r)/o);const S=Math.floor(w);w=w===S?S-1:S;for(let x=0;x<w;x++){c=Math.ceil(b/2),u=Math.ceil(A/2);const T=new OffscreenCanvas(c,u);T.getContext("2d").drawImage(t,0,0,b,A,0,0,c,u),b=c,A=u,t!==i&&t.close(),t=T.transferToImageBitmap()}const _=Math.min(o/c,o/u);c=Math.round(c*_),u=Math.round(u*_)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const g=f.getImageData(0,0,c,u).data;return[this.#d(g),c,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},o,c,u,h){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${r} ${y}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:_,fontBoundingBoxAscent:x,fontBoundingBoxDescent:T,width:C}=g.measureText(t),D=1.5,k=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,C)*D),B=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||y,Math.abs(x)+Math.abs(T)||y)*D);f=new OffscreenCanvas(k,B),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,k,B),g.fillStyle="black",g.fillText(t,k*(D-1)/2,B*(3-D)/2);const N=this.#d(g.getImageData(0,0,k,B).data),H=this.#l(N),K=this.#h(H),W=this.#a(N,k,B,K);return this.processDrawnLines({lines:{curves:W,width:k,height:B},pageWidth:o,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,o){const[c,u,h]=this.#f(t),[f,g]=this.#c(c,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#a(f,u,h,y);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:c,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:h,width:f,height:g}=t,y=t.thickness??0,b=[],A=Math.min(i/f,s/g),w=A/i,S=A/s,_=[];for(const{points:T}of h){const C=c?this.#o(T):T;if(!C)continue;_.push(C);const D=C.length,k=new Float32Array(D),B=new Float32Array(3*(D===2?2:D-2));if(b.push({line:B,points:k}),D===2){k[0]=C[0]*w,k[1]=C[1]*S,B.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[N,H,K,W]=C;N*=w,H*=S,K*=w,W*=S,k.set([N,H,K,W],0),B.set([NaN,NaN,NaN,NaN,N,H],0);for(let Z=4;Z<D;Z+=2){const st=k[Z]=C[Z]*w,At=k[Z+1]=C[Z+1]*S;B.set(et.createBezierPoints(N,H,K,W,st,At),(Z-2)*3),[N,H,K,W]=[K,W,st,At]}}if(b.length===0)return null;const x=u?new Eh:new Nr;return x.build(b,i,s,1,r,u?0:y,o),{outline:x,newCurves:_,areContours:u,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:o}){let c=1/0,u=-1/0,h=0;for(const C of t){h+=C.length;for(let D=2,k=C.length;D<k;D++){const B=C[D]-C[D-2];c=Math.min(c,B),u=Math.max(u,B)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=rl+ur*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*g)*f.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=o,b[A++]=i?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=g,b[A++]=f.BYTES_PER_ELEMENT;for(const C of t)b[A++]=C.length-2,b[A++]=C[0],b[A++]=C[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(b);const _=f.prototype.constructor;for(const C of t){const D=new _(C.length-2);for(let k=2,B=C.length;k<B;k++)D[k-2]=C[k]-C[k-2];S.write(D)}S.close();const x=await new Response(w.readable).arrayBuffer(),T=new Uint8Array(x);return gy(T)}static async decompressSignature(t){try{const i=GS(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const C of s)c||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),c.set(C,u),u+=C.length;const h=new Uint32Array(c.buffer,0,c.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=h[2],y=h[3],b=h[4]===0,A=h[5],w=h[6],S=h[7],_=[],x=(rl+ur*w)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(c.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(c.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(c.buffer,x);break}u=0;for(let C=0;C<w;C++){const D=h[ur*C+rl],k=new Float32Array(D+2);_.push(k);for(let B=0;B<ur-1;B++)k[B]=h[ur*C+rl+B+1];for(let B=0;B<D;B++)k[B+2]=k[B]+T[u++]}return{areContours:b,thickness:A,outlines:_,width:g,height:y}}catch(i){return pt(`decompressSignature: ${i}`),null}}}class Yh extends qy{constructor(){super(),super.updateProperties({fill:ot._defaultLineColor,"stroke-width":0})}clone(){const t=new Yh;return t.updateAll(this),t}}class $h extends Tl{constructor(t){super(t),super.updateProperties({stroke:ot._defaultLineColor,"stroke-width":1})}clone(){const t=new $h(this._viewParameters);return t.updateAll(this),t}}class Mi extends Lt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=mt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){ot.initialize(t,i),this._defaultDrawingOptions=new Yh,this._defaultDrawnSignatureOptions=new $h(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return gt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:o,areContours:c,description:u,uuid:h,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,A=Ws.processDrawnLines({lines:r,pageWidth:g,pageHeight:y,rotation:b,innerMargin:Mi._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(A,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:o}=this.#n,c=Math.max(r,o),u=Ws.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:s,width:r,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:o,y:c}=this,{outline:u}=this.#n=t;this.#t=u instanceof Eh,this.description=s;let h;this.#t?h=Mi.getDefaultDrawingOptions():(h=Mi._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let g=i/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Ws.process(t,i,s,r,Mi._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return Ws.extractContoursFromText(t,i,s,r,o,Mi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Ws.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:Mi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=Mi.getDefaultDrawingOptions():(this._drawingOptions=Mi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:i,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=i,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,i,s,r,o,c){return c.areContours?Eh.deserialize(t,i,s,r,o,c):Nr.deserialize(t,i,s,r,o,c)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class Mw extends ot{#t=null;#e=null;#n=null;#i=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=mt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){ot.initialize(t,i)}static isHandlingMimeForPasting(t){return mh.includes(t)}static paste(t,i){i.pasteEditor({mode:mt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:c,channels:r.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),i&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=mh.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,o]=this.pageDimensions,c=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>c*r||s>c*o){const h=Math.min(c*r/i,c*o/s);i*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:o}=this.#t,c=new Di;let u=this.#t,h=r,f=o,g=null;if(i){if(r>i||o>i){const B=Math.min(i/r,i/o);h=Math.floor(r*B),f=Math.floor(o*B)}g=document.createElement("canvas");const b=g.width=Math.ceil(h*c.sx),A=g.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(b,A));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":KS.isDarkMode&&(S="#8f8f9d",_="#42414d");const x=15,T=x*c.sx,C=x*c.sy,D=new OffscreenCanvas(T*2,C*2),k=D.getContext("2d");k.fillStyle=S,k.fillRect(0,0,T*2,C*2),k.fillStyle=_,k.fillRect(0,0,T,C),k.fillRect(T,C,T,C),w.fillStyle=w.createPattern(D,"repeat"),w.fillRect(0,0,b,A),w.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(c.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,r>t||o>t){const _=Math.min(t/r,t/o);b=Math.floor(r*_),A=Math.floor(o*_),this.#l||(u=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:g,width:h,height:f,imageData:y}}#u(t,i){const{width:s,height:r}=this.#t;let o=s,c=r,u=this.#t;for(;o>2*t||c>2*i;){const h=o,f=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(o,c);g.getContext("2d").drawImage(u,0,0,h,f,0,0,o,c),u=g.transferToImageBitmap()}return u}#p(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,o=new Di,c=Math.ceil(s*t*o.sx),u=Math.ceil(r*i*o.sy),h=this.#s;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const f=this.#l?this.#t:this.#u(c,u),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*oa.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*oa.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,o=!1;if(t instanceof Hy){const{data:{rect:S,rotation:_,id:x,structParent:T,popupRef:C,richText:D,contentsObj:k,creationDate:B,modificationDate:N},container:H,parent:{page:{pageNumber:K}},canvas:W}=t;let Z,st;W?(delete t.canvas,{id:Z,bitmap:st}=s.imageManager.getFromCanvas(H.id,W),W.remove()):(o=!0,t._hasNoCanvas=!0);const At=(await i._structTree.getAriaAttributes(`${Js}${x}`))?.get("aria-label")||"";r=t={annotationType:mt.STAMP,bitmapId:Z,bitmap:st,pageIndex:K-1,rect:S.slice(0),rotation:_,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:At},isSvg:!1,structParent:T,popupRef:C,richText:D,comment:k?.str||null,creationDate:B,modificationDate:N}}const c=await super.deserialize(t,i,s),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,c),c.#o=!0):g&&s.imageManager.isValidId(g)?(c.#e=g,h&&(c.#t=h)):c.#i=f,c.#l=y;const[A,w]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/w,b&&(c.altTextData=b),c._initialData=r,t.comment&&c.setCommentData(t),c.#d=!!r,c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=i.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Zi{#t;#e=!1;#n=null;#i=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([ge,Xh,Mw,se,Mi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:h,viewport:f,l10n:g}){const y=[...Zi.#p.values()];if(!Zi._initialized){Zi._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=i,this.div=s,this.#t=o,this.#n=c,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===mt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case mt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===mt.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of Zi.#p.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#y(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:h,timeStamp:f}=o,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(u,h);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let A;const w=new RegExp(`^${yr}[0-9]+$`);for(const _ of b)if(w.test(_.id)){A=_.id;break}if(!A)return;const S=this.#a.get(A);S?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick(o))},{signal:r,capture:!0})}const t=this.#n,i=[];if(t){const r=new Map,o=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:h}=u.data;if(this.#u.isDeletedAnnotationElement(h)){u.updateEdited({deleted:!0});continue}let f=o.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(h),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of Zi.#p.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=Ee.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),se.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),ot.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#a.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#b(){return Zi.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#x(),o=this.getNextId(),c=this.#E({parent:this,id:o,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});c&&this.add(c)}async deserialize(t){return await Zi.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),o=this.#E({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,o=Math.max(0,t),c=Math.max(0,i),u=Math.min(window.innerWidth,t+s),h=Math.min(window.innerHeight,i+r),f=(o+u)/2-t,g=(c+h)/2-i,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#x(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=Ee.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===mt.STAMP||s===mt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===mt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=Ee.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ss(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,ss(this.div,{rotation:s}),i!==s)for(const r of this.#a.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class xe{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return gt(this,"_svgFactory",new gl)}static#r(t,[i,s,r,o]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*i}%`,c.width=`${100*r}%`,c.height=`${100*o}%`}#a(){const t=xe._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=xe._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=xe._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),r}#o(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=xe.#i++,o=this.#a(),c=xe._svgFactory.createElement("defs");o.append(c);const u=xe._svgFactory.createElement("path");c.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const f=s?this.#s(c,h):null,g=xe._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${h}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=xe.#i++,r=this.#a(),o=xe._svgFactory.createElement("defs");r.append(o);const c=xe._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(i){const y=xe._svgFactory.createElement("mask");o.append(y),h=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const b=xe._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=xe._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=xe._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const g=f.cloneNode();return r.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:o,path:c}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),r&&xe.#r(u,r),o){const{classList:h}=u;for(const[f,g]of Object.entries(o))h.toggle(f,g)}if(c){const f=u.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:xh};globalThis.pdfjsLib={AbortException:Nn,AnnotationEditorLayer:Zi,AnnotationEditorParamsType:Mt,AnnotationEditorType:mt,AnnotationEditorUIManager:On,AnnotationLayer:Vh,AnnotationMode:Rn,AnnotationType:ue,applyOpacity:WS,build:sw,ColorPicker:fi,createValidAbsoluteUrl:hy,CSSConstants:QS,DOMSVGFactory:gl,DrawLayer:xe,FeatureTest:Ee,fetchData:Cr,findContrastColor:ZS,getDocument:J1,getFilenameFromUrl:qS,getPdfFilenameFromUrl:VS,getRGB:Mr,getUuid:py,getXfaPageViewport:YS,GlobalWorkerOptions:aa,ImageKind:cl,InvalidPDFException:ph,isDataScheme:_l,isPdfFile:Bh,isValidExplicitDest:l1,MathClamp:De,noContextMenu:pi,normalizeUnicode:jS,OPS:br,OutputScale:Di,PasswordResponses:OS,PDFDataRangeTransport:ky,PDFDateString:gh,PDFWorker:Ar,PermissionFlag:NS,PixelsPerInch:oa,RenderingCancelledException:kh,renderRichText:yy,ResponseException:fl,setLayerDimensions:ss,shadow:gt,SignatureExtractor:Ws,stopEvent:te,SupportedImageMimeTypes:mh,TextLayer:Me,TouchManager:El,updateUrlHash:dy,Util:nt,VerbosityLevel:Sl,version:zy,XfaLayer:my};aa.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${zy}/pdf.worker.min.js`;function Rw(){const d=xr(),[t,i]=j.useState("Reasoning"),[s,r]=j.useState({}),[o,c]=j.useState(!1),[u,h]=j.useState(0),[f,g]=j.useState(!1),[y,b]=j.useState(0);j.useEffect(()=>{let N;return o||(N=setInterval(()=>{b(H=>H+1)},1e3)),()=>clearInterval(N)},[o]);const A=N=>{const H=Math.floor(N/60),K=N%60;return`${H}:${K<10?"0":""}${K}`},w=["Reasoning","General Awareness","Aptitude","English"],S=N=>{switch(N){case"Reasoning":return R.jsx(Vm,{className:"w-5 h-5"});case"General Awareness":return R.jsx(qv,{className:"w-5 h-5"});case"Aptitude":return R.jsx(Xm,{className:"w-5 h-5"});case"English":return R.jsx(qm,{className:"w-5 h-5"});default:return null}},_=(N,H)=>{o||r(K=>({...K,[N]:H}))},x=()=>{let N=0;questionsData.forEach(H=>{s[H.id]===H.correctAnswer?N+=2:s[H.id]&&(N-=.5)}),h(N),c(!0),g(!0)},T=()=>{r({}),c(!1),h(0),b(0),i("Reasoning"),g(!1)},C=questionsData.filter(N=>N.section===t),D=questionsData.length,k=Object.keys(s).length,B=k/D*100;return R.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans text-gray-800",children:[R.jsx("header",{className:"bg-blue-700 text-white p-4 shadow-lg sticky top-0 z-10",children:R.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsx("button",{onClick:()=>d("/"),className:"p-2 hover:bg-blue-600 rounded-full transition-colors",title:"Back to Dashboard",children:R.jsx(Km,{className:"w-6 h-6 text-white"})}),R.jsxs("div",{children:[R.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[R.jsx(Gm,{className:"w-6 h-6 text-yellow-300"}),"SSC CGL 2024 Mock"]}),R.jsx("p",{className:"text-xs text-blue-200 mt-1 hidden sm:block",children:"Aggregated Previous Year Questions (Sept Shifts)"})]})]}),R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsxs("div",{className:"flex items-center gap-2 bg-blue-800 px-3 py-1 rounded-full text-sm font-mono",children:[R.jsx($m,{className:"w-4 h-4 text-blue-300"}),A(y)]}),o?R.jsxs("div",{className:"text-right",children:[R.jsx("div",{className:"text-2xl font-bold text-yellow-300",children:u}),R.jsx("div",{className:"text-xs",children:"Marks"})]}):R.jsxs("div",{className:"text-right hidden sm:block",children:[R.jsx("div",{className:"text-sm font-semibold",children:"Progress"}),R.jsx("div",{className:"w-32 h-2 bg-blue-900 rounded-full mt-1 overflow-hidden",children:R.jsx("div",{className:"h-full bg-yellow-400 transition-all duration-500",style:{width:`${B}%`}})}),R.jsxs("p",{className:"text-xs mt-1",children:[k,"/",D]})]})]})]})}),R.jsxs("main",{className:"max-w-6xl mx-auto p-4 md:p-6 pb-24",children:[o&&R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-blue-100 p-6 mb-6 text-center animate-fade-in-up",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Test Completed!"}),R.jsxs("p",{className:"text-gray-600 mb-4",children:["Final Score: ",R.jsx("span",{className:"font-bold text-blue-600 text-xl",children:u})," / ",D*2,R.jsx("br",{}),R.jsxs("span",{className:"text-sm text-gray-400",children:["Time Taken: ",A(y)]})]}),R.jsx("div",{className:"flex justify-center gap-4",children:R.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors",children:[R.jsx(Wv,{className:"w-4 h-4"})," Retake Test"]})})]}),R.jsx("div",{className:"flex overflow-x-auto pb-2 mb-6 gap-2 no-scrollbar",children:w.map(N=>R.jsxs("button",{onClick:()=>i(N),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${t===N?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[S(N),N]},N))}),R.jsx("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-1",children:C.map((N,H)=>{const K=s[N.id]===N.correctAnswer;return R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[R.jsxs("div",{className:"p-5 border-b border-gray-100 bg-gray-50/50",children:[R.jsxs("div",{className:"flex justify-between items-start mb-2",children:[R.jsxs("span",{className:"text-xs font-bold text-blue-600 uppercase tracking-wider bg-blue-50 px-2 py-1 rounded",children:["Q",H+1]}),o&&(K?R.jsxs("span",{className:"text-xs font-bold text-green-600 flex items-center gap-1",children:[R.jsx(Zs,{className:"w-3 h-3"})," Correct (+2)"]}):s[N.id]?R.jsxs("span",{className:"text-xs font-bold text-red-600 flex items-center gap-1",children:[R.jsx(ch,{className:"w-3 h-3"})," Incorrect (-0.5)"]}):R.jsx("span",{className:"text-xs font-bold text-gray-400",children:"Unattempted"}))]}),R.jsx("h3",{className:"text-lg font-medium text-gray-900 leading-relaxed",children:N.question})]}),R.jsx("div",{className:"p-5 space-y-3",children:N.options.map((W,Z)=>{let st="w-full text-left p-3 rounded-lg border-2 transition-all flex justify-between items-center group ";return o?W===N.correctAnswer?st+="border-green-500 bg-green-50 text-green-800":s[N.id]===W?st+="border-red-500 bg-red-50 text-red-800":st+="border-gray-100 text-gray-400 opacity-60":s[N.id]===W?st+="border-blue-500 bg-blue-50 text-blue-700 font-medium":st+="border-gray-100 hover:border-blue-200 hover:bg-gray-50 text-gray-600",R.jsxs("button",{onClick:()=>_(N.id,W),disabled:o,className:st,children:[R.jsxs("span",{className:"flex items-center gap-3",children:[R.jsx("span",{className:`w-6 h-6 flex items-center justify-center rounded-full text-xs border ${o?W===N.correctAnswer?"border-green-600 bg-green-200 text-green-800":"border-gray-300":s[N.id]===W?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-500 group-hover:border-blue-300"}`,children:String.fromCharCode(65+Z)}),W]}),o&&W===N.correctAnswer&&R.jsx(Zs,{className:"w-5 h-5 text-green-600"}),o&&s[N.id]===W&&W!==N.correctAnswer&&R.jsx(ch,{className:"w-5 h-5 text-red-600"})]},Z)})}),o&&R.jsx("div",{className:"px-5 pb-5 pt-0 animate-fade-in",children:R.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:R.jsxs("div",{className:"flex items-start gap-2",children:[R.jsx(Uv,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-bold text-blue-800 text-sm mb-1",children:"Explanation"}),R.jsx("p",{className:"text-blue-900 text-sm leading-relaxed",children:N.rationale})]})]})})})]},N.id)})})]}),!o&&R.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] md:static md:bg-transparent md:border-0 md:shadow-none md:p-0 md:mb-12 md:text-center z-20",children:R.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center md:justify-end",children:[R.jsxs("div",{className:"text-sm text-gray-500 md:hidden",children:[R.jsx("span",{className:"font-bold text-gray-800",children:k}),"/",D," Answered"]}),R.jsxs("button",{onClick:x,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform active:scale-95 transition-all flex items-center gap-2",children:["Submit Test ",R.jsx(Ym,{className:"w-5 h-5"})]})]})})]})}const jm=({children:d})=>{const{user:t}=Al();return t?d:R.jsx(XA,{to:"/login",replace:!0})},Dw=()=>{const{user:d,logout:t}=Al(),[i,s]=j.useState(null),[r,o]=j.useState(0),[c,u]=j.useState({}),[h,f]=j.useState(!1),[g,y]=j.useState(new Set([0]));j.useEffect(()=>{if(d){const C=localStorage.getItem(`progress_${d.id}`);if(C){const D=JSON.parse(C);u(D.answers||{}),y(new Set(D.visited||[0])),s(D.activeSection||null),o(D.currentQuestionIndex||0),f(D.isFinished||!1)}}},[d]),j.useEffect(()=>{d&&localStorage.setItem(`progress_${d.id}`,JSON.stringify({answers:c,visited:Array.from(g),activeSection:i,currentQuestionIndex:r,isFinished:h}))},[c,g,i,r,h,d]);const b=C=>{i===C&&!h||(s(C),o(0),u({}),f(!1),y(new Set([0])))},A=C=>{u(D=>({...D,[r]:C}))},w=C=>{o(C),y(D=>new Set([...D,C]))},S=()=>{f(!0)},_=()=>{let C=0;return Ys[i].forEach((k,B)=>{c[B]===k.correct&&C++}),C};if(!i)return R.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[R.jsx("header",{className:"bg-indigo-600 text-white p-6 shadow-md",children:R.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between items-center",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-3xl font-bold",children:"JSO Exam Prep Series"}),R.jsxs("p",{className:"opacity-90 mt-2 text-indigo-100",children:["Welcome, ",d.username,"!"]})]}),R.jsxs("button",{onClick:t,className:"flex items-center px-4 py-2 bg-indigo-700 rounded-lg hover:bg-indigo-800 transition-colors text-sm font-medium",children:[R.jsx(Kv,{className:"w-4 h-4 mr-2"})," Logout"]})]})}),R.jsxs("main",{className:"max-w-5xl mx-auto p-6",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[R.jsx(Wo,{title:"Numerical Aptitude",icon:Xm,color:"blue",questionCount:Ys.numerical.length,onClick:()=>b("numerical")}),R.jsx(Wo,{title:"English Language",icon:qm,color:"green",questionCount:Ys.english.length,onClick:()=>b("english")}),R.jsx(Wo,{title:"General Reasoning",icon:Vm,color:"purple",questionCount:Ys.reasoning.length,onClick:()=>b("reasoning")}),R.jsx(Wo,{title:"SSC CGL Exam",icon:Gm,color:"indigo",questionCount:"30+",onClick:()=>window.location.hash="#/ssc-cgl"})]}),R.jsxs("div",{className:"mt-12 bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[R.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"About this Test Series"}),R.jsxs("ul",{className:"space-y-3 text-gray-600 text-sm",children:[R.jsxs("li",{className:"flex items-start",children:[R.jsx(Zs,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0"}),R.jsx("span",{children:"Questions extracted directly from uploaded JSO/GPSC question papers."})]}),R.jsxs("li",{className:"flex items-start",children:[R.jsx(Zs,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0"}),R.jsx("span",{children:"Includes Reading Comprehension, Time & Work, Coding-Decoding, and more."})]}),R.jsxs("li",{className:"flex items-start",children:[R.jsx(Zs,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0"}),R.jsx("span",{children:"Real-time scoring and performance analysis."})]})]})]})]})]});if(h){const C=_(),D=Ys[i],k=Math.round(C/D.length*100);return R.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:R.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden",children:[R.jsxs("div",{className:"bg-indigo-600 p-8 text-white text-center",children:[R.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Test Result"}),R.jsx("p",{className:"opacity-80 uppercase tracking-wider text-sm",children:i}),R.jsx("div",{className:"mt-6 flex justify-center",children:R.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white/30 flex items-center justify-center bg-white/10",children:R.jsxs("div",{className:"text-center",children:[R.jsxs("span",{className:"text-4xl font-bold block",children:[k,"%"]}),R.jsx("span",{className:"text-xs opacity-75",children:"Score"})]})})}),R.jsxs("p",{className:"mt-4 text-xl",children:["You scored ",C," out of ",D.length]})]}),R.jsxs("div",{className:"p-6",children:[R.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[R.jsx(kv,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Detailed Analysis"]}),R.jsx("div",{className:"space-y-6",children:D.map((B,N)=>{const H=c[N],K=H===B.correct,W=H===void 0;return R.jsxs("div",{className:`border rounded-lg p-4 ${K?"border-green-200 bg-green-50":W?"border-gray-200 bg-gray-50":"border-red-200 bg-red-50"}`,children:[R.jsxs("div",{className:"flex justify-between items-start mb-2",children:[R.jsxs("span",{className:"font-semibold text-gray-500 text-sm",children:["Q",N+1]}),K?R.jsx("span",{className:"text-xs font-bold text-green-700 bg-green-200 px-2 py-1 rounded",children:"Correct"}):W?R.jsx("span",{className:"text-xs font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded",children:"Skipped"}):R.jsx("span",{className:"text-xs font-bold text-red-700 bg-red-200 px-2 py-1 rounded",children:"Incorrect"})]}),B.passage&&R.jsxs("div",{className:"text-xs text-gray-500 italic mb-2 p-2 bg-white/50 rounded border border-gray-100 line-clamp-2",children:["Passage ref: ",B.passage.substring(0,60),"..."]}),R.jsx("p",{className:"text-gray-800 mb-3 font-medium",children:B.question}),R.jsx("div",{className:"space-y-2",children:B.options.map((Z,st)=>R.jsxs("div",{className:`text-sm p-2 rounded flex items-center ${st===B.correct?"bg-green-200 text-green-800 font-semibold":st===H?"bg-red-200 text-red-800":"bg-white text-gray-600"}`,children:[st===B.correct&&R.jsx(Zs,{className:"w-4 h-4 mr-2"}),st===H&&st!==B.correct&&R.jsx(ch,{className:"w-4 h-4 mr-2"}),Z]},st))})]},B.id)})}),R.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[R.jsxs("button",{onClick:()=>b(i),className:"flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[R.jsx(Jv,{className:"w-4 h-4 mr-2"})," Retry Section"]}),R.jsxs("button",{onClick:()=>s(null),className:"flex items-center px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:[R.jsx(Km,{className:"w-4 h-4 mr-2"})," Home"]})]})]})]})})}const x=Ys[i],T=x[r];return R.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[R.jsxs("header",{className:"bg-white shadow-sm px-6 py-4 flex justify-between items-center sticky top-0 z-10",children:[R.jsxs("div",{children:[R.jsxs("h2",{className:"text-lg font-bold text-gray-800 capitalize",children:[i," Section"]}),R.jsxs("span",{className:"text-xs text-gray-500",children:["Question ",r+1," of ",x.length]})]}),R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsx(TS,{duration:1200,onTimeUp:S}),R.jsx("button",{onClick:S,className:"px-4 py-2 bg-red-100 text-red-600 text-sm font-semibold rounded-lg hover:bg-red-200",children:"Finish Test"})]})]}),R.jsxs("main",{className:"flex-1 flex flex-col md:flex-row max-w-7xl mx-auto w-full p-4 gap-4",children:[R.jsxs("div",{className:"flex-1 bg-white rounded-xl shadow-sm p-6 overflow-y-auto",children:[T.instruction&&R.jsxs("div",{className:"mb-4 p-3 bg-blue-50 text-blue-800 text-sm rounded border border-blue-100",children:[R.jsx("span",{className:"font-bold mr-2",children:"Instruction:"}),T.instruction]}),T.passage&&R.jsx("div",{className:"mb-6 p-4 bg-gray-50 text-gray-700 text-sm leading-relaxed rounded-lg border border-gray-200 font-serif",children:T.passage}),R.jsx("div",{className:"mb-6",children:R.jsxs("h3",{className:"text-xl font-medium text-gray-900 leading-snug",children:[R.jsxs("span",{className:"font-bold mr-2 text-indigo-600",children:[r+1,"."]}),T.question]})}),R.jsx("div",{className:"space-y-3",children:T.options.map((C,D)=>R.jsxs("button",{onClick:()=>A(D),className:`w-full text-left p-4 rounded-lg border-2 transition-all duration-200 flex items-center group ${c[r]===D?"border-indigo-500 bg-indigo-50":"border-gray-100 hover:border-indigo-200 hover:bg-gray-50"}`,children:[R.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-4 ${c[r]===D?"bg-indigo-500 text-white":"bg-gray-200 text-gray-500 group-hover:bg-indigo-100 group-hover:text-indigo-600"}`,children:String.fromCharCode(65+D)}),R.jsx("span",{className:`${c[r]===D?"text-indigo-900 font-medium":"text-gray-700"}`,children:C})]},D))}),R.jsxs("div",{className:"mt-8 flex justify-between items-center",children:[R.jsxs("button",{disabled:r===0,onClick:()=>w(r-1),className:`flex items-center px-4 py-2 rounded-lg ${r===0?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,children:[R.jsx(zv,{className:"w-5 h-5 mr-1"})," Previous"]}),R.jsxs("button",{onClick:()=>{r===x.length-1?S():w(r+1)},className:"flex items-center px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 shadow-md transform hover:translate-x-1 transition-all",children:[r===x.length-1?"Submit Test":"Next",r!==x.length-1&&R.jsx(Ym,{className:"w-5 h-5 ml-1"})]})]})]}),R.jsxs("div",{className:"w-full md:w-80 bg-white rounded-xl shadow-sm p-4 h-fit",children:[R.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-4 tracking-wider",children:"Question Palette"}),R.jsx("div",{className:"grid grid-cols-5 gap-2",children:x.map((C,D)=>{const k=c[D]!==void 0,B=r===D,N=g.has(D);let H="bg-gray-100 text-gray-600";return B?H="ring-2 ring-indigo-500 bg-indigo-50 text-indigo-700 font-bold":k?H="bg-green-500 text-white":N&&(H="bg-red-100 text-red-600"),R.jsx("button",{onClick:()=>w(D),className:`h-10 w-10 rounded-lg text-sm font-medium transition-all ${H}`,children:D+1},D)})}),R.jsxs("div",{className:"mt-6 space-y-2 text-xs text-gray-500",children:[R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"w-3 h-3 bg-green-500 rounded mr-2"})," Answered"]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"w-3 h-3 bg-red-100 rounded mr-2"})," Visited"]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded mr-2"})," Not Visited"]})]})]})]})]})};function Nw(){return R.jsx(MS,{children:R.jsx(yS,{children:R.jsxs($A,{children:[R.jsx(hr,{path:"/login",element:R.jsx(RS,{})}),R.jsx(hr,{path:"/signup",element:R.jsx(DS,{})}),R.jsx(hr,{path:"/ssc-cgl",element:R.jsx(jm,{children:R.jsx(Rw,{})})}),R.jsx(hr,{path:"/",element:R.jsx(jm,{children:R.jsx(Dw,{})})})]})})})}xv.createRoot(document.getElementById("root")).render(R.jsx(j.StrictMode,{children:R.jsx(Nw,{})}));
